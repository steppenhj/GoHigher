<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹ì§‘ì‚¬ - ì´ˆë¡ ì´ì•¼ê¸°</title>

    <!-- í°íŠ¸ ë° ë„¤ë¹„ê²Œì´ì…˜ CSS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="navigation.css">

 <style>
.story-container {
    max-width: 480px;
    margin: 100px auto 40px;
    padding: 0 8px;
    background: transparent;
}

/* ===== í”Œë¡œíŒ… ë²„íŠ¼ (ê¸€ì“°ê¸°) ===== */
.write-btn {
    position: fixed; right: 26px; bottom: 28px; z-index: 999;
    background: linear-gradient(135deg, #8AD14D 30%, #355F19 100%);
    box-shadow: 0 6px 24px rgba(80,100,70,0.18);
    width: 63px; height: 63px; font-size: 2.6rem; border-radius: 50%;
    color: #fff; border: none;
    display: flex; align-items: center; justify-content: center;
    transition: background 0.21s, box-shadow 0.22s;
}
.write-btn:hover {
    background: linear-gradient(135deg, #355F19 50%, #8AD14D 100%);
    box-shadow: 0 12px 32px rgba(80,100,70,0.25);
    transform: scale(1.07);
}
    /* === ê²Œì‹œë¬¼ í”¼ë“œ ë° ì¹´ë“œ ë””ìì¸ ê°œì„  (ê°€ì¥ ì¤‘ìš”!) === */
    #post-feed {
        display: flex;
        flex-direction: column;
        gap: 24px;
    }
/* ===== ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤íƒ€ì¼ í”¼ë“œ ì¹´ë“œ ===== */
.post-card {
    background: #fff;
    border-radius: 22px;
    margin-bottom: 34px;
    box-shadow: 0 4px 24px rgba(48,60,33,0.10);
    overflow: hidden;
    transition: box-shadow 0.25s, transform 0.23s;
    border: 1.5px solid #e3e6e1;
    position: relative;
}

.post-card:hover {
    box-shadow: 0 8px 32px rgba(48,60,33,0.13);
    transform: translateY(-2px) scale(1.02);
}
/* ===== ì¹´ë“œ ì»¨í…ì¸  ===== */
.post-card-content {
    padding: 24px 22px 22px;
}
 /* ===== ì‘ì„±ì/í”„ë¡œí•„ ===== */
.post-header {
    display: flex;
    align-items: center;
    gap: 11px;
    margin-bottom: 12px;
}
.post-author-avatar {
    width: 38px; height: 38px;
    border-radius: 50%;
    background-color: #A1B793;
    color: #fff; font-weight: bold; font-size: 1.2rem;
    display: flex; justify-content: center; align-items: center;
    border: 2px solid #D4E0C1;
}
.post-author-info {
    display: flex; flex-direction: column;
}
.post-author { font-weight: 700; font-size: 1.02rem; color: #4D5B40;}
.post-date { font-size: 12px; color: #B0B6A9; }
/* ===== ê¸€ ë‚´ìš© ===== */
.post-content {
    font-size: 1.1rem; line-height: 1.6;
    margin: 4px 0 0 0;
    color: #364426;
    word-break: break-word;
}

    /* === ê¸€ì“°ê¸° ëª¨ë‹¬ì°½ ë””ìì¸ ê°œì„  === */
    .story-modal-wrapper {
        position: fixed;
        z-index: 999;
        left: 0; top: 0; width: 100vw; height: 100vh;
        background: rgba(30,30,30,0.45);
        display: flex; justify-content: center; align-items: center;
        opacity: 0; visibility: hidden;
        transition: opacity 0.4s;
        backdrop-filter: blur(3px);
    }
    .story-modal-wrapper.open {
        opacity: 1; visibility: visible;
    }
    .story-modal {
        background: #fff;
        border-radius: 14px;
        padding: 36px 40px;
        width: 90vw;
        max-width: 480px; /* ë„ˆë¹„ ì¡°ì • */
        box-shadow: 0 16px 36px rgba(80,80,80,0.13);
        transform: translateY(50px) scale(0.96);
        opacity: 0;
        transition: all 0.36s cubic-bezier(.52,1.85,.57,.99);
    }
    .story-modal-wrapper.open .story-modal {
        transform: translateY(0) scale(1); opacity: 1;
    }
    .story-modal h2 {
        margin-top: 0;
        text-align: center;
        color: var(--primary-green);
        font-family: var(--font-serif);
        font-size: 1.8rem;
        margin-bottom: 24px;
    }
    .story-modal textarea {
        width: 100%;
        min-height: 120px;
        resize: vertical;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 1rem;
        padding: 14px;
        margin-bottom: 18px;
        font-family: inherit;
        transition: border-color 0.2s, box-shadow 0.2s;
    }
    .story-modal textarea:focus {
        outline: none;
        border-color: var(--primary-green);
        box-shadow: 0 0 0 3px rgba(107, 123, 97, 0.2);
    }
    .story-modal .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 6px;
    }
    .story-modal button {
        border: none;
        border-radius: 8px;
        padding: 10px 24px;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.2s;
    }
    .story-modal button[type="submit"] {
        background: var(--primary-green);
        color: #fff;
    }
    .story-modal button[type="submit"]:hover {
        background: #5a6950;
    }
    /* ì·¨ì†Œ ë²„íŠ¼ì€ ì¤‘ìš”ë„ë¥¼ ë‚®ì¶¤ */
    .story-modal button[type="button"] {
        background: #f0f0f0;
        color: #555;
    }
    .story-modal button[type="button"]:hover {
        background: #e0e0e0;
    }
    /* === ê¸€ì“°ê¸° ëª¨ë‹¬ ë””ìì¸ ê°œì„  (ìˆ˜ì • ë° ì¶”ê°€) === */

/* ëª¨ë‹¬ í—¤ë” (ìƒˆë¡œ ì¶”ê°€) */
.story-modal-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-bottom: 24px;
    color: var(--primary-green);
}
.story-modal-header svg {
    /* ì•„ì´ì½˜ ìƒ‰ìƒ ë° í¬ê¸° ì¡°ì ˆ */
    stroke: var(--primary-green);
}
.story-modal h2 {
    margin: 0; /* ê¸°ì¡´ ë§ˆì§„ ì œê±° */
    font-size: 1.7rem; /* ì‚´ì§ ì¡°ì • */
}

/* í…ìŠ¤íŠ¸ ì…ë ¥ ì˜ì—­ */
.story-modal textarea {
    min-height: 150px; /* ìµœì†Œ ë†’ì´ ì‚´ì§ ëŠ˜ë¦¬ê¸° */
    margin-bottom: 8px; /* ì¹´ìš´í„°ì™€ì˜ ê°„ê²© ì¡°ì • */
}

/* ê¸€ì ìˆ˜ ì¹´ìš´í„° (ìƒˆë¡œ ì¶”ê°€) */
.char-counter {
    text-align: right;
    font-size: 0.85rem;
    color: #aaa;
    margin-bottom: 18px;
    padding-right: 5px;
}

/* 'ì˜¬ë¦¬ê¸°' ë²„íŠ¼ì— ë¡œë”© ìƒíƒœë¥¼ ìœ„í•œ ìŠ¤íƒ€ì¼ ì¶”ê°€ */
.story-modal button[type="submit"].loading {
    background: #5a6950;
    cursor: wait; /* ì»¤ì„œë¥¼ ëŒ€ê¸° ëª¨ì–‘ìœ¼ë¡œ */
}
/* ===== ì´ë¯¸ì§€ ===== */
.post-image-wrapper {
    width: 100%;
    max-height: 340px;
    aspect-ratio: 1/1;
    background: #f0f2ee;
    display: flex; justify-content: center; align-items: center;
}
.post-image-wrapper img {
    width: 100%; height: 100%; object-fit: cover; display: block;
}

/* ì´ë¯¸ì§€ê°€ ì—†ëŠ” ê²½ìš°, .post-card-contentì˜ ìƒë‹¨ ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ ìœ ì§€ */
.post-card-content {
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}
/* ì´ë¯¸ì§€ê°€ ìˆëŠ” ê²½ìš°, .post-card-contentì˜ ìƒë‹¨ ëª¨ì„œë¦¬ëŠ” ë‘¥ê¸€ í•„ìš” ì—†ìŒ */
.post-image-wrapper + .post-card-content {
    border-top-left-radius: 0;
    border-top-right-radius: 0;
}
/* íŒŒì¼ ì—…ë¡œë“œ ë²„íŠ¼ ì»¤ìŠ¤í…€ (ìƒˆë¡œ ì¶”ê°€) */
.file-upload-btn {
    display: inline-block;
    padding: 8px 16px;
    background-color: #f0f0f0;
    color: #333;
    border: 1px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 0.9rem;
    margin-bottom: 12px;
}
.file-upload-btn:hover {
    background-color: #e0e0e0;
}
</style>
</head>
<body>

    <header id="main-header">
        <a href="index.html" class="logo">ì‹ì§‘ì‚¬</a>
        <nav>
            <a href="index.html">í™ˆ</a>
            <a href="story.html">ì´ˆë¡ ì´ì•¼ê¸°</a>
            <a href="myPlant.html">ë‚˜ì˜ ì‹ë¬¼</a>
            <a href="findPlant.html">ì‹ë¬¼ ì°¾ê¸°</a>
            <a href="#" class="cta-button">Login</a>
        </nav>
    </header>

        <!-- ====== ì»¤ë®¤ë‹ˆí‹° ë³¸ë¬¸ ====== -->
<div class="story-container">
    <button class="write-btn" id="open-story-modal">+</button>
    <div id="post-feed"></div>
</div>

    <!-- ====== ê¸€ì“°ê¸° ëª¨ë‹¬ ====== -->
<div class="story-modal-wrapper" id="story-modal-wrapper">
    <div class="story-modal">
        <div class="story-modal-header">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/></svg>
            <h2>ì´ˆë¡ ì´ì•¼ê¸° ì“°ê¸°</h2>
        </div>


<form id="story-form">
    <textarea id="story-content" placeholder="ë‹¹ì‹ ì˜ ì´ˆë¡ ì´ì•¼ê¸°ë¥¼ ììœ ë¡­ê²Œ ë‚¨ê²¨ì£¼ì„¸ìš”!" maxlength="2000" required></textarea>
    
    <label for="story-image" class="file-upload-btn">ì´ë¯¸ì§€ ì„ íƒ</label>
    <input type="file" id="story-image" accept="image/*" style="display: none;">
    <div id="image-preview" style="text-align:center;margin-bottom:16px;"></div>
    <div id="char-counter" class="char-counter">0 / 2000</div>
    
    <div class="modal-actions">
        <button type="button" id="close-story-modal">ì·¨ì†Œ</button>
        <button type="submit" id="submit-story-btn">ì˜¬ë¦¬ê¸°</button>
    </div>
</form>
    </div>
</div>


    <div id="modal-wrapper" class="modal-wrapper">
        <div class="modal">
            <div class="modal-left">
                </div>
            <div class="modal-right">
                <button class="close-button">&times;</button>
                <div id="login-form" class="form-container">
                    <div class="form-header">
                        <a href="index.html" class="logo">ì‹ì§‘ì‚¬</a>
                        <h2>Welcome Back</h2>
                    </div>
                    <form>
                        <div class="input-group">
                            <label for="login-email">Email</label>
                            <input type="email" id="login-email" required>
                        </div>
                        <div class="input-group">
                            <label for="login-password">Password</label>
                            <input type="password" id="login-password" required>
                        </div>
                        <button type="submit" class="cta-button">Login</button>
                    </form>
                    <p class="form-switcher">
                        Don't have an account? <a href="#" id="show-signup">Sign Up</a>
                    </p>
                </div>
                <div id="signup-form" class="form-container" style="display: none;">
                    <div class="form-header">
                        <a href="index.html" class="logo">ì‹ì§‘ì‚¬</a>
                        <h2>Create Account</h2>
                    </div>
                    <form>
                        <div class="input-group">
                            <label for="signup-name">Name</label>
                            <input type="text" id="signup-name" required>
                        </div>
                        <div class="input-group">
                            <label for="signup-email">Email</label>
                            <input type="email" id="signup-email" required>
                        </div>
                        <div class="input-group">
                            <label for="signup-password">Password</label>
                            <input type="password" id="signup-password" required>
                        </div>
                        <button type="submit" class="cta-button">Create Account</button>
                    </form>
                    <p class="form-switcher">
                        Already have an account? <a href="#" id="show-login">Login</a>
                    </p>
                </div>
            </div>
        </div>
    </div>


    <script type="module" src="navigation.js"></script>

        <!-- ====== JS: ì´ í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ ====== -->
    <script type="module">

        console.log("ìŠ¤í† ë¦¬ì§€ ê°ì²´:", storage);
    // === Firebase SDK import(ì´ë¯¸ navigation.jsì—ì„œ í–ˆìœ¼ë‹ˆ import ì¬ì‚¬ìš©) ===
// 1. navigation.jsë¡œë¶€í„° auth, db, storage ë³€ìˆ˜ë¥¼ ì§ì ‘ import í•©ë‹ˆë‹¤.
import { auth, db, storage, ref, uploadBytes, getDownloadURL } from './navigation.js'; // SDK ì§ì ‘ import ì œê±°


// 2. Firebase SDKì—ì„œëŠ” í•„ìš”í•œ í•¨ìˆ˜ë“¤ë§Œ import í•©ë‹ˆë‹¤.
import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
import { collection, addDoc, query, orderBy, onSnapshot, serverTimestamp, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";




    // ====== ê¸€ì“°ê¸° ëª¨ë‹¬ ======
    const openBtn = document.getElementById('open-story-modal');
    const modalWrapper = document.getElementById('story-modal-wrapper');
    const closeBtn = document.getElementById('close-story-modal');
    const storyForm = document.getElementById('story-form');
    const storyContent = document.getElementById('story-content');
const charCounter = document.getElementById('char-counter'); // ê¸€ì ìˆ˜ ì¹´ìš´í„°
const submitBtn = document.getElementById('submit-story-btn'); // ì œì¶œ ë²„íŠ¼

const storyImageInput = document.getElementById('story-image');
const imagePreview = document.getElementById('image-preview');

    // ë¡œê·¸ì¸ ìƒíƒœê°€ ì•„ë‹ˆë©´ ê¸€ì“°ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ ë¡œê·¸ì¸ ëª¨ë‹¬ ì˜¤í”ˆ
    let currentUser = null;
    onAuthStateChanged(auth, (user) => {
        currentUser = user;
    });

    openBtn.addEventListener('click', () => {
        if (!currentUser) {
            // navigation.jsì˜ ë¡œê·¸ì¸ ëª¨ë‹¬ ì˜¤í”ˆ íŠ¸ë¦¬ê±°
            document.querySelector('.cta-button').click();
            return;
        }
        storyContent.value = "";
        modalWrapper.classList.add('open');
        setTimeout(() => storyContent.focus(), 250);
    });
    closeBtn.addEventListener('click', () => {
        modalWrapper.classList.remove('open');
    });
    window.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') modalWrapper.classList.remove('open');
    });
    modalWrapper.addEventListener('click', (e) => {
        if (e.target === modalWrapper) modalWrapper.classList.remove('open');
    });

 // 1. ê¸€ì ìˆ˜ ì¹´ìš´í„° ê¸°ëŠ¥ (ìƒˆë¡œ ì¶”ê°€)
storyContent.addEventListener('input', () => {
    const currentLength = storyContent.value.length;
    charCounter.textContent = `${currentLength} / 2000`;
});

// 1. íŒŒì¼ ì„ íƒ ì‹œ ë¯¸ë¦¬ë³´ê¸°
storyImageInput.addEventListener('change', (e) => {
    imagePreview.innerHTML = "";
    const file = e.target.files[0];
    if (!file) return;
    if (!file.type.startsWith('image/')) {
        alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì²¨ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
        storyImageInput.value = "";
        return;
    }
    const reader = new FileReader();
    reader.onload = (ev) => {
        imagePreview.innerHTML = `<img src="${ev.target.result}" style="max-width:220px;max-height:220px;border-radius:9px;box-shadow:0 2px 10px rgba(0,0,0,0.1);">`;
    };
    reader.readAsDataURL(file);
});

// 2. ê¸€ ì‘ì„±(ì œì¶œ) ì‹œ, ì´ë¯¸ì§€ ìˆìœ¼ë©´ Storageì— ì—…ë¡œë“œ â†’ URLì„ Firestoreì— ì €ì¥
storyForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    if (!currentUser) {
        alert("ë¡œê·¸ì¸ í›„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
    }
    const content = storyContent.value.trim();
    if (!content) return;

    submitBtn.disabled = true;
    submitBtn.classList.add('loading');
    submitBtn.textContent = 'ì˜¬ë¦¬ëŠ” ì¤‘...';

    try {
        // ì‘ì„±ì ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
        console.log("1. Firestoreì—ì„œ ìœ ì € ì •ë³´ ê°€ì ¸ì˜¤ê¸°");
        const userDocRef = doc(db, "users", currentUser.uid);
        const userDoc = await getDoc(userDocRef);
        let userName = userDoc.exists() ? userDoc.data().name || "ìµëª…" : "ìµëª…";
        console.log("2. ìœ ì € ì´ë¦„:", userName);

        // ì´ë¯¸ì§€ ì²¨ë¶€
        let imageUrl = null;
        const file = storyImageInput.files[0];
        if (file) {
            console.log("3. íŒŒì¼ ì„ íƒë¨:", file);

            // íŒŒì¼ëª…ì„ ì•ˆì „í•˜ê²Œ ë§Œë“¦
            const ext = file.name.split('.').pop();
            const safeFileName = `${currentUser.uid}_${Date.now()}.${ext}`;
            const storageRef = ref(storage, `storyImages/${safeFileName}`);

            try {
                console.log("4. Storage ì—…ë¡œë“œ ì‹œë„", storageRef);
                const uploadResult = await uploadBytes(storageRef, file);
                console.log("5. Storage ì—…ë¡œë“œ ì„±ê³µ", uploadResult);

                imageUrl = await getDownloadURL(storageRef);
                console.log("6. Storage URL ì–»ìŒ", imageUrl);
            } catch (storageErr) {
                console.error("ğŸš¨ Storage ì—…ë¡œë“œ ì˜¤ë¥˜!", storageErr);
  alert('ì—ëŸ¬: ' + e.message);
  throw e;
            }
        } else {
            console.log("3. íŒŒì¼ ì„ íƒ ì•ˆ ë¨ (ì´ë¯¸ì§€ ì—†ìŒ)");
        }

        // Firestore ì €ì¥
        try {
            console.log("7. Firestoreì— ë¬¸ì„œ ì €ì¥ ì‹œë„");
            await addDoc(collection(db, "stories"), {
                content,
                author: userName,
                uid: currentUser.uid,
                imageUrl: imageUrl || null,
                createdAt: serverTimestamp()
            });
            console.log("8. Firestore ì €ì¥ ì„±ê³µ!");
        } catch (firestoreErr) {
            console.error("ğŸš¨ Firestore ì €ì¥ ì˜¤ë¥˜!", firestoreErr);
            alert("ê¸€ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            throw firestoreErr;
        }

        // ì´ˆê¸°í™”
        modalWrapper.classList.remove('open');
        storyImageInput.value = "";
        imagePreview.innerHTML = "";

    } catch (err) {
        // ìµœì¢… ì—ëŸ¬ í•¸ë“¤ë§
        alert("ê¸€ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        console.error("ğŸš¨ ìµœì¢… ì˜¤ë¥˜!", err);
    } finally {
        submitBtn.disabled = false;
        submitBtn.classList.remove('loading');
        submitBtn.textContent = 'ì˜¬ë¦¬ê¸°';
    }
});


    // ====== ê¸€ ëª©ë¡ ì‹¤ì‹œê°„ í”¼ë“œ ======
// ====== ê¸€ ëª©ë¡ ì‹¤ì‹œê°„ í”¼ë“œ ======
const feed = document.getElementById('post-feed');

// ìƒëŒ€ ì‹œê°„ì„ ê³„ì‚°í•´ì£¼ëŠ” í•¨ìˆ˜ (ìƒˆë¡œ ì¶”ê°€)
function timeForToday(value) {
    const today = new Date();
    const timeValue = new Date(value);

    const betweenTime = Math.floor((today.getTime() - timeValue.getTime()) / 1000 / 60);
    if (betweenTime < 1) return 'ë°©ê¸ˆ ì „';
    if (betweenTime < 60) {
        return `${betweenTime}ë¶„ ì „`;
    }

    const betweenTimeHour = Math.floor(betweenTime / 60);
    if (betweenTimeHour < 24) {
        return `${betweenTimeHour}ì‹œê°„ ì „`;
    }

    const betweenTimeDay = Math.floor(betweenTime / 60 / 24);
    if (betweenTimeDay < 365) {
        return `${betweenTimeDay}ì¼ ì „`;
    }

    return `${Math.floor(betweenTimeDay / 365)}ë…„ ì „`;
}


const q = query(collection(db, "stories"), orderBy("createdAt", "desc"));
onSnapshot(q, (snap) => {
    feed.innerHTML = "";
    snap.forEach(doc => {
    const d = doc.data();
    const authorName = d.author ?? "ìµëª…";
    let dateStr = d.createdAt ? timeForToday(d.createdAt.toDate()) : "-";
    
    // â¬‡ï¸ ì´ ë¶€ë¶„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤.
    // ì´ë¯¸ì§€ HTMLì„ ì¹´ë“œ ìµœìƒë‹¨ì— ìœ„ì¹˜ì‹œí‚¬ ì¤€ë¹„
    const imageHtml = d.imageUrl 
        ? `<div class="post-image-wrapper">
               <img src="${d.imageUrl}" alt="ê²Œì‹œë¬¼ ì´ë¯¸ì§€">
           </div>` 
        : "";

    feed.innerHTML += `
        <div class="post-card">
            ${imageHtml} <div class="post-card-content">
                <div class="post-header">
                    <div class="post-author-avatar">${authorName.charAt(0)}</div>
                    <div class="post-author-info">
                        <span class="post-author">${authorName}</span>
                        <span class="post-date">${dateStr}</span>
                    </div>
                </div>
                <div class="post-content">${d.content.replace(/\n/g, "<br>")}</div>
            </div>
        </div>
    `;
});
    if (snap.empty) {
        feed.innerHTML = `<div style="color:#888;padding:30px;text-align:center;">ì•„ì§ ì‘ì„±ëœ ì´ì•¼ê¸°ê°€ ì—†ì–´ìš”. ì²« ë²ˆì§¸ ì´ì•¼ê¸°ë¥¼ ë‚¨ê²¨ì£¼ì„¸ìš”!</div>`;
    }
});

    </script>
</body>
</html>