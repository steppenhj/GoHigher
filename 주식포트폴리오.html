<!DOCTYPE html>
<html lang="ko" class="no-js">
<head>
  <script>
    document.documentElement.classList.remove("no-js");
    document.documentElement.classList.add("js");
  </script>
  
  <meta charset="UTF-8">
  <!-- ğŸ”„ ì™¸ë¶€ ì„œë²„ ì—°ê²° ë¯¸ë¦¬ í•˜ê¸° -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

<!-- â±ï¸ ê¼­ ì“¸ ë¦¬ì†ŒìŠ¤ ë¯¸ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸° -->
<link rel="preload" as="style" href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Open+Sans:400,600&display=swap">
<link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/chart.js">
<link rel="preload" as="script" href="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0">

  <!-- í˜ì´ì§€ ì œëª©(Title)ì— ì‚¬ì´íŠ¸ëª… + í˜ì´ì§€ ëª…ì‹œ -->
  <title>ë‹¤ì´ì–´ë¦¬Â·í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„Â·ê°€ê³„ë¶€Â·íˆ¬ìì¼ì§€Â·ë‹¬ë ¥Â·ë¦¬ë°¸ëŸ°ì‹±ë„êµ¬ ë¬´ë£Œ ì œê³µ</title>
  <meta name="description" content="ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤Â·íˆ¬ì ì¼ì§€Â·ë‹¬ë ¥Â·ê°€ê³„ë¶€ ê¸°ëŠ¥ ë“±ì„ ì œê³µí•˜ëŠ” ìì‚° ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ì…ë‹ˆë‹¤. Go Higherì—ì„œ ê°„í¸í•˜ê²Œ í¬íŠ¸í´ë¦¬ì˜¤Â·ì¼ì •ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”.">
  <link rel="canonical" href="https://gohigher.kr/ì£¼ì‹í¬íŠ¸í´ë¦¬ì˜¤.html">
  <link rel="icon" href="https://gohigher.kr/logo.jpg" type="image/jpeg">
  <meta name="keywords" content="í¬íŠ¸í´ë¦¬ì˜¤, ë‹¤ì´ì–´ë¦¬, ìì‚°ê´€ë¦¬, íˆ¬ìì¼ì§€, ê°€ê³„ë¶€, gohigher">
  <meta name="robots" content="index,follow">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="naver-site-verification" content="daa71973aba155bc2d96dfde44d8fb34b6a74ba7" />
  <meta name="google-site-verification" content="GGuWsc5cbeYC9W0nQsN7550kWcUzArKuo3zfhjN5LXE" />

  <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Open+Sans:400,600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <!-- [ì¶”ê°€] Font Awesome ì•„ì´ì½˜ CDN -->
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
    integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />  

  <meta property="og:title" content="ë‹¤ì´ì–´ë¦¬Â·í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„Â·ê°€ê³„ë¶€Â·íˆ¬ìì¼ì§€Â·ë‹¬ë ¥Â·ë¦¬ë°¸ëŸ°ì‹±ë„êµ¬ ë¬´ë£Œ ì œê³µ" />
  <meta property="og:description" content="ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤Â·íˆ¬ì ì¼ì§€Â·ë‹¬ë ¥Â·ê°€ê³„ë¶€ ê¸°ëŠ¥ ë“±ì„ ì œê³µí•˜ëŠ” ìì‚° ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ì…ë‹ˆë‹¤. Go Higherì—ì„œ ê°„í¸í•˜ê²Œ í¬íŠ¸í´ë¦¬ì˜¤Â·ì¼ì •ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”." />
  <meta property="og:image" content="https://gohigher.kr/logo.jpg" />
  <meta property="og:url" content="https://gohigher.kr/ì£¼ì‹í¬íŠ¸í´ë¦¬ì˜¤.html" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="ko_KR" />

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="ë‹¤ì´ì–´ë¦¬Â·í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„Â·ê°€ê³„ë¶€Â·íˆ¬ìì¼ì§€Â·ë‹¬ë ¥Â·ë¦¬ë°¸ëŸ°ì‹±ë„êµ¬ ë¬´ë£Œ ì œê³µ">
  <meta name="twitter:description" content="ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤Â·íˆ¬ì ì¼ì§€Â·ë‹¬ë ¥Â·ê°€ê³„ë¶€ ê¸°ëŠ¥ ë“±ì„ ì œê³µí•˜ëŠ” ìì‚° ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ì…ë‹ˆë‹¤. Go Higherì—ì„œ ê°„í¸í•˜ê²Œ í¬íŠ¸í´ë¦¬ì˜¤Â·ì¼ì •ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”.">
  <meta name="twitter:image" content="https://gohigher.kr/logo.jpg">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "ë‹¤ì´ì–´ë¦¬Â·í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„Â·ê°€ê³„ë¶€Â·íˆ¬ìì¼ì§€Â·ë‹¬ë ¥Â·ë¦¬ë°¸ëŸ°ì‹±ë„êµ¬ ë¬´ë£Œ ì œê³µ",
    "url": "https://gohigher.kr/ì£¼ì‹í¬íŠ¸í´ë¦¬ì˜¤.html",
    "description": "ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤Â·íˆ¬ì ì¼ì§€Â·ë‹¬ë ¥Â·ê°€ê³„ë¶€ ê¸°ëŠ¥ ë“±ì„ ì œê³µí•˜ëŠ” ìì‚° ë‹¤ì´ì–´ë¦¬ í˜ì´ì§€ì…ë‹ˆë‹¤. Go Higherì—ì„œ ê°„í¸í•˜ê²Œ í¬íŠ¸í´ë¦¬ì˜¤Â·ì¼ì •ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”.",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Go Higher",
      "url": "https://gohigher.kr"
    }
  }
  </script>

  <style>
    html.no-js body {
  opacity: 1; /* JS ì•ˆ ë˜ë”ë¼ë„ ë°”ë¡œ ë³´ì—¬ì¤Œ */
}

html.js body {
  opacity: 0;
  animation: fadeIn 0.4s ease-in-out forwards;
}

@keyframes fadeIn {
  to {
    opacity: 1;
  }
}

    html {
      font-size: 16px;
    }
    /* ê¸°ë³¸ CSS ë³€ìˆ˜ */
    :root {
      --primary-color: #004080;
      --secondary-color: #0059b3;
      --accent-color: #f4f7fa;
      --light-gray: #e0e0e0;
      --text-color: #333;
    }
    body.dark-mode {
        background: url(backgroundD.png);
        color: white;
    }
    body.dark-mode header {
        background: linear-gradient(135deg, #002b57, #004284);
        color: #cacaca;
    }
    body.dark-mode nav ul li a {
        color: #cacaca;
        border: 1px solid #cacaca;
        background-color: transparent;
    }
    body.dark-mode nav ul li a:hover {
        background-color: #004284;
        color: #cacaca;
    }
    body.dark-mode footer{
        background: linear-gradient(135deg, #002b57, #004284);
        color:#cacaca;
    }
    body.dark-mode .save-notice{
        background: #555555;
        color: #cacaca;
    }
    body.dark-mode main h2{
        color: #66b3ff;
    }
    body.dark-mode .section-container {
        background: #555 !important;
        color: #cacaca !important;
    }
    body.dark-mode .recommendation {
        background: #666 !important;
        color: #cacaca !important;
    }
    body.dark-mode .modal-content {
        background: #555 !important;
        color: #cacaca !important;
    }
    body.dark-mode #memoModal .modal-content textarea {
      background: #555 !important;
      color: #fff !important;
      border: 1px solid #777 !important;
    }
    body.dark-mode #calendarModal .modal-content,
    body.dark-mode #calendarModal .modal-content * {
      color: #fff !important;
    }
    body.dark-mode #calendarModal .modal-content textarea::placeholder {
      color: #fff !important;
    }
    body.dark-mode #accountBookModal .modal-content {
      background: #333 !important;
      color: #fff !important;
      box-shadow: none;
    }
    body.dark-mode #accountBookModal .account-book-form input,
    body.dark-mode #accountBookModal .account-book-form select,
    body.dark-mode #accountBookModal .account-book-form button {
      background: #444 !important;
      color: #fff !important;
      border: 1px solid #666 !important;
    }
    body.dark-mode #accountBookModal .account-book-entries th,
    body.dark-mode #accountBookModal .account-book-entries td {
      border: 1px solid #666 !important;
      color: #fff !important;
      background: #333;
    }
    body.dark-mode #accountBookModal .fixed-expense-calculator {
      background: #333 !important;
      color: #fff !important;
      border-top: 1px solid #666 !important;
    }
    body.dark-mode #accountBookModal .modal-content button {
      background: #444 !important;
      color: #fff !important;
      border: 1px solid #666 !important;
    }
    body.dark-mode #memoModal .modal-content,
    body.dark-mode #memoModal .modal-content * {
      color: #fff !important;
    }
    body.dark-mode #memoModal .modal-content textarea {
      background: #555 !important;
      color: #fff !important;
      border: 1px solid #777 !important;
    }
    body.dark-mode #memoModal .modal-content textarea::placeholder {
      color: #fff !important;
    }
    body.dark-mode #goalManagementModal .modal-content {
      background: #333 !important;
      color: #fff !important;
    }
    body.dark-mode #goalManagementModal .todo-form input[type="text"],
    body.dark-mode #goalManagementModal .todo-form button {
      background: #444 !important;
      color: #fff !important;
      border: 1px solid #666 !important;
    }
    body.dark-mode #goalManagementModal .todo-list .todo-item {
      background: #444 !important;
      border: 1px solid #666 !important;
      color: #fff !important;
    }
    body.dark-mode #goalManagementModal .todo-item button.delete-btn {
      background: #444 !important;
      color: #fff !important;
      border: 1px solid #666 !important;
    }
    body.dark-mode .modal-close-btn {
      border-color: #cacaca;
      color: #cacaca;
    }
    body.dark-mode .modal-close-btn:hover {
      background: #cacaca;
      color: #333;
    }
    body.dark-mode .right-chart.card {
      background: #555 !important;
      color: #cacaca !important;
    }
    html { font-size: 16px; }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Open Sans', sans-serif;
      background: url(backgroundL.png);
      color: var(--text-color);
      padding-bottom: 60px;
      transition: background 0.3s, color 0.3s;
      position: relative;
    }

    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
      position: relative;
    }
    header h1 { font-family: 'Roboto', sans-serif; font-size: 2rem; margin-bottom: 1.5rem; }
    header p { font-size: 1rem; }
    nav { margin-top: 0.5rem; }
    nav ul { list-style: none; display: flex; justify-content: center; gap: 1rem; }
    nav ul li a {
      display: inline-block; padding: 0.5rem 1rem; background-color: #fff;
      color: var(--primary-color); border: 1px solid var(--primary-color); border-radius: 4px;
      text-decoration: none; transition: background-color 0.3s, color 0.3s;
    }
    nav ul li a:hover { background-color: var(--primary-color); color: #fff; }
    main { max-width: 960px; margin: 1rem auto; padding: 0 1rem; }
    .save-notice {
      background: #fff; color: #444; font-size: 0.9rem; padding: 0.6rem 1rem; margin-bottom: 0.5rem;
      border-left: 4px solid var(--primary-color); box-shadow: 0 1px 4px rgba(0,0,0,0.1); line-height: 1.4;
    }
    h2 { font-size: 1.8rem; color: var(--primary-color); margin-bottom: 1rem; text-align: center; }
    .recommendation {
      background: var(--light-gray); padding: 1rem; border-radius: 8px; margin-top: 1rem;
      text-align: center; font-size: 0.8rem;
    }
    .section-container {
      background: #fff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      padding: 1rem; width: 100%; margin-bottom: 1rem;
    }
    .section-header {
      display: flex; justify-content: space-between; align-items: center;
    }
    .modal {
      display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
      overflow: auto; background-color: rgba(0,0,0,0.4);
    }
    .modal.active { display: block; }
    .modal-content {
      position: relative;
      background-color: #fff;
      margin: 5% auto;
      padding: 20px;
      border-radius: 8px;
      width: 90%;
      max-width: 900px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    .modal-content h3 { margin-top: 0; }
    .modal-close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 32px;
      height: 32px;
      border: 2px solid #333;
      border-radius: 50%;
      background: transparent;
      color: #333;
      cursor: pointer;
      font-size: 1.2rem;
      line-height: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s, color 0.2s;
      z-index: 9999;
    }
    .modal-close-btn::before {
      content: "Ã—";
    }
    .modal-close-btn:hover {
      background: #333;
      color: #fff;
    }
    .primary-btn, .secondary-btn {
      padding: 0.5rem 1rem; border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem;
      transition: background 0.3s;
    }
    .primary-btn { background: var(--primary-color); color: #fff; }
    .primary-btn:hover { background: #003060; }
    .secondary-btn { background: var(--secondary-color); color: #fff; }
    .secondary-btn:hover { background: #004080; }
    .asset-item {
      display: flex; align-items: left; gap: 0.5rem; margin-bottom: 0.5rem;
    }
    .asset-item input[type="text"],
    .asset-item input[type="number"] {
      padding: 0.3rem; border: 1px solid #ccc; border-radius: 4px; text-align: center;
      font-size: 0.9rem; width: 100px;
    }
    .asset-item button {
      padding: 0.3rem 0.6rem; background: #b30000; color: #fff;
      border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;
    }
    .asset-item button:hover { background: #800000; }
    .stock-item {
      display: flex; align-items: left; gap: 0.5rem; margin-bottom: 0.5rem;
    }
    .stock-item input[type="text"],
    .stock-item input[type="number"] {
      padding: 0.3rem; border: 1px solid #ccc; border-radius: 4px; text-align: center;
      font-size: 0.9rem; width: 100px;
    }
    .stock-item button {
      padding: 0.3rem 0.6rem; background: #b30000; color: #fff; border: none; border-radius: 4px;
      cursor: pointer; font-size: 0.8rem;
    }
    .stock-item button:hover { background: #800000; }
    .portfolio-form {
      display: flex; flex-wrap: wrap; align-items: center; gap: 0.5rem; margin-bottom: 1rem;
    }
    .portfolio-form button {
      padding: 0.3rem 0.6rem; background: var(--primary-color); color: #fff;
      border: none; border-radius: 4px; cursor: pointer; font-size: 0.9rem; transition: background 0.3s;
    }
    .portfolio-form button:hover { background: #003060; }
    .chart-container { margin: 0; }
    canvas { width: 100%; height: 300px; }
    .chart-btn-group { text-align: center; margin-top: 15px; }
    .chart-btn-group button { margin: 0 5px; }
    .portfolio-section-content {
      display: flex; justify-content: space-between; align-items: flex-start; gap: 1rem; margin-top: 1rem;
    }
    .left-content { flex: 1; }
    .right-chart { flex: 1; display: flex; flex-direction: column; align-items: center; }
    .right-chart.card {
      background: #f9f9f9; border-radius: 8px; padding: 1rem;
      box-shadow: inset 0 0 8px rgba(0, 0, 0, 0.05); width: 100%;
    }
    .asset-goal-form { margin-top: 1rem; margin-bottom: 1rem; display: flex; gap: 10px; }
    #assetGoalDisplay { margin-top: 10px; }
    .progress-bar {
      width: 100%; background-color: #e0e0e0; border-radius: 4px;
      overflow: hidden; margin-top: 0.5rem;
    }
    .progress {
      height: 20px; background-color: var(--primary-color);
      width: 0%; transition: width 0.5s; text-align: center; color: #fff;
      line-height: 20px; font-size: 0.9rem;
    }
    .diary-entry {
  border-top: 1px solid #ddd;
  padding: 0.5rem 0;
  font-size: 0.9rem;

  /* ê¸°ì¡´ ì½”ë“œ: display: flex; align-items: center; */
  /* ì•„ë˜ì²˜ëŸ¼ ë³€ê²½í•´ì„œ ìœ„ì•„ë˜ë¡œ ìŒ“ì´ë„ë¡ í•¨ */
  display: flex;
  flex-direction: column; /* ì„¸ë¡œ ë°°ì¹˜ */
  align-items: flex-start; /* ê°€ë¡œ ì •ë ¬ ì™¼ìª½ */
}

    .diary-entry time { font-weight: bold; margin-right: 0.5rem; }
    .diary-entry .diary-text { flex: 1; margin: 0 8px; }
    .diary-entry-header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
  margin-bottom: 5px;
}

@media (max-width: 768px) {
  .diary-entry-header {
    /* ì„¸ë¡œ ë°°ì¹˜ ëŒ€ì‹  ê°€ë¡œ(row) ë°°ì¹˜ë¡œ ë³€ê²½ */
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
  }
  .diary-entry-header time,
  .diary-entry-header button {
    margin-bottom: 0;
  }
  /* í•„ìš”ì— ë”°ë¼ í—¤ë”ì™€ í…ìŠ¤íŠ¸ ì‚¬ì´ì— ê°„ê²© ì¶”ê°€ */
  .diary-text {
    margin-top: 8px;
  }
}


    .investment-diary button.edit-btn,
    .investment-diary button.delete-btn {
      padding: 0.3rem 0.6rem; background: #b30000; color: #fff;
      border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;
      margin-left: 0.5rem;
    }
    .investment-diary button.edit-btn:hover,
    .investment-diary button.delete-btn:hover { background: #800000; }
    .calendar-navigation { display: flex; justify-content: center; align-items: center; gap: 1rem; margin-bottom: 1rem; }
    #calendar {
      display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; margin-top: 0.5rem;
    }
    .calendar-day {
      padding: 8px; border: 1px solid #ccc; cursor: pointer; height: 70px; overflow: hidden;position: relative;
    }
    .calendar-day:hover { background-color: #f4f7fa; }
    .calendar-day .day-number { font-weight: bold; }
    .calendar-day .memo-text {
      display: block; margin-top: 4px; font-size: 0.75rem; color: var(--secondary-color);
      word-break: break-word;
    }
    .calendar-day.has-memo { border: 2px solid var(--secondary-color); }
    .account-book-form {
      display: flex; flex-wrap: wrap; gap: 1rem; align-items: flex-end; margin-bottom: 1rem;
    }
    .account-book-form input,
    .account-book-form select,
    .account-book-form button {
      padding: 0.4rem; border: 1px solid #ccc; border-radius: 4px; font-size: 0.9rem;
    }
    .account-book-form button {
      background: var(--primary-color); color: #fff; border: none; cursor: pointer;
      transition: background 0.3s;
    }
    .account-book-form button:hover { background: #003060; }
    .account-book-entries table {
      width: 100%; border-collapse: collapse; font-size: 0.9rem;
    }
    .account-book-entries th,
    .account-book-entries td {
      padding: 0.6rem; border: 1px solid #ddd; text-align: left;
    }
    .account-book-entries tr:nth-child(odd) { background: #f9f9f9; }
    .account-book-entries button.delete-entry {
      padding: 0.2rem 0.5rem; background: #b30000; color: #fff;
      border: none; border-radius: 4px; cursor: pointer; font-size: 0.8rem;
    }
    .account-book-entries button.delete-entry:hover { background: #800000; }
    .todo-form {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 1rem;
    }
    .todo-form input[type="text"] {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    .todo-form button {
      padding: 10px 15px;
      background-color: var(--primary-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    .todo-form button:hover {
      background-color: #003060;
    }
    .asset-goal-form input[type="text"] {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }
    .asset-goal-form button {
      padding: 10px 15px;
      background-color: var(--primary-color);
      color: #fff;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s;
    }
    .asset-goal-form button:hover {
      background-color: #003060;
    }
    body.dark-mode .login-btn {
        background-color: transparent;
        color: #cacaca;
        border: 1px solid #cacaca;
    }
    body.dark-mode .login-btn:hover {
        background-color: #004284;
        color: #cacaca;
    }
    body.dark-mode .modal-content input,
    body.dark-mode .modal-content textarea,
    body.dark-mode .modal-content select {
      background-color: #555 !important;
      color: #fff !important;
      border: 1px solid #777 !important;
    }
    body.dark-mode .modal-content input::placeholder,
    body.dark-mode .modal-content textarea::placeholder {
      color: #ccc !important;
    }
    body.dark-mode .bottom-nav {
      background: #333;
    }
    body.dark-mode .bottom-nav .icon {
      background-color: #555;
      color: #cacaca;
    }
    body.dark-mode .bottom-nav .nav-text {
      color: #cacaca;
    }
    body.dark-mode .bottom-nav li a.nav-link.active .icon {
      background-color: var(--primary-color);
      color: #fff;
    }
    body.dark-mode .bottom-nav li a.nav-link.active .nav-text {
      color: #fff;
    }
    .login-container {
        position: absolute;
        top: 1rem;
        right: 1rem;
        display: flex;
        align-items: center;
        gap: 0.8rem;
      }
      .login-btn {
        background-color: #fff;
        color: var(--primary-color);
        border: none;
        padding: 0.6rem 1.2rem;
        border-radius: 20px;
        font-weight: bold;
        text-decoration: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
        /* margin-left: auto; ë¥¼ ì‚¬ìš©í•˜ë©´ í™˜ì˜ ë©”ì‹œì§€ ë‹¤ìŒì— ë²„íŠ¼ì´ ì˜¤ë¥¸ìª½ ëì— ìœ„ì¹˜í•©ë‹ˆë‹¤. */
        margin-left: auto;
      }

      .login-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        background-color: var(--secondary-color);
        color: #fff;
      }
    .desktop-nav {
      display: block;
    }
    .bottom-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      padding: 0.3rem 0;
      background: #fff;
      box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.1);
      z-index: 1000;
    }
    .bottom-nav ul {
      display: flex;
      justify-content: space-around;
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .bottom-nav li {
      text-align: center;
      flex: 1;
    }
    .bottom-nav li a.nav-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      color: #888;
      transition: transform 0.2s, color 0.2s;
    }
    .bottom-nav .icon {
      width: 28px;
      height: 28px;
      display: inline-block;
      background-color: transparent;
      border: none;
      border-radius: 0;
      background-repeat: no-repeat;
      background-size: contain;
      background-position: center;
      margin-bottom: 3px;
      transition: background-color 0.3s, color 0.3s;
    }
    .bottom-nav .nav-text {
      font-size: 0.75rem;
      color: #888;
    }
    .bottom-nav li a.nav-link.active .nav-text {
      color: var(--primary-color);
    }
    .bottom-nav li a.nav-link:hover {
      transform: scale(1.05);
    }
    .bottom-nav li a.nav-link {
      -webkit-tap-highlight-color: transparent;
      outline: none;
      border: none;
      box-shadow: none;
    }
    .bottom-nav li a.nav-link:focus,
    .bottom-nav li a.nav-link:active,
    .bottom-nav li a.nav-link:focus-visible {
      outline: none !important;
      box-shadow: none !important;
      border: none !important;
      background: transparent !important;
    }
    .news-icon {
      background-image: url("images/newsImage.webp");
    }
    .nav-link.active .news-icon {
      background-image: url("images/newsOn.webp");
    }
    .diary-icon {
      background-image: url("images/diaryImage.webp");
    }
    .nav-link.active .diary-icon {
      background-image: url("images/diaryOn.webp");
    }
    .chart-icon {
      background-image: url("images/chartImage.webp");
    }
    .nav-link.active .chart-icon {
      background-image: url("images/chartOn.webp");
    }
    .company-icon {
      background-image: url("images/companyImage.webp");
    }
    .nav-link.active .company-icon {
      background-image: url("images/companyOn.webp");
    }
    .coinTree-icon {
        background-image: url("images/coinTree.webp");
      }
      .nav-link.active .coinTree-icon {
        background-image: url("images/treeOn.webp");
      }
      .bull-icon {
        background-image: url("images/bullImage.webp");
      }
      .nav-link.active .bull-icon {
        background-image: url("images/bullOn.webp");
      }
    .nav-link.pressed {
      background-color: rgba(0, 0, 255, 0.1);
      transition: background-color 0.1s;
    }
    @media (max-width: 768px) {
      body { font-size: 18px; }
      .section-container { width: 100%; }
      .portfolio-section-content { flex-wrap: wrap; }
      main { padding: 0 0.5rem; }
      .portfolio-section-content { flex-direction: column; align-items: center; }
      .chart-container canvas { width: 100% !important; height: auto !important; }
      .calendar-navigation { flex-direction: column; gap: 0.5rem; text-align: center; }
      .account-book-form,
      .modal-content { width: 90% !important; margin: 10% auto !important; padding: 1rem !important; }
      #assetPortfolioModal .portfolio-section-content,
      #stockPortfolioModal .portfolio-section-content { flex-direction: column !important; }
      #assetPortfolioModal .left-content,
      #assetPortfolioModal .right-chart,
      #stockPortfolioModal .left-content,
      #stockPortfolioModal .right-chart { width: 100%; margin-bottom: 1rem; }
      #assetPortfolioModal .chart-container canvas,
      #stockPortfolioModal .chart-container canvas { width: 100% !important; height: auto !important; }
      #investmentDiaryModal textarea { min-height: 200px; font-size: 1rem; }
      #accountBookModal .account-book-form { flex-direction: column !important; align-items: stretch; }
      #accountBookModal .account-book-form input,
      #accountBookModal .account-book-form select,
      #accountBookModal .account-book-form button { width: 100%; }
      .login-container {
          position: absolute;
          top: 1rem;
          right: 1rem;
          display: flex;
          align-items: center;
          gap: 0.5rem; /* í”„ë¡œí•„ê³¼ ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
        }

        #profileBox {
          display: flex;
          align-items: center;
          cursor: pointer;
          background: transparent !important;  /* ë°°ê²½ íˆ¬ëª…í™” */
          border: none !important;             /* í…Œë‘ë¦¬ ì œê±° */
          box-shadow: none !important;         /* ê·¸ë¦¼ì ì œê±° */
          padding: 0 !important;               /* ë‚´ë¶€ ì—¬ë°± ì œê±° */
        }

        #profileAvatar {
          width: 36px;
          height: 36px;
          border-radius: 50%;
          object-fit: cover;
          border: 2px solid white;
          transition: transform 0.2s;
        }

        /* í”„ë¡œí•„ ì‚¬ì§„ í´ë¦­ ì‹œ í™•ëŒ€ íš¨ê³¼ */
        #profileAvatar:hover {
          transform: scale(1.1);
        }

        #welcomeText {
          display: none; /* í™˜ì˜ ë¬¸êµ¬ ìˆ¨ê¹€ */
        }

        .login-btn {
          display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ìˆ¨ê¹€ */
          padding: 0.3rem 0.8rem;
          font-size: 0.75rem;
          white-space: nowrap;
        }

        /* í”„ë¡œí•„ ì‚¬ì§„ í´ë¦­ ì‹œ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ë‚˜íƒ€ë‚˜ê¸° */
        .login-container.active .login-btn {
          display: inline-block;
        }
        /* ëª¨ë°”ì¼ì—ì„œ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìƒíƒœë©´ í”„ë¡œí•„ ë°•ìŠ¤ë¥¼ ìˆ¨ê¸°ê³  ë¡œê·¸ì¸ ë²„íŠ¼ í‘œì‹œ */
  .login-container:not(.logged-in) #profileBox {
    display: none;
  }
  .login-container:not(.logged-in) .login-btn {
    display: inline-block;
  }

  /* ëª¨ë°”ì¼ì—ì„œ ë¡œê·¸ì¸í•œ ìƒíƒœë©´ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ìˆ¨ê¸°ê³  í”„ë¡œí•„ ë°•ìŠ¤ë¥¼ í‘œì‹œ */
  .login-container.logged-in .login-btn {
    display: none;
  }
  .login-container.logged-in #profileBox {
    display: flex;
  }
  .bottom-nav ul {
    flex-wrap: nowrap;  /* í•œ ì¤„ ìœ ì§€ */
  }
  nav ul li a {
    white-space: nowrap;
  }
    }
    footer {
      background-color: var(--primary-color);
      color: #fff;
      text-align: center;
      padding: 0.8rem;
      bottom: 0;
      width: 100%;
      font-size: 1rem;
      box-shadow: 0 -2px 6px rgba(0,0,0,0.3);
    }
    footer p {
      margin: 0;
      padding: 0;
    }
    .tab-container { margin-top: 1rem; }
    .tab-links { display: flex; gap: 0.5rem; margin-bottom: 1rem; }
    .tab-link {
      padding: 0.5rem 1rem; border: 1px solid var(--primary-color);
      background-color: #fff; color: var(--primary-color);
      border-radius: 4px; cursor: pointer;
    }
    .tab-link.active { background-color: var(--primary-color); color: #fff; }
    .tab-content { border: 1px solid var(--light-gray); padding: 1rem; border-radius: 4px; }
    /* ë¦¬ë°¸ëŸ°ì‹± ê²°ê³¼ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .rebalance-card {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 8px;
      background-color: #f9f9f9;
    }
    .rebalance-card.buy {
      border-left: 5px solid green;
      background-color: #e6ffe6;
    }
    .rebalance-card.sell {
      border-left: 5px solid red;
      background-color: #ffe6e6;
    }
    /* ë‹¤í¬ ëª¨ë“œì—ì„œ ë¦¬ë°¸ëŸ°ì‹± ì¹´ë“œì˜ ê¸€ììƒ‰ê³¼ ë°°ê²½ìƒ‰ */
body.dark-mode .rebalance-card {
  color: #fff !important; /* í°ìƒ‰ ê¸€ì */
}

/* ë§¤ìˆ˜(buy) ì¹´ë“œ */
body.dark-mode .rebalance-card.buy {
  background-color: #1a3321 !important; /* ì–´ë‘ìš´ ì´ˆë¡ìƒ‰ */
  border-left: 5px solid #4caf50 !important; /* ì ë‹¹í•œ ì´ˆë¡ìƒ‰ ë¼ì¸ */
}

/* ë§¤ë„(sell) ì¹´ë“œ */
body.dark-mode .rebalance-card.sell {
  background-color: #331a1a !important; /* ì–´ë‘ìš´ ë¹¨ê°„ìƒ‰ */
  border-left: 5px solid #f44336 !important; /* ì ë‹¹í•œ ë¹¨ê°„ìƒ‰ ë¼ì¸ */
}

    #profileBox {
  display: flex;
  align-items: center;
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.2); /* ì•½ê°„ íˆ¬ëª…í•œ í°ìƒ‰ ë°°ê²½ */
  backdrop-filter: blur(6px);          /* ë°°ê²½ ë¸”ëŸ¬ íš¨ê³¼ (ê¸€ë¼ìŠ¤ëª¨í”¼ì¦˜) */
  transition: background 0.3s ease;
}

#profileBox:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ì•„ë°”íƒ€ ì´ë¯¸ì§€: ì›í˜•, í…Œë‘ë¦¬ íš¨ê³¼ */
#profileAvatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #fff;
  margin-right: 0.5rem;
}

/* í™˜ì˜ ë¬¸êµ¬ í…ìŠ¤íŠ¸ */
#welcomeText {
  font-size: 0.9rem;
  font-weight: 500;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.4);
}
html, body {
        height: 100%;
      }
@media (max-width: 768px) {
  body {
    font-size: 18px;
    /* ì½˜í…ì¸ ê°€ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ì— ê°€ë¦¬ì§€ ì•Šë„ë¡ ë°”ë‹¥ ì—¬ë°± ì¶”ê°€ */
    padding-bottom: 70px;
  }
  aside.sidebar {
    display: none;
  }
  .layout-container {
    flex-direction: column;
    padding: 0 0.5rem;
  }
  .flex-container {
    flex-direction: column;
  }
  .half-section {
    width: 100% !important;
  }
  .layout-container {
    padding: 0;
  }
  .main-content,
  .news-section,
  .half-section,
  .full-section {
    padding: 0.5rem;
  }
  .news-section {
    margin: 1rem 0;
  }
  .desktop-nav {
    display: none;
  }
  .bottom-nav {
    display: block; /* í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ í‘œì‹œ */
  }
  .bottom-nav {
  width: 100vw;
  max-width: 100vw;
  overflow-x: hidden;
}
.bottom-nav li {
  flex: 1 1 0;
  min-width: 0;
}
.bottom-nav li a.nav-link {
  width: 100%;
  font-size: 3.2vw;
}
.bottom-nav .icon {
  width: 6.5vw;
  height: 6.5vw;
}
.bottom-nav .nav-text {
  font-size: 2.8vw;
}
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}
footer {
    display: none !important;
  }
}
/* To Do List Modal Styles */
#goalManagementModal .todo-list {
  list-style: none;
  padding: 0;
  margin-top: 1rem;
}
#goalManagementModal .todo-item {
  display: flex;
  align-items: center;
  padding: 0.5rem;
  margin-bottom: 0.5rem;
  background-color: #f0f0f0;
  border-radius: 4px;
  transition: background-color 0.3s;
}
#goalManagementModal .todo-item:hover {
  background-color: #e0e0e0;
}
#goalManagementModal .todo-checkbox {
  margin-right: 0.5rem;
}
#goalManagementModal .todo-text {
  flex-grow: 1;
  cursor: pointer;
  outline: none;
}
#goalManagementModal .delete-btn {
  background-color: #b30000;
  color: #fff;
  border: none;
  border-radius: 4px;
  padding: 0.3rem 0.6rem;
  cursor: pointer;
  transition: background-color 0.3s;
}
#goalManagementModal .delete-btn:hover {
  background-color: #800000;
}
.login-container:not(.logged-in) #profileBox {
  display: none;
}

          /* Back to Top ë²„íŠ¼ (íŒ”ë€í‹°ì–´ ìŠ¤íƒ€ì¼ì˜ ë¯¸ë‹ˆë©€ í„°ì¹˜) */
          .back-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      padding: 0.5rem 0.8rem;
      font-size: 0.9rem;
      background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
      color: #fff;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
      z-index: 1001;
    }
    .back-to-top.show {
      opacity: 1;
      visibility: visible;
    }
    @media (max-width: 768px) {
  .back-to-top {
    bottom: 80px ; /* ê¸°ì¡´ 20pxì—ì„œ ìœ„ë¡œ ì˜¬ë¦¼ */
  }
  footer {
    padding-bottom: 25px !important; /* í•˜ë‹¨ nav ë†’ì´ë§Œí¼ ì—¬ë°± ì¶”ê°€ */
    padding: 0.8rem !important;
  }
}
    .bottom-nav li a.nav-link:hover,
    .bottom-nav li a.nav-link:active,
    .bottom-nav li a.nav-link:focus,
    .bottom-nav li a.nav-link:focus-visible {
      background: transparent !important;
      color: inherit !important;
      box-shadow: none !important;
      outline: none !important;
    }
body.dark-mode .bottom-nav .icon,
body.dark-mode .bottom-nav li a.nav-link.active .icon {
  background-color: transparent !important;
  box-shadow: none !important;
  outline: none !important;
  border: none !important;
  color: #fff !important; /* í…ìŠ¤íŠ¸ ì»¬ëŸ¬ ìœ ì§€ */
}
.top-tab-nav .tab-item {
  color: #fff;
  font-weight: 500;
  padding: 0.6rem 1.2rem;
  border-radius: 20px;
  text-decoration: none;
  position: relative;
  transition: all 0.3s ease;
}

.top-tab-nav .tab-item::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 4px;
  background-color: #fbd314;
  border-radius: 2px;
  transition: width 0.3s ease;
}

.top-tab-nav .tab-item:hover {
  background-color: rgba(255, 255, 255, 0.15);
}

.top-tab-nav .tab-item:hover::after {
  width: 60%;
}

.top-tab-nav .tab-item.active {
  background-color: transparent;
  font-weight: 700;
}

.top-tab-nav .tab-item.active::after {
  width: 60%;
}
body.dark-mode .asset-item button,
body.dark-mode .stock-item button,
body.dark-mode .investment-diary button.edit-btn,
body.dark-mode .investment-diary button.delete-btn {
  background: #444 !important;
  color: #fff !important;
  border: 1px solid #666 !important;
}

/* í•„ìš”ì— ë”°ë¼ í˜¸ë²„ íš¨ê³¼ë„ ì¶”ê°€ */
body.dark-mode .asset-item button:hover,
body.dark-mode .stock-item button:hover,
body.dark-mode .investment-diary button.edit-btn:hover,
body.dark-mode .investment-diary button.delete-btn:hover {
  background: #666 !important; /* ë˜ëŠ” ì›í•˜ì‹œëŠ” ìƒ‰ìƒìœ¼ë¡œ ë³€ê²½ */
}
body.dark-mode #memoModal .modal-content button {
  background: #444 !important;
  color: #fff !important;
  border: 1px solid #666 !important;
}
@media only screen and (max-device-width: 768px) {
  @supports (-webkit-touch-callout: none) {
    .bottom-nav {
      padding-bottom: 20px; /* ì›í•˜ëŠ” padding ê°’ */
    }
  }
}
  </style>
</head>
<body>
  <header>
    <h1><a href="index.html" style="color: inherit; text-decoration: none;">Go Higher</a></h1>

    <div class="login-container">
      <!-- í”„ë¡œí•„ ë°•ìŠ¤: ì•„ë°”íƒ€ì™€ í™˜ì˜ ë¬¸êµ¬ -->
      <div id="profileBox">
        <img id="profileAvatar" src="logo.jpg" loading="lazy" alt="User Avatar" />
        <span id="welcomeText">í™˜ì˜í•©ë‹ˆë‹¤, ì‚¬ìš©ìë‹˜!</span>
      </div>
      <!-- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
      <a id="authButton" href="login.html" class="login-btn">
        <i class="fas fa-sign-in-alt"></i> ë¡œê·¸ì¸
      </a>
    </div>
    <!-- ë°ìŠ¤í¬íƒ‘ ë„¤ë¹„ê²Œì´ì…˜ (ëª¨ë°”ì¼ì—ì„œëŠ” ìˆ¨ê¹€) -->
    <nav class="desktop-nav top-tab-nav">
        <a href="index.html" class="tab-item">íˆ¬ë°ì´ë‰´ìŠ¤</a>
      <a href="ì£¼ì‹í¬íŠ¸í´ë¦¬ì˜¤.html" class="tab-item active">ë‹¤ì´ì–´ë¦¬</a>
      <a href="ë²„í¬ì…”í•´ì„œì›¨ì´.html" class="tab-item">ëŒ€ê°€ë“¤</a>
      <a href="ì¤‘ì†Œí˜•ì£¼ì‹.html" class="tab-item">ì¤‘ì†Œí˜•ì£¼ì‹</a>
      <a href="ë°°ë‹¹ì£¼.html" class="tab-item">ë°°ë‹¹ì£¼</a>
      <a href="íë ˆì´ì…˜.html" class="tab-item">íë ˆì´ì…˜</a>
    </nav>
  </header>
    <!-- ëª¨ë°”ì¼ í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="bottom-nav">
      <ul>
        <li>
          <a href="index.html" class="nav-link" aria-label="ë‰´ìŠ¤">
            <span class="icon news-icon"></span>
            <span class="nav-text">ë‰´ìŠ¤</span>
          </a>
        </li>
        <li>
          <a href="ì£¼ì‹í¬íŠ¸í´ë¦¬ì˜¤.html" class="nav-link active" aria-label="íˆ¬ìë‹¤ì´ì–´ë¦¬">
            <span class="icon diary-icon"></span>
            <span class="nav-text">ë‹¤ì´ì–´ë¦¬</span>
          </a>
        </li>
        <li>
          <a href="ë²„í¬ì…”í•´ì„œì›¨ì´.html" class="nav-link" aria-label="ì¸ê¸°í¬íŠ¸í´ë¦¬ì˜¤">
            <span class="icon chart-icon"></span>
            <span class="nav-text">ëŒ€ê°€ë“¤</span>
          </a>
        </li>
        <li>
          <a href="ì¤‘ì†Œí˜•ì£¼ì‹.html" class="nav-link" aria-label="ì¤‘ì†Œí˜•ì£¼ì‹">
            <span class="icon company-icon"></span>
            <span class="nav-text">ì¤‘ì†Œí˜•ì£¼</span>
          </a>
        </li>
        <li>
          <a href="ë°°ë‹¹ì£¼.html" class="nav-link" arial-label="ë°°ë‹¹ì£¼ë¶„ì„">
            <span class="icon coinTree-icon"></span>
            <span class="nav-text">ë°°ë‹¹ì£¼</span>
          </a>
        </li>
        <li>
          <a href="íë ˆì´ì…˜.html" class="nav-link" aria-label="íë ˆì´ì…˜">
            <span class="icon bull-icon"></span>
            <span class="nav-text">íë ˆì´ì…˜</span>
          </a>
        </li>
      </ul>
    </nav>
  
  <main>
    <div class="save-notice">
      ë‹¹ì‹ ì˜ <strong>íˆ¬ìëŠ” ì ë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤.</strong> 
      <br><strong>ëª¨ë°”ì¼ê³¼ ì›¹ì˜ ì™„ë²½í•œ ì—°ë™ìœ¼ë¡œ íˆ¬ì í˜„í™©ì„ ì‹¤ì‹œê°„</strong> ê´€ë¦¬í•˜ê³ ,
      ì–¸ì œ ì–´ë””ì„œë“  ì‰½ê³  í¸ë¦¬í•˜ê²Œ <strong>ìì‚°ì„ ëŠ˜ë¦¬ëŠ” ì¦ê±°ì›€</strong>ì„ ê²½í—˜í•˜ì„¸ìš”.
    </div>

    <h2>í¬íŠ¸í´ë¦¬ì˜¤ ë‹¤ì´ì–´ë¦¬</h2>
    <div class="recommendation">
      <strong>Tip:</strong> ì…ë ¥í•œ ê¸ˆì•¡ì˜ ë¹„ì¤‘ì´ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.<br>
    </div>

    <!-- ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ -->
    <section class="section-container" id="asset-portfolio">
      <div class="section-header">
        <h3>ìì‚° í¬íŠ¸í´ë¦¬ì˜¤</h3>
        <button class="primary-btn" onclick="openModal('assetPortfolioModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        ë‹¤ì–‘í•œ ìì‚° í•­ëª©(í˜„ê¸ˆ, ì±„ê¶Œ, ë¶€ë™ì‚°, ì£¼ì‹ ë“±)ì„ ì¶”ê°€í•˜ê³  ê¸ˆì•¡ì„ ì…ë ¥í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.
      </p>
    </section>

    <!-- íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ -->
    <section class="section-container" id="stock-portfolio">
      <div class="section-header">
        <h3>íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤</h3>
        <button class="primary-btn" onclick="openModal('stockPortfolioModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        íˆ¬ì ì¢…ëª©ê³¼ íˆ¬ì ê¸ˆì•¡(ì›)ì„ ì…ë ¥í•˜ë©´, ìë™ìœ¼ë¡œ ë¹„ì¤‘ì´ í‘œì‹œë©ë‹ˆë‹¤.
      </p>
    </section>

    <!-- ë©”ì¸ í˜ì´ì§€ ë‚´ 'ëª©í‘œ ê´€ë¦¬ ì—´ê¸°' ë²„íŠ¼ ì¶”ê°€ -->
    <section class="section-container" id="goal-management-btn">
      <div class="section-header">
        <h3>To Do List</h3>
        <button class="primary-btn" onclick="openModal('goalManagementModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        ì¼ì •ì„ ê´€ë¦¬í•˜ì„¸ìš”.
      </p>
    </section>

    <!-- íˆ¬ì ì¼ì§€ -->
    <section class="section-container" id="investment-diary">
      <div class="section-header">
        <h3>ë©”ëª¨ì¥</h3>
        <button class="primary-btn" onclick="openModal('investmentDiaryModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        ì˜¤ëŠ˜ì˜ íˆ¬ì, ê°ì •, ì‚¬ê±´ ë“±ì„ ê¸°ë¡í•˜ì„¸ìš”.
      </p>
    </section>

    <!-- ë‹¬ë ¥ ë©”ëª¨ -->
    <section class="section-container" id="calendar-section">
      <div class="section-header">
        <h3>ë‹¬ë ¥ ë©”ëª¨</h3>
        <button class="primary-btn" onclick="openModal('calendarModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        íŠ¹ì • ë‚ ì§œì— ë©”ëª¨ë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
    </section>

    <!-- ê°€ê³„ë¶€ (ì›”ë³„ ë³´ê³ ì„œ ê¸°ëŠ¥ì€ ì—¬ê¸°ë¡œ í†µí•©ë¨) -->
    <section class="section-container" id="account-book">
      <div class="section-header">
        <h3>ê°€ê³„ë¶€</h3>
        <button class="primary-btn" onclick="openModal('accountBookModal')">ì—´ê¸°</button>
      </div>
      <p style="font-size:0.9rem; margin-top: 10px;">
        ìˆ˜ì…ê³¼ ì§€ì¶œì„ ê¸°ë¡í•´ë³´ì„¸ìš”.
      </p>
    </section>
  </main>
  <footer>
    <p>
      Â© 2025 Go Higher, ê³ í•˜ì´ì–´. All rights reserved.<br>
      ìš´ì˜ ì§€ì—­: ëŒ€í•œë¯¼êµ­ ëŒ€êµ¬<br>
      ë¬¸ì˜: <a href="mailto:hermann8hesse@gmail.com" style="color:#fff; text-decoration:underline;">hermann8hesse@gmail.com</a><br>
    </p>
  </footer>

          <!-- Back to Top ë²„íŠ¼ -->
          <button class="back-to-top" id="backToTop">Top</button>

  <!-- [ëª¨ë‹¬] ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ -->
  <div id="assetPortfolioModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeModal('assetPortfolioModal')"></button>
      <h3>ìì‚° í¬íŠ¸í´ë¦¬ì˜¤</h3>
      <p style="font-size:0.9rem; line-height: 1.4;">
        ë‹¤ì–‘í•œ ìì‚°(ì˜ˆ: í˜„ê¸ˆ, ì±„ê¶Œ, ë¶€ë™ì‚°, ì£¼ì‹, ê¸°íƒ€)ì˜ íˆ¬ì ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.<br>
        ì…ë ¥í•œ ê¸ˆì•¡ì„ ë°”íƒ•ìœ¼ë¡œ ìë™ìœ¼ë¡œ ê° í•­ëª©ì˜ ë¹„ìœ¨ì´ ê³„ì‚°ë˜ì–´ ì°¨íŠ¸ë¡œ í‘œì‹œë©ë‹ˆë‹¤.<br>
        <strong>ì•ˆì •ì ì¸ ìì‚° í¬íŠ¸í´ë¦¬ì˜¤</strong>ë¥¼ í†µí•´ ë³€ë™ì„±ì„ ì¤„ì´ê³  ì¥ê¸°ì ì¸ ì„±ì¥ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
      <div class="portfolio-section-content">
        <div class="left-content">
          <div id="assetItemsContainer"></div>
          <div class="portfolio-form">
            <button id="addAssetItemBtn">ìì‚° í•­ëª© ì¶”ê°€</button>
          </div>
          <!-- ëª©í‘œ ë¹„ìœ¨ ì„¤ì • ë° ë¦¬ë°¸ëŸ°ì‹± ì„¹ì…˜ -->
          <div id="targetRatioSection" style="margin-top:1rem; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;">
            <h4 style="margin-bottom:0.5rem;">ë¦¬ë°¸ëŸ°ì‹± ë„êµ¬ (ë‹¨ìœ„: %)</h4>
            <div id="targetRatioContainer"></div>
            <!-- ëª©í‘œ ë¹„ìœ¨ ìƒíƒœ ì˜ì—­ -->
            <div id="targetRatioStatus" style="margin-top: 0.5rem; font-size: 0.9rem; color: #d9534f;"></div>
            <div class="portfolio-form" style="margin-top:0.5rem;">
              <button id="saveTargetRatiosBtn" class="primary-btn">ëª©í‘œ ë¹„ìœ¨ ì €ì¥</button>
              <button id="calcRebalancingBtn" class="secondary-btn">ë¦¬ë°¸ëŸ°ì‹± ê³„ì‚°</button>
            </div>
            <!-- ë¦¬ë°¸ëŸ°ì‹± ê²°ê³¼ ì¹´ë“œ ì˜ì—­ -->
            <div id="rebalancingSuggestions" style="margin-top:1rem;"></div>
          </div>
        </div>
        <div class="right-chart">
          <div class="chart-container">
            <canvas id="assetChart"></canvas>
          </div>
          <div class="chart-btn-group">
            <button id="assetPieChartBtn" class="secondary-btn">ì›í˜• ê·¸ë˜í”„</button>
            <button id="assetBarChartBtn" class="secondary-btn">ë§‰ëŒ€ ê·¸ë˜í”„</button>
          </div>
        </div>
      </div>
      <!-- ìì‚° ëª©í‘œ ê¸°ëŠ¥ -->
      <hr style="margin: 1rem 0;">
      <div id="assetGoalSection">
        <h3>ë‚˜ì˜ ìì‚° ëª©í‘œ</h3>
        <p>ëª©í‘œ ìì‚° ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”:</p>
        <div class="asset-goal-form">
          <input type="text" id="assetGoalInput" placeholder="ì˜ˆ: 10000000">
          <button id="saveAssetGoalBtn">ì €ì¥</button>
        </div>
        <div id="assetGoalDisplay"></div>
        <div id="assetGoalProgress"></div>
      </div>
    </div>
  </div>

  <!-- [ëª¨ë‹¬] íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ (ì£¼ì‹) -->
  <div id="stockPortfolioModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeModal('stockPortfolioModal')"></button>
      <h3>íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤</h3>
      <p class="section-description">
        íˆ¬ì ì¢…ëª©(ì˜ˆ: AAPL)ê³¼ íˆ¬ì ê¸ˆì•¡(ì›)ì„ ì…ë ¥í•˜ì„¸ìš”.<br>
        ì…ë ¥í•œ ê¸ˆì•¡ì˜ ì´í•©ì„ ê¸°ì¤€ìœ¼ë¡œ ê° ì¢…ëª©ì˜ ë¹„ìœ¨ì´ ìë™ìœ¼ë¡œ ê³„ì‚°ë˜ì–´ ì°¨íŠ¸ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
      </p>
      <div class="portfolio-section-content">
        <div class="left-content">
          <div class="portfolio-form" style="flex-direction: column; align-items: flex-start;">
            <div id="stockList"></div>
            <button id="addStockBtn" class="primary-btn">ì¢…ëª© ì¶”ê°€</button>
          </div>
        </div>
        <div class="right-chart card">
          <div class="chart-container">
            <canvas id="stockChart"></canvas>
          </div>
          <div class="chart-btn-group">
            <button id="pieChartBtn" class="secondary-btn">ì›í˜• ê·¸ë˜í”„</button>
            <button id="barChartBtn" class="secondary-btn">ë§‰ëŒ€ ê·¸ë˜í”„</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- [ëª¨ë‹¬] íˆ¬ì ì¼ì§€ -->
  <div id="investmentDiaryModal" class="modal">
    <div class="modal-content investment-diary">
      <button class="modal-close-btn" onclick="closeModal('investmentDiaryModal')"></button>
      <h3>ë©”ëª¨ì¥</h3>
      <textarea id="investmentDiary" placeholder="ì˜¤ëŠ˜ì˜ íˆ¬ì, ê°ì •, ì‚¬ê±´ ë“±ì„ ê¸°ë¡í•˜ì„¸ìš”..." style="width: 100%; height: 150px; margin-top: 1rem;"></textarea>
      <button id="saveDiaryBtn" style="margin-top: 0.5rem;">ì €ì¥</button>
      <div id="diaryEntries" style="margin-top: 1rem;"></div>
    </div>
  </div>

  <!-- [ëª¨ë‹¬] ëª©í‘œ ê´€ë¦¬ (To Do List) -->
  <div id="goalManagementModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeModal('goalManagementModal')"></button>
      <h3>To Do List</h3>
      <div class="todo-form">
        <input type="text" id="todoInput" placeholder="í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”">
        <button id="addTodoBtn">ì¶”ê°€</button>
      </div>
      <ul id="todoList" class="todo-list"></ul>
    </div>
  </div>

  <!-- [ëª¨ë‹¬] ë‹¬ë ¥ ë©”ëª¨ -->
  <div id="calendarModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeModal('calendarModal')"></button>
      <h3>ë‹¬ë ¥ ë©”ëª¨</h3>
      <div class="calendar-navigation">
        <button id="prevMonthBtn" style="padding: 0.5rem 1rem; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; cursor: pointer;">ì´ì „ ë‹¬</button>
        <span id="currentMonthDisplay" style="font-size: 1.2rem; font-weight: bold;"></span>
        <button id="nextMonthBtn" style="padding: 0.5rem 1rem; background: var(--primary-color); color: #fff; border: none; border-radius: 4px; cursor: pointer;">ë‹¤ìŒ ë‹¬</button>
      </div>
      <div id="calendar"></div>
    </div>
  </div>

  <!-- [ëª¨ë‹¬] ê°€ê³„ë¶€ (ì›”ë³„ ë³´ê³ ì„œ) -->
  <div id="accountBookModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeModal('accountBookModal')"></button>
      <h3>ê°€ê³„ë¶€</h3>
      <div class="account-book-form">
        <input type="date" id="ab-date">
        <select id="ab-type">
          <option value="income">ìˆ˜ì…</option>
          <option value="expense">ì§€ì¶œ</option>
        </select>
        <input type="text" id="ab-category" placeholder="ì¹´í…Œê³ ë¦¬">
        <input type="text" id="ab-amount" placeholder="ê¸ˆì•¡">
        <input type="text" id="ab-description" placeholder="ì„¤ëª… (ì„ íƒ)">
        <button id="ab-addBtn">ì¶”ê°€</button>
      </div>
      <div class="account-book-summary" id="ab-summary" style="margin-bottom: 1rem;"></div>
      <div class="account-book-entries" id="ab-entries"></div>
      <div class="fixed-expense-calculator" style="margin-top: 20px; border-top: 1px solid #ccc; padding-top: 10px;">
        <h3>ì›”ê°„ ê³ ì • ì§€ì¶œ ê³„ì‚°ê¸°</h3>
        <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
          <input type="text" id="fixedExpenseDescription" placeholder="ì§€ì¶œ í•­ëª©" style="flex: 1; padding: 5px;">
          <input type="text" id="fixedExpenseAmount" placeholder="ê¸ˆì•¡" style="width: 100px; padding: 5px;">
          <button id="addFixedExpenseBtn" style="padding: 5px 10px;">ì¶”ê°€</button>
        </div>
        <div id="fixedExpenseList"></div>
        <div id="fixedExpenseTotal" style="margin-top: 10px; font-weight: bold;"></div>
      </div>
      <hr style="margin: 1.5rem 0;">
      <h3>ì›”ë³„ ê°€ê³„ë¶€ ë³´ê³ ì„œ</h3>
      <button id="generateReportBtn" style="margin-bottom: 10px;">ë³´ê³ ì„œ ìƒì„±</button>
      <div id="reportSummary" style="margin-bottom: 20px;"></div>
      <canvas id="incomeExpenseChart" style="margin-bottom: 20px;"></canvas>
    </div>
  </div>

  <!-- ë‹¬ë ¥ ë©”ëª¨ ëª¨ë‹¬ (ê¸°ì¡´) -->
  <div id="memoModal" class="modal">
    <div class="modal-content">
      <button class="modal-close-btn" onclick="closeMemoModal()"></button>
      <h4 id="modalTitle">ë©”ëª¨ ì…ë ¥</h4>
      <textarea id="modalTextarea" placeholder="ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”" style="width:100%; height: 100px;"></textarea>
      <div style="text-align: right; margin-top: 10px;">
        <button id="saveModalBtn" class="primary-btn">ì €ì¥</button>
      </div>
    </div>
  </div>

  <script src="auth.js"></script>
  
  <script>
    Chart.register(ChartDataLabels);

    let assetChart, stockChart, incomeExpenseChart;
    let stockChartType = 'pie';   // ê¸°ë³¸ ì°¨íŠ¸ íƒ€ì…
    let assetChartType = 'pie';

    // í—¬í¼ í•¨ìˆ˜: ë‹¤í¬ëª¨ë“œ ì—¬ë¶€ì— ë”°ë¥¸ ê¸€ì ìƒ‰ìƒ ë°˜í™˜
    function getTextColor(defaultLight, defaultDark) {
      return document.body.classList.contains("dark-mode") ? defaultDark : defaultLight;
    }

    // ===== ëª©í‘œ ë¹„ìœ¨ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ =====
    function updateTargetRatioStatus() {
      const ratioInputs = document.querySelectorAll('.target-ratio-input');
      let sum = 0;
      ratioInputs.forEach(input => {
         sum += Number(input.value) || 0;
      });
      const statusEl = document.getElementById('targetRatioStatus');
      if (sum < 100) {
         statusEl.textContent = "í˜„ì¬ ì…ë ¥ëœ ëª©í‘œ ë¹„ìœ¨ì´ " + sum + "%ì…ë‹ˆë‹¤. 100%ì— ë„ë‹¬í•˜ë ¤ë©´ " + (100 - sum) + "%ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.";
      } else if (sum > 100) {
         statusEl.textContent = "í˜„ì¬ ì…ë ¥ëœ ëª©í‘œ ë¹„ìœ¨ì´ " + sum + "%ì…ë‹ˆë‹¤. 100%ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ì´ˆê³¼ë¶„: " + (sum - 100) + "%.";
      } else {
         statusEl.textContent = "ëª©í‘œ ë¹„ìœ¨ì´ ì •í™•íˆ 100%ì…ë‹ˆë‹¤.";
      }
    }

    // ===== ëª¨ë‹¬ ì—´ê³  ë‹«ê¸° í•¨ìˆ˜ =====
    function openModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.classList.add("active");
    document.body.style.overflow = "hidden";
    
    // ëª¨ë‹¬ ì¢…ë¥˜ì— ë”°ë¼ Firestore ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜ í˜¸ì¶œ
    if (modalId === "assetPortfolioModal") {
      loadAssetPortfolioFirestore();
    } else if (modalId === "stockPortfolioModal") {
      loadStockPortfolioFirestore();
    } else if (modalId === "investmentDiaryModal") {
      loadDiaryEntriesFirestore();
    } else if (modalId === "goalManagementModal") {
      loadTodoListFirestore();
    } else if (modalId === "calendarModal") {
      updateCalendarHeader();
      loadCalendarMemosFirestore();
    } else if (modalId === "accountBookModal") {
      loadAccountBookEntriesFirestore();
      loadFixedExpensesFirestore(); // ì¶”ê°€: ê³ ì • ì§€ì¶œ ë°ì´í„°ë„ ë¶ˆëŸ¬ì˜¤ê¸°
    } 
  }
}


function closeModal(modalId) {
  const modal = document.getElementById(modalId);
  if (modal) {
    modal.classList.remove("active");
    document.body.style.overflow = "";
  }
}


    // ===== ì‰¼í‘œ ì…ë ¥ ì²˜ë¦¬(ê¸ˆì•¡) =====
    function addCommaFormatting(inputElement) {
      inputElement.addEventListener('input', function() {
        let numericValue = inputElement.value.replace(/,/g, '');
        if(numericValue === '') { inputElement.value = ''; return; }
        let num = parseFloat(numericValue);
        if(isNaN(num)) return;
        let formattedValue = num.toLocaleString('en-US');
        inputElement.value = formattedValue;
        inputElement.selectionStart = inputElement.selectionEnd = inputElement.value.length;
      });
    }

    // ===== ìì‚° í¬íŠ¸í´ë¦¬(Asset) =====
    function createAssetItem(asset = {name: "", amount: 0}) {
      const div = document.createElement("div");
      div.classList.add("asset-item");

      const nameInput = document.createElement("input");
      nameInput.type = "text";
      nameInput.placeholder = "ìì‚°ëª…";
      nameInput.value = asset.name || "";
      nameInput.addEventListener("input", () => {
        updateAssetChart();
        updateTargetRatioFields();
      });

      const amountInput = document.createElement("input");
      amountInput.type = "text";
      amountInput.placeholder = "ê¸ˆì•¡";
      amountInput.value = (asset.amount || 0).toLocaleString();
      amountInput.addEventListener("input", updateAssetChart);
      addCommaFormatting(amountInput);

      const removeBtn = document.createElement("button");
      removeBtn.textContent = "ì‚­ì œ";
      removeBtn.addEventListener("click", () => {
        if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          div.remove();
          saveAssetPortfolio();
          updateAssetChart();
          updateTargetRatioFields();
        }
      });

      div.appendChild(nameInput);
      div.appendChild(amountInput);
      div.appendChild(removeBtn);

      return div;
    }
    function loadAssetPortfolio() {
      const container = document.getElementById("assetItemsContainer");
      container.innerHTML = "";
      const stored = localStorage.getItem("assetPortfolio");
      let assets = [];
      if(stored) {
        assets = JSON.parse(stored);
      } else {
        assets = [
          {name: "í˜„ê¸ˆ", amount: 0},
          {name: "ì±„ê¶Œ", amount: 0},
          {name: "ë¶€ë™ì‚°", amount: 0},
          {name: "ì£¼ì‹", amount: 0},
          {name: "ê¸°íƒ€", amount: 0}
        ];
        localStorage.setItem("assetPortfolio", JSON.stringify(assets));
      }
      assets.forEach(asset => container.appendChild(createAssetItem(asset)));
    }
    function saveAssetPortfolio() {
      const container = document.getElementById("assetItemsContainer");
      const assetItems = container.querySelectorAll(".asset-item");
      const assets = [];
      assetItems.forEach(item => {
        const inputs = item.querySelectorAll("input");
        const name = inputs[0].value.trim();
        const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
        assets.push({ name, amount });
      });
      localStorage.setItem("assetPortfolio", JSON.stringify(assets));
    }

    function updateAssetChart() {
      const container = document.getElementById("assetItemsContainer");
      const assetItems = container.querySelectorAll(".asset-item");
      const names = [];
      const amounts = [];
      assetItems.forEach(item => {
        const inputs = item.querySelectorAll("input");
        const name = inputs[0].value.trim() || "ë¯¸ì…ë ¥";
        const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
        names.push(name);
        amounts.push(amount);
      });
      saveAssetPortfolio();
      
      const total = amounts.reduce((a,b) => a+b, 0);
      const ctx = document.getElementById("assetChart").getContext("2d");
      
      adjustChartSize("assetChart", names.length);
      
      let labelFontSize = names.length > 5 ? Math.max(10, 14 - (names.length - 5)) : 14;
      
      if(total === 0){
        ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        ctx.font = "16px sans-serif";
        ctx.fillStyle = "#333";
        ctx.fillText("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.", 50, 150);
        updateAssetGoalProgress();
        return;
      }
      
      const backgroundColors = names.map(() => {
        const r = Math.floor(Math.random() * 200);
        const g = Math.floor(Math.random() * 200);
        const b = Math.floor(Math.random() * 200);
        return `rgb(${r}, ${g}, ${b})`;
      });
      
      // ë¶ˆëŸ¬ì˜¨ ëª©í‘œ ë¹„ìœ¨
      const storedRatios = localStorage.getItem('targetRatios');
      const targetRatios = storedRatios ? JSON.parse(storedRatios) : {};

      if(assetChart) {
        assetChart.destroy();
      }
      
      // ë‹¤í¬ëª¨ë“œì— ë”°ë¥¸ ë°ì´í„° ë¼ë²¨ ë° ì¶• ê¸€ì ìƒ‰ìƒ
      const dataLabelColor = (assetChartType === 'bar') ? getTextColor("#000", "#fff") : getTextColor("#fff", "#fff");
      const tickColor = getTextColor("#000", "#fff");

      assetChart = new Chart(ctx, {
        type: assetChartType,
        data: {
          labels: names,
          datasets: [{
            data: amounts,
            backgroundColor: backgroundColors,
            borderColor: "#fff",
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          layout: { padding: 20 },
          plugins: {
            legend: { position: 'bottom', labels: { color: tickColor } },
            title: { 
              display: true, 
              text: assetChartType === 'pie' ? 'ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ (ì›í˜•)' : 'ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ (ë§‰ëŒ€)',
              color: tickColor
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  const index = context.dataIndex;
                  const currentAmount = amounts[index] || 0;
                  const assetName = names[index];
                  const targetRatio = targetRatios[assetName] || 0;
                  const targetAmount = total * (targetRatio/100);
                  const difference = targetAmount - currentAmount;
                  return "í˜„ì¬: " + currentAmount.toLocaleString() + " ì› / ëª©í‘œ: " + targetAmount.toLocaleString() + " ì› / ì°¨ì´: " + difference.toLocaleString() + " ì›";
                }
              },
              titleColor: tickColor,
              bodyColor: tickColor
            },
            datalabels: {
              display: true,
              color: dataLabelColor,
              font: { size: labelFontSize, weight: 'bold' },
              formatter: (value, ctx) => {
                const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                const percentage = total > 0 ? ((value / total) * 100).toFixed(2) : 0;
                const label = ctx.chart.data.labels[ctx.dataIndex];
                return label + ': ' + percentage + '%';
              }
            }
          },
          scales: assetChartType === 'bar' ? {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + " ì›";
                },
                color: tickColor
              }
            }
          } : {}
        }
      });
      updateAssetGoalProgress();
    }

    document.addEventListener("DOMContentLoaded", () => {
      const assetPieBtn = document.getElementById("assetPieChartBtn");
      const assetBarBtn = document.getElementById("assetBarChartBtn");
      assetPieBtn.addEventListener("click", () => {
        assetChartType = 'pie';
        updateAssetChart();
      });
      assetBarBtn.addEventListener("click", () => {
        assetChartType = 'bar';
        updateAssetChart();
      });
    });

    function adjustChartSize(canvasId, itemCount) {
      const canvas = document.getElementById(canvasId);
      const baseSize = 300;
      const extraPerItem = 30;
      const newSize = baseSize + itemCount * extraPerItem;
      canvas.height = newSize;
      canvas.width = newSize;
      canvas.style.height = newSize + "px";
      canvas.style.width = newSize + "px";
    }

    document.getElementById("addAssetItemBtn").addEventListener("click", () => {
      const container = document.getElementById("assetItemsContainer");
      container.appendChild(createAssetItem());
      updateTargetRatioFields();
    }); 
    
    // ëª©í‘œ ë¹„ìœ¨ ì…ë ¥ í•„ë“œë¥¼ ìƒì„±í•  ë•Œ input ì´ë²¤íŠ¸ ì¶”ê°€ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸)
    function updateTargetRatioFields() {
      const targetContainer = document.getElementById("targetRatioContainer");
      targetContainer.innerHTML = "";
      const storedRatios = localStorage.getItem('targetRatios');
      const targetRatios = storedRatios ? JSON.parse(storedRatios) : {};
      
      const assetItems = document.querySelectorAll("#assetItemsContainer .asset-item");
      assetItems.forEach(item => {
        const nameInput = item.querySelector("input[type='text']");
        const assetName = nameInput.value.trim() || "ë¯¸ì…ë ¥";
        const savedValue = targetRatios[assetName] || "";
        const div = document.createElement("div");
        div.style.marginBottom = "0.3rem";
        div.innerHTML = `<label style="font-size:0.9rem;">${assetName} ëª©í‘œë¹„ìœ¨: </label>
                         <input type="number" class="target-ratio-input" data-asset-name="${assetName}" placeholder="%" style="width:60px; padding:2px; margin-left:5px;" value="${savedValue}">`;
        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ë¥¼ ìœ„í•´ input ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        div.querySelector(".target-ratio-input").addEventListener("input", updateTargetRatioStatus);
        targetContainer.appendChild(div);
      });
      updateTargetRatioStatus();
    }
    
    function saveTargetRatios() {
      const ratioInputs = document.querySelectorAll('.target-ratio-input');
      let targetRatios = {};
      ratioInputs.forEach((input) => {
        const assetName = input.getAttribute('data-asset-name');
        targetRatios[assetName] = Number(input.value) || 0;
      });
      localStorage.setItem('targetRatios', JSON.stringify(targetRatios));
      alert("ëª©í‘œ ë¹„ìœ¨ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
      updateTargetRatioStatus();
    }
    function loadTargetRatios() {
      const stored = localStorage.getItem('targetRatios');
      return stored ? JSON.parse(stored) : {};
    }

    function calculateRebalancingSuggestions() {
      const container = document.getElementById("assetItemsContainer");
      const assetItems = container.querySelectorAll(".asset-item");
      const targetRatios = loadTargetRatios();
      let totalAsset = 0;
      let currentAssets = [];
    
      assetItems.forEach(item => {
        const inputs = item.querySelectorAll("input");
        const name = inputs[0].value.trim() || "ë¯¸ì…ë ¥";
        const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
        totalAsset += amount;
        currentAssets.push({ name, amount });
      });
    
      let suggestions = currentAssets.map(asset => {
        const targetRatio = targetRatios[asset.name] || 0;
        const targetAmount = totalAsset * (targetRatio / 100);
        return {
          name: asset.name,
          current: asset.amount,
          target: targetAmount,
          difference: targetAmount - asset.amount
        };
      });
      return suggestions;
    }
    function displayRebalancingSuggestions() {
      const suggestions = calculateRebalancingSuggestions();
      const suggestionsContainer = document.getElementById("rebalancingSuggestions");
      suggestionsContainer.innerHTML = "";
      suggestions.forEach(suggestion => {
        const div = document.createElement("div");
        div.classList.add("rebalance-card");
        if(suggestion.difference >= 0) {
          div.classList.add("buy");
        } else {
          div.classList.add("sell");
        }
        div.innerHTML = `<strong>${suggestion.name}</strong><br>
                         í˜„ì¬: ${suggestion.current.toLocaleString()} ì›<br>
                         ëª©í‘œ: ${suggestion.target.toLocaleString()} ì›<br>
                         ${suggestion.difference >= 0 ? "ë§¤ìˆ˜" : "ë§¤ë„"} í•„ìš”: ${Math.abs(suggestion.difference).toLocaleString()} ì›`;
        suggestionsContainer.appendChild(div);
      });
    }
    document.getElementById("saveTargetRatiosBtn").addEventListener("click", saveTargetRatios);
    document.getElementById("calcRebalancingBtn").addEventListener("click", displayRebalancingSuggestions);

    // ===== íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤(Stock) =====
    function createStockItem(stock = {name: "", amount: 0}) {
      const stockDiv = document.createElement("div");
      stockDiv.classList.add("stock-item");

      const nameInput = document.createElement("input");
      nameInput.type = "text";
      nameInput.placeholder = "ì¢…ëª©ëª… (ì˜ˆ: AAPL)";
      nameInput.value = stock.name || "";
      nameInput.addEventListener("input", updateStockChart);

      const amountInput = document.createElement("input");
      amountInput.type = "text";
      amountInput.placeholder = "íˆ¬ìê¸ˆì•¡(ì›)";
      amountInput.value = (stock.amount || 0).toLocaleString();
      amountInput.addEventListener("input", updateStockChart);
      addCommaFormatting(amountInput);

      const removeBtn = document.createElement("button");
      removeBtn.textContent = "ì‚­ì œ";
      removeBtn.addEventListener("click", () => {
        if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
          stockDiv.remove();
          saveStockPortfolio();
          updateStockChart();
        }
      });

      stockDiv.appendChild(nameInput);
      stockDiv.appendChild(amountInput);
      stockDiv.appendChild(removeBtn);

      return stockDiv;
    }

    function loadStockPortfolio() {
      const stockList = document.getElementById("stockList");
      stockList.innerHTML = "";
      const stored = localStorage.getItem("stockPortfolio");
      let stocks = [];
      if (stored) {
        stocks = JSON.parse(stored);
      } else {
        stocks = [{ name: "", amount: 0 }, { name: "", amount: 0 }];
        localStorage.setItem("stockPortfolio", JSON.stringify(stocks));
      }
      stocks.forEach(stock => {
        stockList.appendChild(createStockItem(stock));
      });
    }

    function saveStockPortfolio() {
      const stockList = document.getElementById("stockList");
      const stockItems = stockList.querySelectorAll(".stock-item");
      const stocks = [];
      stockItems.forEach(item => {
        const inputs = item.querySelectorAll("input");
        const name = inputs[0].value.trim();
        const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
        stocks.push({ name, amount });
      });
      localStorage.setItem("stockPortfolio", JSON.stringify(stocks));
    }
    function updateStockChart() {
      const stockList = document.getElementById("stockList");
      const stockItems = stockList.querySelectorAll(".stock-item");
      const names = [];
      const amounts = [];
      stockItems.forEach(item => {
        const inputs = item.querySelectorAll("input");
        const stockName = inputs[0].value.trim() || "ë¯¸ì…ë ¥";
        const stockAmount = Number(inputs[1].value.replace(/,/g, "")) || 0;
        names.push(stockName);
        amounts.push(stockAmount);
      });
      saveStockPortfolio();
      
      const total = amounts.reduce((a, b) => a + b, 0);
      const ctx = document.getElementById("stockChart").getContext("2d");
      
      adjustChartSize("stockChart", names.length);
      
      let labelFontSize = names.length > 5 ? Math.max(10, 14 - (names.length - 5)) : 14;
      
      if(total === 0) {
        ctx.clearRect(0,0,ctx.canvas.width, ctx.canvas.height);
        ctx.font = "16px sans-serif";
        ctx.fillStyle = "#333";
        ctx.fillText("ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.", 50, 150);
        return;
      }
            
      const backgroundColors = names.map(() => {
        const r = Math.floor(Math.random() * 200);
        const g = Math.floor(Math.random() * 200);
        const b = Math.floor(Math.random() * 200);
        return `rgb(${r}, ${g}, ${b})`;
      });
      
      if(stockChart) {
        stockChart.destroy();
      }
      
      const dataLabelColor = (stockChartType === 'bar') ? getTextColor("#000", "#fff") : getTextColor("#fff", "#fff");
      const tickColor = getTextColor("#000", "#fff");

      stockChart = new Chart(ctx, {
        type: stockChartType,
        data: {
          labels: names,
          datasets: [{
            data: amounts,
            backgroundColor: backgroundColors,
            borderColor: "#fff",
            borderWidth: 2
          }]
        },
        options: {
          responsive: true,
          layout: { padding: 20 },
          plugins: {
            legend: { position: 'bottom', labels: { color: tickColor } },
            title: { 
              display: true, 
              text: stockChartType === 'pie' ? 'ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ (ì›í˜•)' : 'ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ (ë§‰ëŒ€)',
              color: tickColor
            },
            datalabels: {
              display: true,
              color: dataLabelColor,
              font: { size: labelFontSize, weight: 'bold' },
              formatter: (value, ctx) => {
                const total = ctx.chart.data.datasets[0].data.reduce((a, b) => a + b, 0);
                const percentage = total > 0 ? ((value / total) * 100).toFixed(2) : 0;
                const label = ctx.chart.data.labels[ctx.dataIndex];
                return label + ': ' + percentage + '%';
              }
            }
          },
          scales: stockChartType === 'bar' ? {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return value.toLocaleString() + " ì›";
                },
                color: tickColor
              }
            }
          } : {}
        }
      });
    }
    document.getElementById("pieChartBtn").addEventListener("click", () => {
      stockChartType = 'pie';
      updateStockChart();
    });
    document.getElementById("barChartBtn").addEventListener("click", () => {
      stockChartType = 'bar';
      updateStockChart();
    });
    document.getElementById("addStockBtn").addEventListener("click", () => {
      const stockList = document.getElementById("stockList");
      stockList.appendChild(createStockItem());
    });


    // ===== To Do List =====
    function createTodoListItem(text) {
      const li = document.createElement("li");
      li.className = "todo-item";
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.className = "todo-checkbox";
      checkbox.addEventListener("change", saveTodoList);
      li.appendChild(checkbox);
      const span = document.createElement("span");
      span.classList.add("todo-text");
      span.textContent = text;
      li.appendChild(span);
      const delBtn = document.createElement("button");
      delBtn.textContent = "ì‚­ì œ";
      delBtn.className = "delete-btn";
      delBtn.addEventListener("click", () => { 
        li.remove(); 
        saveTodoList();
      });
      li.appendChild(delBtn);
      return li;
    }

   // ì˜ˆì‹œ: To Do List ê´€ë ¨ í•¨ìˆ˜ (ê¸°ì¡´ localStorage ê¸°ë°˜ í•¨ìˆ˜)
   function createTodoListItem(text) {
      const li = document.createElement("li");
      li.className = "todo-item";
      
      const checkbox = document.createElement("input");
      checkbox.type = "checkbox";
      checkbox.className = "todo-checkbox";
      checkbox.addEventListener("change", saveTodoList);
      li.appendChild(checkbox);
      
      const span = document.createElement("span");
      span.classList.add("todo-text");
      span.textContent = text;
      span.contentEditable = "true";
      span.spellcheck = false;
      span.addEventListener("blur", () => {
          saveTodoList();
      });
      li.appendChild(span);
      
      const delBtn = document.createElement("button");
      delBtn.textContent = "ì‚­ì œ";
      delBtn.className = "delete-btn";
      delBtn.addEventListener("click", () => { 
        li.remove(); 
        saveTodoList();
      });
      li.appendChild(delBtn);
      return li;
    }


    document.getElementById("todoInput").addEventListener("keydown", (e) => {
      if(e.key === "Enter"){
        e.preventDefault();
        document.getElementById("addTodoBtn").click();
      }
    });

    document.getElementById("addTodoBtn").addEventListener("click", () => {
      const input = document.getElementById("todoInput");
      const todoText = input.value.trim();
      if(todoText === ""){
        alert("í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }
      const li = createTodoListItem(todoText);
      document.getElementById("todoList").appendChild(li);
      input.value = "";
      saveTodoList();
    });

    // ===== ìì‚° ëª©í‘œ =====
    function loadAssetGoal() {
      const savedGoal = localStorage.getItem("assetGoal");
      const display = document.getElementById("assetGoalDisplay");
      if (savedGoal) {
        display.textContent = "í˜„ì¬ ëª©í‘œ: " + Number(savedGoal).toLocaleString() + " ì›";
      } else {
        display.textContent = "ìì‚° ëª©í‘œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";
      }
      updateAssetGoalProgress();
    }
    document.getElementById("saveAssetGoalBtn").addEventListener("click", () => {
      const input = document.getElementById("assetGoalInput");
      const goal = input.value.replace(/,/g, "").trim();
      if (goal === "" || isNaN(goal)) {
        alert("ìœ íš¨í•œ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.");
        return;
      }
      localStorage.setItem("assetGoal", goal);
      loadAssetGoal();
      alert("ìì‚° ëª©í‘œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
    });
    function updateAssetGoalProgress() {
  const savedGoal = localStorage.getItem("assetGoal");
  const progressContainer = document.getElementById("assetGoalProgress");
  progressContainer.innerHTML = "";

  if (!savedGoal) return;
  const goal = Number(savedGoal);

  // Firestoreì—ì„œ assetPortfolio ë¶ˆëŸ¬ì˜¤ê¸°
  loadUserData("assetPortfolio")
    .then(doc => {
      let totalAsset = 0;
      if (doc && doc.exists) {
        // Firestoreì— ì €ì¥ëœ ë°°ì—´
        const assets = doc.data().assets || [];
        assets.forEach(asset => {
          totalAsset += Number(asset.amount) || 0;
        });
      }

      // ê³„ì‚°ëœ totalAssetìœ¼ë¡œ ì§„í–‰ë¥  í‘œì‹œ
      const percentage = Math.min(100, ((totalAsset / goal) * 100).toFixed(2));
      
      const info = document.createElement("p");
      info.textContent = `í˜„ì¬ ìì‚°: ${totalAsset.toLocaleString()} ì› / ëª©í‘œ: ${goal.toLocaleString()} ì›`;
      progressContainer.appendChild(info);

      const progressBar = document.createElement("div");
      progressBar.classList.add("progress-bar");
      
      const progress = document.createElement("div");
      progress.classList.add("progress");
      progress.style.width = percentage + "%";
      progress.textContent = percentage + "%";

      progressBar.appendChild(progress);
      progressContainer.appendChild(progressBar);
    })
    .catch(err => console.error("ìì‚° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err));
}

    // ===== íˆ¬ì ì¼ì§€ =====
// Firestoreì— íˆ¬ì ì¼ì§€ í•­ëª©ì„ ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
function appendDiaryEntryFirestore(newEntry) {
  loadUserData("diaryEntries").then(doc => {
    let entries = [];
    if (doc.exists) {
      entries = doc.data().entries || [];
    }
    entries.push(newEntry);
    return saveUserData("diaryEntries", { entries: entries });
  }).then(() => {
    console.log("íˆ¬ì ì¼ì§€ ì €ì¥ ì™„ë£Œ");
    loadDiaryEntriesFirestore(); // ìµœì‹  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ UIì— ë°˜ì˜
  }).catch(err => console.error("íˆ¬ì ì¼ì§€ ì €ì¥ ì‹¤íŒ¨:", err));
}

// Firestoreì—ì„œ ë©”ëª¨ì¥ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ í™”ë©´ì— í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
function loadDiaryEntriesFirestore() {
  loadUserData("diaryEntries").then(doc => {
    const diaryEntriesContainer = document.getElementById("diaryEntries");
    diaryEntriesContainer.innerHTML = "";
    let entries = [];
    if (doc.exists) {
      entries = doc.data().entries || [];
    }
    entries.forEach((entry, index) => {
  const div = document.createElement("div");
  div.className = "diary-entry";
  
  // í—¤ë” ì»¨í…Œì´ë„ˆ: ë‚ ì§œì™€ ìˆ˜ì •, ì‚­ì œ ë²„íŠ¼ì„ ë¬¶ìŒ
  const headerDiv = document.createElement("div");
  headerDiv.className = "diary-entry-header";
  
  const timeElem = document.createElement("time");
  timeElem.textContent = entry.date;
  headerDiv.appendChild(timeElem);
  
  // ì‚­ì œ ë²„íŠ¼
  const deleteBtn = document.createElement("button");
  deleteBtn.textContent = "ì‚­ì œ";
  deleteBtn.classList.add("delete-btn");
  deleteBtn.addEventListener("click", () => {
    if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
      div.remove();
      entries.splice(index, 1);
      saveDiaryEntriesFirestore(entries);
    }
  });
  headerDiv.appendChild(deleteBtn);
  
  // í—¤ë” ì»¨í…Œì´ë„ˆë¥¼ ë©”ì¸ divì— ì¶”ê°€
  div.appendChild(headerDiv);
  
  // ë©”ëª¨ ë‚´ìš©ì€ í—¤ë” ì•„ë˜ì— ì¶”ê°€
  const textElem = document.createElement("span");
  textElem.className = "diary-text";
  textElem.textContent = entry.text;
  div.appendChild(textElem);
  
  diaryEntriesContainer.appendChild(div);
});

  }).catch(err => console.error("íˆ¬ì ì¼ì§€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err));
}


// Firestoreì— ì „ì²´ íˆ¬ì ì¼ì§€ í•­ëª©ì„ ì €ì¥í•˜ëŠ” í•¨ìˆ˜
function saveDiaryEntriesFirestore(entries) {
  saveUserData("diaryEntries", { entries: entries })
    .then(() => {
      console.log("ë©”ëª¨ì¥ ì €ì¥ ì™„ë£Œ");
      loadDiaryEntriesFirestore();
    })
    .catch(err => console.error("íˆ¬ì ì¼ì§€ ì €ì¥ ì‹¤íŒ¨:", err));
}

// ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ ìˆ˜ì • (localStorage ëŒ€ì‹  Firestore í•¨ìˆ˜ í˜¸ì¶œ)
document.getElementById("saveDiaryBtn").addEventListener("click", () => {
  const diaryTextarea = document.getElementById("investmentDiary");
  const diaryText = diaryTextarea.value.trim();
  if (diaryText === "") {
    alert("ë©”ëª¨ì¥ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤!");
    return;
  }
  const now = new Date();
  const entry = { date: now.toLocaleString(), text: diaryText };
  appendDiaryEntryFirestore(entry);
  diaryTextarea.value = "";
});

  //ë‹¬ë ¥ ë©”ëª¨ * ì´ì „ë‹¬ ë‹¤ìŒë‹¬ ë²„íŠ¼ ë™ì‘*
  document.getElementById("prevMonthBtn").addEventListener("click", () => {
  currentMonth--;
  if (currentMonth < 0) {
    currentMonth = 11;
    currentYear--;
  }
  updateCalendarHeader();
  // êµ¬ë²„ì „ renderCalendar() ëŒ€ì‹ ì— íŒŒì´ì–´ìŠ¤í† ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
  loadCalendarMemosFirestore();
});

document.getElementById("nextMonthBtn").addEventListener("click", () => {
  currentMonth++;
  if (currentMonth > 11) {
    currentMonth = 0;
    currentYear++;
  }
  updateCalendarHeader();
  // êµ¬ë²„ì „ renderCalendar() ëŒ€ì‹ ì— íŒŒì´ì–´ìŠ¤í† ì–´ ë¶ˆëŸ¬ì˜¤ê¸°
  loadCalendarMemosFirestore();
});

    // ===== ë‹¬ë ¥ ë©”ëª¨ =====
    const today = new Date();
    let currentYear = today.getFullYear();
    let currentMonth = today.getMonth();
    
    function updateCalendarHeader() {
      const monthNames = ["1ì›”", "2ì›”", "3ì›”", "4ì›”", "5ì›”", "6ì›”", "7ì›”", "8ì›”", "9ì›”", "10ì›”", "11ì›”", "12ì›”"];
      document.getElementById("currentMonthDisplay").textContent = currentYear + "ë…„ " + monthNames[currentMonth];
    }
    function renderCalendar() {
      const calendarEl = document.getElementById("calendar");
      if (!calendarEl) return;
      calendarEl.innerHTML = "";
    
      const firstDay = new Date(currentYear, currentMonth, 1);
      const startDay = firstDay.getDay();
      const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
    
      let memos = localStorage.getItem("calendarMemos");
      memos = memos ? JSON.parse(memos) : {};
    
      const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
      weekdays.forEach(dayName => {
        const headerCell = document.createElement("div");
        headerCell.textContent = dayName;
        headerCell.style.fontWeight = "bold";
        calendarEl.appendChild(headerCell);
      });
    
      for (let i = 0; i < startDay; i++) {
        const blankCell = document.createElement("div");
        calendarEl.appendChild(blankCell);
      }
    
      for (let d = 1; d <= daysInMonth; d++) {
        const dateStr = currentYear + "-" + String(currentMonth + 1).padStart(2, "0") + "-" + String(d).padStart(2, "0");
        const dayCell = document.createElement("div");
        dayCell.classList.add("calendar-day");
        dayCell.dataset.date = dateStr;
    
        const dayNumber = document.createElement("span");
        dayNumber.classList.add("day-number");
        dayNumber.textContent = d;
        dayCell.appendChild(dayNumber);
    
        if (memos[dateStr] && memos[dateStr].trim() !== "") {
          const memoSpan = document.createElement("span");
          memoSpan.classList.add("memo-text");
          let text = memos[dateStr];
          if (text.length > 10) text = text.substring(0, 10) + "...";
          memoSpan.textContent = text;
          dayCell.appendChild(memoSpan);
          dayCell.classList.add("has-memo");
        }
        dayCell.addEventListener("click", () => { openMemoModal(dateStr, memos[dateStr] || ""); });
        calendarEl.appendChild(dayCell);
      }
    }
    function openMemoModal(dateStr, memoText) {
      selectedCalendarDate = dateStr;
      document.getElementById("modalTitle").textContent = "ë©”ëª¨ ì…ë ¥ (" + dateStr + ")";
      document.getElementById("modalTextarea").value = memoText;
      document.getElementById("memoModal").classList.add("active");
    }
    function closeMemoModal() {
  const modal = document.getElementById("memoModal");
  if (modal) {
    modal.classList.remove("active");
    // ì—´ ë•Œ bodyì˜ ìŠ¤í¬ë¡¤ ë§‰ì•˜ë‹¤ë©´, ì—¬ê¸°ì„œ í•´ì œ
    document.body.style.overflow = "";
  }
}

    //ë©”ëª¨ì¥
    function appendDiaryEntryFirestore(newEntry) {
  loadUserData("diaryEntries").then(doc => {
    let entries = [];
    if (doc.exists) {
      entries = doc.data().entries || [];
    }
    entries.push(newEntry);
    return saveUserData("diaryEntries", { entries: entries });
  }).then(() => {
    console.log("ë©”ëª¨ì¥ ì €ì¥ ì™„ë£Œ");
    loadDiaryEntriesFirestore(); // Firestoreì—ì„œ ìµœì‹  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ UIì— ë°˜ì˜
  }).catch(err => console.error("íˆ¬ì ì¼ì§€ ì €ì¥ ì‹¤íŒ¨:", err));
}
document.getElementById("saveDiaryBtn").addEventListener("click", () => {
  const diaryTextarea = document.getElementById("investmentDiary");
  const diaryText = diaryTextarea.value.trim();
  if (diaryText === "") {
    alert("ë©”ëª¨ì¥ ì‘ì„± ì™„ë£Œ!");
    return;
  }
  const now = new Date();
  const entry = { date: now.toLocaleString(), text: diaryText };
  appendDiaryEntryFirestore(entry);
  diaryTextarea.value = "";
});

// --- Firestore ê¸°ë°˜ ê°€ê³„ë¶€ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ---
// Firestore ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜(loadUserData, saveUserData)ëŠ” ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.

// 1. ìƒˆë¡œìš´ ê°€ê³„ë¶€ í•­ëª©ì„ Firestoreì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
function appendAccountBookEntryFirestore(newEntry) {
  loadUserData("accountBookEntries")
    .then(doc => {
      let entries = [];
      if (doc && doc.exists) {
        entries = doc.data().entries || [];
      }
      entries.push(newEntry);
      return saveUserData("accountBookEntries", { entries: entries });
    })
    .then(() => {
      console.log("ê°€ê³„ë¶€ í•­ëª©ì´ Firestoreì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
      loadAccountBookEntriesFirestore(); // ì €ì¥ í›„ ìµœì‹  ë°ì´í„°ë¡œ UI ê°±ì‹ 
    })
    .catch(err => console.error("ê°€ê³„ë¶€ ì €ì¥ ì‹¤íŒ¨:", err));
}

// 2. Firestoreì—ì„œ ê°€ê³„ë¶€ í•­ëª©ë“¤ì„ ë¶ˆëŸ¬ì™€ í™”ë©´ì— ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function loadAccountBookEntriesFirestore() {
  loadUserData("accountBookEntries")
    .then(doc => {
      let entries = [];
      if (doc && doc.exists) {
        entries = doc.data().entries || [];
      }
      renderAccountBookEntries(entries);
      updateAccountBookSummary(entries);
    })
    .catch(err => console.error("ê°€ê³„ë¶€ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err));
}

// 3. ë¶ˆëŸ¬ì˜¨ í•­ëª©ë“¤ì„ í…Œì´ë¸” í˜•ì‹ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function renderAccountBookEntries(entries) {
  const tableContainer = document.getElementById("ab-entries");
  tableContainer.innerHTML = "";
  if (entries.length === 0) {
    tableContainer.innerHTML = "<p>ë“±ë¡ëœ ê°€ê³„ë¶€ í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p>";
    return;
  }
  const table = document.createElement("table");
  const thead = document.createElement("thead");
  thead.innerHTML = "<tr><th>ë‚ ì§œ</th><th>êµ¬ë¶„</th><th>ì¹´í…Œê³ ë¦¬</th><th>ê¸ˆì•¡</th><th>ì„¤ëª…</th><th>ì‚­ì œ</th></tr>";
  table.appendChild(thead);
  const tbody = document.createElement("tbody");
  entries.forEach((entry, index) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${entry.date}</td>
      <td>${entry.type === "income" ? "ìˆ˜ì…" : "ì§€ì¶œ"}</td>
      <td>${entry.category}</td>
      <td>${Number(entry.amount).toLocaleString()} ì›</td>
      <td>${entry.description}</td>
      <td><button class="delete-entry">ì‚­ì œ</button></td>
    `;
    // ì‚­ì œ ë²„íŠ¼ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ìˆ˜ì •:
    tr.querySelector(".delete-entry").addEventListener("click", () => {
      if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        // 1. DOMì—ì„œ í•´ë‹¹ í–‰ ì¦‰ì‹œ ì œê±°
        tr.remove();
        // 2. ë°°ì—´ì—ì„œë„ í•´ë‹¹ í•­ëª© ì œê±°
        entries.splice(index, 1);
        // 3. Firestoreì— ì—…ë°ì´íŠ¸ (Promise ë°˜í™˜)
        saveAccountBookEntriesFirestore(entries)
          .then(() => console.log("ê°€ê³„ë¶€ í•­ëª© ì‚­ì œ ë° ì—…ë°ì´íŠ¸ ì™„ë£Œ"))
          .catch(err => console.error("ê°€ê³„ë¶€ ì‚­ì œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", err));
      }
    });
    tbody.appendChild(tr);
  });
  table.appendChild(tbody);
  tableContainer.appendChild(table);
}


// 4. ê°€ê³„ë¶€ í•­ëª© ì „ì²´ ë°°ì—´ì„ Firestoreì— ì €ì¥í•˜ê³  UI ê°±ì‹ í•˜ëŠ” í•¨ìˆ˜
function saveAccountBookEntriesFirestore(entries) {
  saveUserData("accountBookEntries", { entries: entries })
    .then(() => {
      console.log("ê°€ê³„ë¶€ í•­ëª©ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.");
      loadAccountBookEntriesFirestore();
    })
    .catch(err => console.error("ê°€ê³„ë¶€ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", err));
}

// 5. ê°€ê³„ë¶€ ìš”ì•½(ì´ ìˆ˜ì…, ì´ ì§€ì¶œ, ì”ì•¡)ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
function updateAccountBookSummary(entries) {
  let totalIncome = 0;
  let totalExpense = 0;
  entries.forEach(entry => {
    const amt = Number(entry.amount);
    if (entry.type === "income") {
      totalIncome += amt;
    } else {
      totalExpense += amt;
    }
  });
  const net = totalIncome - totalExpense;

  const summaryDiv = document.getElementById("ab-summary");
  summaryDiv.innerHTML = `
    <p>ì´ ìˆ˜ì…: ${totalIncome.toLocaleString()} ì›</p>
    <p>ì´ ì§€ì¶œ: ${totalExpense.toLocaleString()} ì›</p>
    <p><strong>ì”ì•¡: ${net.toLocaleString()} ì›</strong></p>
  `;
}


// 6. ê°€ê³„ë¶€ ëª¨ë‹¬ì˜ ì €ì¥ ë²„íŠ¼(ì˜ˆ: "ab-addBtn")ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì—°ê²°í•˜ì—¬
//    ì…ë ¥ëœ í•­ëª©ì„ Firestoreì— ì €ì¥í•˜ë„ë¡ í•¨
document.getElementById("ab-addBtn").addEventListener("click", () => {
  const dateInput = document.getElementById("ab-date");
  const typeSelect = document.getElementById("ab-type");
  const categoryInput = document.getElementById("ab-category");
  const amountInput = document.getElementById("ab-amount");
  const descriptionInput = document.getElementById("ab-description");
  
  const date = dateInput.value;
  const type = typeSelect.value;
  const category = categoryInput.value.trim();
  const amount = amountInput.value.replace(/,/g, "").trim();
  const description = descriptionInput.value.trim();
  
  if (!date || !category || !amount || isNaN(amount)) {
    alert("ë‚ ì§œ, ì¹´í…Œê³ ë¦¬, ê¸ˆì•¡ì€ í•„ìˆ˜ í•­ëª©ì…ë‹ˆë‹¤. ê¸ˆì•¡ì€ ìˆ«ìì—¬ì•¼ í•©ë‹ˆë‹¤.");
    return;
  }
  
  const newEntry = { date, type, category, amount, description };
  appendAccountBookEntryFirestore(newEntry);
  
  // ì…ë ¥ í›„ ëª¨ë‹¬ì˜ ì…ë ¥ í•„ë“œë¥¼ ì´ˆê¸°í™”í•˜ê±°ë‚˜ ëª¨ë‹¬ì„ ë‹«ì„ ìˆ˜ ìˆìŒ
  // ì˜ˆ: dateInput.value = ""; categoryInput.value = ""; ...
});

// 7. ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ Firestoreì—ì„œ ìµœì‹  ê°€ê³„ë¶€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ í™”ë©´ì— ë°˜ì˜
// (ëª¨ë‹¬ì´ ì—´ë¦¬ëŠ” ì´ë²¤íŠ¸ì— ë§ì¶° loadAccountBookEntriesFirestore() í˜¸ì¶œ)
document.getElementById("accountBookModal").addEventListener("show", () => {
  loadAccountBookEntriesFirestore();
});
// Firestoreì— ê³ ì •ì§€ì¶œ ë°°ì—´ì„ ì €ì¥í•˜ëŠ” í•¨ìˆ˜
function saveFixedExpensesFirestore(fixedExpenses) {
  saveUserData("fixedExpenses", { fixedExpenses: fixedExpenses })
    .then(() => {
      console.log("ê³ ì • ì§€ì¶œ ì €ì¥ ì™„ë£Œ");
      loadFixedExpensesFirestore();
    })
    .catch(err => console.error("ê³ ì • ì§€ì¶œ ì €ì¥ ì‹¤íŒ¨:", err));
}

// Firestoreì—ì„œ ê³ ì •ì§€ì¶œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ í™”ë©´ì— ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function loadFixedExpensesFirestore() {
  loadUserData("fixedExpenses")
    .then(doc => {
      let fixedExpenses = [];
      if (doc && doc.exists) {
        fixedExpenses = doc.data().fixedExpenses || [];
      }
      renderFixedExpenses(fixedExpenses);
    })
    .catch(err => console.error(err));
}

// ë¶ˆëŸ¬ì˜¨ ê³ ì •ì§€ì¶œ ë°ì´í„°ë¥¼ í™”ë©´ì— ì¶œë ¥í•˜ê³  ì´í•© ê³„ì‚°
function renderFixedExpenses(fixedExpenses) {
  const fixedExpenseList = document.getElementById("fixedExpenseList");
  const fixedExpenseTotalEl = document.getElementById("fixedExpenseTotal");
  fixedExpenseList.innerHTML = "";
  let total = 0;
  fixedExpenses.forEach((expense, index) => {
    total += Number(expense.amount);
    const div = document.createElement("div");
    div.style.display = "flex";
    div.style.justifyContent = "space-between";
    div.style.alignItems = "center";
    div.style.marginBottom = "5px";
    div.innerHTML = `<span>${expense.description}: ${Number(expense.amount).toLocaleString()} ì›</span>`;
    
    const delBtn = document.createElement("button");
    delBtn.textContent = "ì‚­ì œ";
    delBtn.addEventListener("click", () => {
      if (confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        // DOMì—ì„œ ë°”ë¡œ ì‚­ì œí•˜ì—¬ ì¦‰ì‹œ UI ë°˜ì˜
        div.remove();
        // ë°°ì—´ì—ì„œë„ í•´ë‹¹ í•­ëª© ì œê±°
        fixedExpenses.splice(index, 1);
        // Firestore ì—…ë°ì´íŠ¸ í›„, ì „ì²´ ë¦¬ìŠ¤íŠ¸ ì¬ë Œë”ë§í•˜ì—¬ ì´í•© ì—…ë°ì´íŠ¸
        saveFixedExpensesFirestore(fixedExpenses)
          .then(() => {
            renderFixedExpenses(fixedExpenses);
          })
          .catch(err => console.error("ê³ ì • ì§€ì¶œ ì‚­ì œ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:", err));
      }
    });
    div.appendChild(delBtn);
    fixedExpenseList.appendChild(div);
  });
  fixedExpenseTotalEl.textContent = "ì´ ê³ ì • ì§€ì¶œ: " + total.toLocaleString() + " ì›";
}


document.getElementById("addFixedExpenseBtn").addEventListener("click", () => {
  const fixedExpenseDescription = document.getElementById("fixedExpenseDescription");
  const fixedExpenseAmount = document.getElementById("fixedExpenseAmount");
  const description = fixedExpenseDescription.value.trim();
  const amountStr = fixedExpenseAmount.value.replace(/,/g, "").trim();

  if (description === "" || amountStr === "" || isNaN(amountStr)) {
    alert("ìœ íš¨í•œ ì§€ì¶œ í•­ëª©ê³¼ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.");
    return;
  }

  // ë¨¼ì € í˜„ì¬ ì €ì¥ëœ ê³ ì •ì§€ì¶œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
  loadUserData("fixedExpenses")
    .then(doc => {
      let fixedExpenses = [];
      if (doc && doc.exists) {
        fixedExpenses = doc.data().fixedExpenses || [];
      }
      const newExpense = { description: description, amount: Number(amountStr) };
      fixedExpenses.push(newExpense);

      // 1) ìƒˆ í•­ëª©ì´ ì¶”ê°€ëœ fixedExpenses ë°°ì—´ë¡œ UI ì¦‰ì‹œ ê°±ì‹ 
      renderFixedExpenses(fixedExpenses);

      // 2) Firestoreì— ì €ì¥
      return saveFixedExpensesFirestore(fixedExpenses);
    })
    .then(() => {
      // ì…ë ¥ í¼ ì´ˆê¸°í™”
      fixedExpenseDescription.value = "";
      fixedExpenseAmount.value = "";
      // ì„ íƒì‚¬í•­: ì €ì¥ í›„ Firestoreì—ì„œ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ UIë¥¼ ë™ê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      // loadFixedExpensesFirestore();
    })
    .catch(err => console.error(err));
});

// Firestoreì—ì„œ ê°€ê³„ë¶€ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ì›”ë³„ ë³´ê³ ì„œë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜
function generateMonthlyReportFirestore() {
  loadUserData("accountBookEntries")
    .then(doc => {
      let entries = [];
      if (doc && doc.exists) {
        entries = doc.data().entries || [];
      }
      const monthlyData = {};
      // ê° í•­ëª©ì˜ ë‚ ì§œì—ì„œ "YYYY-MM" ë¶€ë¶„ì„ ì¶”ì¶œí•˜ì—¬ ì›”ë³„ ì§‘ê³„
      entries.forEach(entry => {
        const monthKey = entry.date.slice(0, 7);
        if (!monthlyData[monthKey]) {
          monthlyData[monthKey] = { income: 0, expense: 0 };
        }
        const amount = Number(entry.amount);
        if (entry.type === "income") {
          monthlyData[monthKey].income += amount;
        } else {
          monthlyData[monthKey].expense += amount;
        }
      });
      const months = Object.keys(monthlyData).sort();
      const incomes = months.map(month => monthlyData[month].income);
      const expenses = months.map(month => monthlyData[month].expense);
      renderMonthlyReportSummary(monthlyData, months);
      renderMonthlyReportChart(months, incomes, expenses);
    })
    .catch(err => console.error(err));
}

// ì›”ë³„ ë³´ê³ ì„œ ìš”ì•½ ì •ë³´ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function renderMonthlyReportSummary(monthlyData, months) {
  if (months.length === 0) {
    document.getElementById("reportSummary").innerHTML = "<p>ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
    return;
  }
  const latestMonth = months[months.length - 1];
  const data = monthlyData[latestMonth];
  const net = data.income - data.expense;
  const reportSummary = document.getElementById("reportSummary");
  reportSummary.innerHTML = `
    <h4>${latestMonth} ë³´ê³ ì„œ</h4>
    <p>ì´ ìˆ˜ì…: ${data.income.toLocaleString()} ì›</p>
    <p>ì´ ì§€ì¶œ: ${data.expense.toLocaleString()} ì›</p>
    <p><strong>ìˆœì´ìµ: ${net.toLocaleString()} ì›</strong></p>
  `;
}

// Chart.jsë¥¼ ì‚¬ìš©í•˜ì—¬ ì›”ë³„ ë³´ê³ ì„œ ì°¨íŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function renderMonthlyReportChart(months, incomes, expenses) {
  const ctx = document.getElementById("incomeExpenseChart").getContext("2d");
  // ê¸°ì¡´ ì°¨íŠ¸ê°€ ìˆìœ¼ë©´ íŒŒê´´
  if (incomeExpenseChart) {
    incomeExpenseChart.destroy();
  }
  incomeExpenseChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: months,
      datasets: [
        {
          label: 'ìˆ˜ì…',
          data: incomes,
          backgroundColor: 'rgba(54, 162, 235, 0.6)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        },
        {
          label: 'ì§€ì¶œ',
          data: expenses,
          backgroundColor: 'rgba(255, 99, 132, 0.6)',
          borderColor: 'rgba(255, 99, 132, 1)',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom', labels: { color: getTextColor("#000", "#fff") } },
        title: { display: true, text: 'ì›”ë³„ ìˆ˜ì…/ì§€ì¶œ ë³´ê³ ì„œ', color: getTextColor("#000", "#fff") }
      },
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return value.toLocaleString() + " ì›";
            },
            color: getTextColor("#000", "#fff")
          }
        }
      }
    }
  });
}

// ì›”ë³„ ë³´ê³ ì„œ ìƒì„± ë²„íŠ¼ ì´ë²¤íŠ¸ (ì˜ˆ: "generateReportBtn")
document.getElementById("generateReportBtn").addEventListener("click", generateMonthlyReportFirestore);


    // ===== ê°œë°œì ë„êµ¬ ë° ìš°í´ë¦­ ì°¨ë‹¨ =====
    document.addEventListener("keydown", function(event) {
      if (event.ctrlKey && (event.key === "u" || event.key === "U" || event.key === "s" || event.key === "S")) { event.preventDefault(); }
      if ((event.ctrlKey && event.shiftKey && event.key === "I") || (event.ctrlKey && event.shiftKey && event.key === "J")) { event.preventDefault(); }
    });
    document.addEventListener("contextmenu", function(event) { event.preventDefault(); });

    // ===== íƒ­ ì „í™˜ ë° To Do List ê¸°ëŠ¥ =====
    const tabLinks = document.querySelectorAll('.tab-link');
    tabLinks.forEach(link => {
      link.addEventListener('click', () => {
        tabLinks.forEach(item => item.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => {
          content.style.display = 'none';
        });
        link.classList.add('active');
        const tabId = link.getAttribute('data-tab');
        document.getElementById(tabId).style.display = 'block';
      });
    });

    document.addEventListener("DOMContentLoaded", () => {
      loadAssetPortfolio();
      loadStockPortfolio();
      updateAssetChart();
      updateStockChart();
      loadAssetGoal();
      loadFixedExpensesFirestore(); // ê³ ì • ì§€ì¶œ ë°ì´í„° ì¦‰ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
      addCommaFormatting(document.getElementById("assetGoalInput"));
      const dateInput = document.getElementById("ab-date");
      const today = new Date().toISOString().split("T")[0];
      dateInput.value = today;
      addCommaFormatting(document.getElementById("ab-amount"));
      const storedYear = localStorage.getItem("calendarCurrentYear");
      const storedMonth = localStorage.getItem("calendarCurrentMonth");
      if (storedYear !== null && storedMonth !== null) {
        currentYear = Number(storedYear);
        currentMonth = Number(storedMonth);
      }
      updateCalendarHeader();
      renderCalendar();
      updateTargetRatioFields();
    });

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        const openModal = document.querySelector(".modal.active");
        if (openModal) {
          openModal.classList.remove("active");
          document.body.style.overflow = "";
        }
      }
    });

    document.addEventListener("click", (e) => {
      if (e.target.classList.contains("modal") && e.target.classList.contains("active")) {
        e.target.classList.remove("active");
        document.body.style.overflow = "";
      }
    });

    function getSecretKey() { return "my-secret-key"; }
    console.log(getSecretKey());

    document.addEventListener('DOMContentLoaded', () => {
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
          document.body.classList.add('dark-mode');
        }
      });

      document.addEventListener('touchmove', function(e) {
        if (document.body.classList.contains("modal-open")) {
          e.preventDefault();
        }
      }, { passive: false });

    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('a.nav-link').forEach(a => {
        a.style.webkitTapHighlightColor = 'transparent';
      });
      document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          link.classList.add('pressed');
          setTimeout(() => {
            window.location.href = link.getAttribute('href');
          }, 100);
        });
      });
    });

    // í˜ì´ì§€ ë¡œë“œ í›„ 'loaded' í´ë˜ìŠ¤ë¥¼ ì¶”ê°€
window.addEventListener('load', function() {
  document.body.classList.add('loaded');
});
function createTodoListItem(text) {
  const li = document.createElement("li");
  li.className = "todo-item";
  
  const checkbox = document.createElement("input");
  checkbox.type = "checkbox";
  checkbox.className = "todo-checkbox";
  checkbox.addEventListener("change", saveTodoList);
  li.appendChild(checkbox);
  
  const span = document.createElement("span");
  span.classList.add("todo-text");
  span.textContent = text;
  // í•  ì¼ í…ìŠ¤íŠ¸ë¥¼ í´ë¦­í•˜ë©´ ë°”ë¡œ ìˆ˜ì •í•  ìˆ˜ ìˆë„ë¡ contentEditable ì„¤ì •
  span.contentEditable = "true";
  span.spellcheck = false;
  // ìˆ˜ì • í›„ í¬ì»¤ìŠ¤ê°€ ë²—ì–´ë‚˜ë©´ ì €ì¥ ì²˜ë¦¬
  span.addEventListener("blur", () => {
      saveTodoList();
  });
  li.appendChild(span);
  
  const delBtn = document.createElement("button");
  delBtn.textContent = "ì‚­ì œ";
  delBtn.className = "delete-btn";
  delBtn.addEventListener("click", () => { 
    li.remove(); 
    saveTodoList();
  });
  li.appendChild(delBtn);
  
  return li;
}
document.addEventListener("DOMContentLoaded", function () {
  const loginContainer = document.querySelector(".login-container");
  const profileBox = document.getElementById("profileBox");
  const authButton = document.getElementById("authButton");

  const isLoggedIn = localStorage.getItem("isLoggedIn") === "true"; // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸

  if (isLoggedIn) {
    loginContainer.classList.add("logged-in");
    authButton.innerHTML = '<i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ';
    authButton.href = "#"; // ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ì„ ìœ„í•´ ë§í¬ ì œê±°
    authButton.style.display = "none"; // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ (í”„ë¡œí•„ í´ë¦­ ì‹œ ë³´ì´ë„ë¡ ì„¤ì •)
  } else {
    loginContainer.classList.remove("logged-in");
    authButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> ë¡œê·¸ì¸';
    authButton.href = "login.html";
    authButton.style.display = "inline-block";
  }

  // í”„ë¡œí•„ ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
  profileBox.addEventListener("click", function () {
    if (isLoggedIn) {
      loginContainer.classList.toggle("active"); // active í´ë˜ìŠ¤ í† ê¸€
      authButton.style.display = loginContainer.classList.contains("active") ? "inline-block" : "none";
    }
  });

  // ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ë¡œê·¸ì•„ì›ƒ ì‹¤í–‰
  authButton.addEventListener("click", function (event) {
    if (isLoggedIn) {
      event.preventDefault();
      localStorage.setItem("isLoggedIn", "false");
      window.location.reload(); // ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ UI ë³€ê²½ ë°˜ì˜
    }
  });
});

    // Back to Top ë²„íŠ¼ ê¸°ëŠ¥
    const backToTopBtn = document.getElementById("backToTop");
    window.addEventListener("scroll", () => {
      if (window.pageYOffset > 300) {
        backToTopBtn.classList.add("show");
      } else {
        backToTopBtn.classList.remove("show");
      }
    });
    backToTopBtn.addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

  </script>
    <!-- ========== Firebase Firestore ê¸°ë°˜ To Do List ìˆ˜ì • ë¶€ë¶„ (ìƒëµ ì—†ì´ ì „ì²´ ì½”ë“œ) ========== -->
  <!-- Firebase SDK (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script>
    // â˜… Firebase ì„¤ì • (ë³¸ì¸ì˜ ê°’ìœ¼ë¡œ ìˆ˜ì •) â˜…
    var firebaseConfig = {
      apiKey: "AIzaSyCgFLtAo8LETpHq44hxlT7QigCbIltk-Zk",
      authDomain: "gohigher-55e51.firebaseapp.com",
      projectId: "gohigher-55e51",
      storageBucket: "gohigher-55e51.firebasestorage.app",
      messagingSenderId: "487435343721",
      appId: "1:487435343721:web:dc5708c3a263214fba4ff8",
      measurementId: "G-KQ02L8DXG0"
    };
    firebase.initializeApp(firebaseConfig);
    var db = firebase.firestore();
    var auth = firebase.auth();

    // Firestoreì—ì„œ To Do List ì‹¤ì‹œê°„ ë¶ˆëŸ¬ì˜¤ê¸°
    function loadTodoListFirestore() {
      var user = auth.currentUser;
      if (!user) return;
      var todoListEl = document.getElementById("todoList");
      db.collection("users").doc(user.uid).collection("todoListItems")
        .onSnapshot(function(snapshot){
          todoListEl.innerHTML = "";
          snapshot.forEach(function(doc){
            var item = doc.data();
            var li = createTodoListItem(item.text);
            li.querySelector("input[type='checkbox']").checked = item.checked;
            // ë¬¸ì„œ ID ì €ì¥ì´ í•„ìš”í•˜ë©´ li.dataset.docId = doc.id;
            todoListEl.appendChild(li);
          });
        }, function(error){
          console.error("Firestoreì—ì„œ To Do List ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
        });
    }

    // Firestoreì— To Do List ì „ì²´ ì €ì¥ (ì „ì²´ ë®ì–´ì“°ê¸° ë°©ì‹)
    function saveTodoListFirestore() {
      var user = auth.currentUser;
      if (!user) return;
      var todoListEl = document.getElementById("todoList");
      var items = [];
      todoListEl.querySelectorAll("li").forEach(function(li){
        var text = li.querySelector(".todo-text").textContent;
        var checked = li.querySelector("input[type='checkbox']").checked;
        items.push({ text: text, checked: checked });
      });
      var colRef = db.collection("users").doc(user.uid).collection("todoListItems");
      colRef.get().then(function(querySnapshot){
        var batch = db.batch();
        querySnapshot.forEach(function(doc){
          batch.delete(doc.ref);
        });
        items.forEach(function(item){
          var newDocRef = colRef.doc();
          batch.set(newDocRef, item);
        });
        return batch.commit();
      }).then(function(){
        console.log("Firestoreì— To Do List ì €ì¥ ì™„ë£Œ");
      }).catch(function(error){
        console.error("Firestoreì— To Do List ì €ì¥ ì‹¤íŒ¨:", error);
      });
    }

    // ë¡œê·¸ì¸ ìƒíƒœ ë³€í™”ì— ë”°ë¼ Firestore ê¸°ë°˜ í•¨ìˆ˜ë¡œ ì˜¤ë²„ë¼ì´ë“œ
    auth.onAuthStateChanged(function(user) {
      if (user) {
        window.loadTodoList = loadTodoListFirestore;
        window.saveTodoList = saveTodoListFirestore;
        loadTodoListFirestore();
      }
    });
    </script>
    <!-- Firebase ì„¤ì • ë° SDKëŠ” ì´ë¯¸ í¬í•¨ë˜ì–´ ìˆë‹¤ê³  ê°€ì • -->
<script>
  // --- Firestore ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ---
  function saveUserData(docName, data) {
    const user = auth.currentUser;
    if (!user) return Promise.reject("ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");
    return db.collection("users").doc(user.uid)
             .collection("data").doc(docName).set(data);
  }
  
  function loadUserData(docName) {
    const user = auth.currentUser;
    if (!user) return Promise.resolve(null);
    return db.collection("users").doc(user.uid)
             .collection("data").doc(docName).get();
  }
  
  // --- ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ ---
  function loadAssetPortfolioFirestore() {
    loadUserData("assetPortfolio").then(doc => {
      let assets = [];
      if (doc.exists) {
        assets = doc.data().assets || [];
      } else {
        // ê¸°ë³¸ ë°ì´í„° ì„¤ì • (ì—†ì„ ê²½ìš°)
        assets = [
          { name: "í˜„ê¸ˆ", amount: 0 },
          { name: "ì±„ê¶Œ", amount: 0 },
          { name: "ë¶€ë™ì‚°", amount: 0 },
          { name: "ì£¼ì‹", amount: 0 },
          { name: "ê¸°íƒ€", amount: 0 }
        ];
        saveAssetPortfolioFirestore(assets);
      }
      // UIì— ë°ì´í„° ë°˜ì˜
      const container = document.getElementById("assetItemsContainer");
      container.innerHTML = "";
      assets.forEach(asset => container.appendChild(createAssetItem(asset)));
      updateTargetRatioFields();
      updateAssetChart();
    }).catch(err => console.error(err));
  }
  
  function saveAssetPortfolioFirestore(assets) {
    saveUserData("assetPortfolio", { assets: assets })
      .then(() => { console.log("ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error("ì €ì¥ ì‹¤íŒ¨:", err));
  }

  
  // ìì‚° í¬íŠ¸í´ë¦¬ì˜¤ ì—…ë°ì´íŠ¸(í˜„ì¬ UI ì…ë ¥ê°’ì„ ëª¨ì•„ì„œ Firestoreì— ì €ì¥)
  function updateAssetPortfolioFirestore() {
    const container = document.getElementById("assetItemsContainer");
    const assetItems = container.querySelectorAll(".asset-item");
    let assets = [];
    assetItems.forEach(item => {
      const inputs = item.querySelectorAll("input");
      const name = inputs[0].value.trim();
      const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
      assets.push({ name, amount });
    });
    saveAssetPortfolioFirestore(assets);
  }
  
  // --- ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ ---
  function loadStockPortfolioFirestore() {
    loadUserData("stockPortfolio").then(doc => {
      let stocks = [];
      if (doc.exists) {
        stocks = doc.data().stocks || [];
      } else {
        stocks = [{ name: "", amount: 0 }, { name: "", amount: 0 }];
        saveStockPortfolioFirestore(stocks);
      }
      const stockList = document.getElementById("stockList");
      stockList.innerHTML = "";
      stocks.forEach(stock => stockList.appendChild(createStockItem(stock)));
      updateStockChart();
    }).catch(err => console.error(err));
  }
  
  function saveStockPortfolioFirestore(stocks) {
    saveUserData("stockPortfolio", { stocks: stocks })
      .then(() => { console.log("ì£¼ì‹ í¬íŠ¸í´ë¦¬ì˜¤ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error("ì €ì¥ ì‹¤íŒ¨:", err));
  }
  
  function updateStockPortfolioFirestore() {
    const stockList = document.getElementById("stockList");
    const stockItems = stockList.querySelectorAll(".stock-item");
    let stocks = [];
    stockItems.forEach(item => {
      const inputs = item.querySelectorAll("input");
      const name = inputs[0].value.trim();
      const amount = Number(inputs[1].value.replace(/,/g, "")) || 0;
      stocks.push({ name, amount });
    });
    saveStockPortfolioFirestore(stocks);
  }
  
  // --- ìì‚° ëª©í‘œ ---
  function loadAssetGoalFirestore() {
    loadUserData("assetGoal").then(doc => {
      const display = document.getElementById("assetGoalDisplay");
      if (doc.exists && doc.data().goal) {
        display.textContent = "í˜„ì¬ ëª©í‘œ: " + Number(doc.data().goal).toLocaleString() + " ì›";
      } else {
        display.textContent = "ìì‚° ëª©í‘œê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.";
      }
      updateAssetGoalProgress();
    });
  }
  
  function saveAssetGoalFirestore(goal) {
    saveUserData("assetGoal", { goal: goal })
      .then(() => { console.log("ìì‚° ëª©í‘œ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error(err));
  }
  
  
  function saveDiaryEntriesFirestore(entries) {
    saveUserData("diaryEntries", { entries: entries })
      .then(() => { console.log("íˆ¬ì ì¼ì§€ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error(err));
  }
  
  // --- ë‹¬ë ¥ ë©”ëª¨ ---
// Firestoreì—ì„œ ìº˜ë¦°ë” ë©”ëª¨ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function loadCalendarMemosFirestore() {
  loadUserData("calendarMemos").then(doc => {
    let memos = {};
    if (doc && doc.exists) {
      memos = doc.data().memos || {};
    }
    renderCalendarWithMemos(memos);
  }).catch(err => {
    console.error("ìº˜ë¦°ë” ë©”ëª¨ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", err);
    renderCalendarWithMemos({}); // ì‹¤íŒ¨ ì‹œ ë¹ˆ ê°ì²´ë¡œ ë Œë”ë§
  });
}


// Firestoreì— ìº˜ë¦°ë” ë©”ëª¨ ì €ì¥ (ê¸°ì¡´ê³¼ ë™ì¼)
function saveCalendarMemoFirestore(dateStr, memoText) {
  // loadUserData(...)ì˜ Promiseë¥¼ returní•´ì•¼ í•©ë‹ˆë‹¤.
  return loadUserData("calendarMemos")
    .then(doc => {
      let memos = {};
      if (doc && doc.exists) {
        memos = doc.data().memos || {};
      }
      memos[dateStr] = memoText;
      // saveUserData(...)ë„ returní•´ì„œ ì²´ì´ë‹
      return saveUserData("calendarMemos", { memos: memos });
    })
    .then(() => {
      console.log("ìº˜ë¦°ë” ë©”ëª¨ ì €ì¥ ì™„ë£Œ");
    })
    .catch(err => console.error("ìº˜ë¦°ë” ë©”ëª¨ ì €ì¥ ì‹¤íŒ¨:", err));
}


// ê¸°ì¡´ renderCalendar í•¨ìˆ˜ ëŒ€ì‹ , Firestoreì—ì„œ ë¶ˆëŸ¬ì˜¨ memosë¥¼ ì¸ìë¡œ ë°›ì•„ ìº˜ë¦°ë”ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜
function renderCalendarWithMemos(memos) {
  const calendarEl = document.getElementById("calendar");
  if (!calendarEl) return;
  calendarEl.innerHTML = "";
  
  const firstDay = new Date(currentYear, currentMonth, 1);
  const startDay = firstDay.getDay();
  const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();
  
  const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
  weekdays.forEach(dayName => {
    const headerCell = document.createElement("div");
    headerCell.textContent = dayName;
    headerCell.style.fontWeight = "bold";
    calendarEl.appendChild(headerCell);
  });
  
  for (let i = 0; i < startDay; i++) {
    const blankCell = document.createElement("div");
    calendarEl.appendChild(blankCell);
  }
  
  for (let d = 1; d <= daysInMonth; d++) {
    const dateStr = currentYear + "-" + String(currentMonth + 1).padStart(2, "0") + "-" + String(d).padStart(2, "0");
    const dayCell = document.createElement("div");
    dayCell.classList.add("calendar-day");
    dayCell.dataset.date = dateStr;
  
    const dayNumber = document.createElement("span");
    dayNumber.classList.add("day-number");
    dayNumber.textContent = d;
    dayCell.appendChild(dayNumber);
  
   // Firestoreì—ì„œ ë°›ì•„ì˜¨ memos ê°ì²´ë¥¼ ì‚¬ìš©
   if (memos[dateStr] && memos[dateStr].trim() !== "") {
      const memoSpan = document.createElement("span");
      memoSpan.classList.add("memo-text");
      let text = memos[dateStr];
      if (text.length > 10) text = text.substring(0, 10) + "...";
      memoSpan.textContent = text;
      dayCell.appendChild(memoSpan);
      dayCell.classList.add("has-memo");
    }
    dayCell.addEventListener("click", () => { openMemoModal(dateStr, memos[dateStr] || ""); });
    calendarEl.appendChild(dayCell);
  }
}

// ìˆ˜ì •ëœ ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸ (ìº˜ë¦°ë” ë©”ëª¨)
document.getElementById("saveModalBtn").addEventListener("click", () => {
  if (!selectedCalendarDate) return;

  const memoText = document.getElementById("modalTextarea").value;
  saveCalendarMemoFirestore(selectedCalendarDate, memoText)
    .then(() => {
      // 1) ëª¨ë‹¬ ë‹«ê¸°
      closeMemoModal(); // í˜¹ì€ closeModal('memoModal');

      // 2) ìµœì‹  ë©”ëª¨ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê¸°
      loadCalendarMemosFirestore();

      // 3) ì„ íƒ ë‚ ì§œ ì´ˆê¸°í™”
      selectedCalendarDate = null;
    })
    .catch(err => console.error("ìº˜ë¦°ë” ë©”ëª¨ ì €ì¥ ì‹¤íŒ¨:", err));
});


  
  // --- ê°€ê³„ë¶€ ---
  function loadAccountBookEntriesFirestore() {
    loadUserData("accountBookEntries").then(doc => {
      let entries = [];
      if (doc.exists) { entries = doc.data().entries || []; }
      renderAccountBookEntries(entries);
      updateAccountBookSummary(entries);
    });
  }
  
  function saveAccountBookEntriesFirestore(entries) {
    saveUserData("accountBookEntries", { entries: entries })
      .then(() => { console.log("ê°€ê³„ë¶€ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error(err));
  }
  
  // --- ê³ ì • ì§€ì¶œ ---
  function loadFixedExpensesFirestore() {
  loadUserData("fixedExpenses").then(doc => {
    let fixedExpenses = [];

    if (doc && doc.exists) {
      fixedExpenses = doc.data().fixedExpenses || [];
    }

    renderFixedExpenses(fixedExpenses);
  }).catch(error => {
    console.error("ğŸ”¥ loadFixedExpensesFirestore ì˜¤ë¥˜:", error);
    renderFixedExpenses([]); // ì˜¤ë¥˜ ìƒí™©ì—ì„œë„ UI ì´ˆê¸°í™”
  });
}

  
  function saveFixedExpensesFirestore(fixedExpenses) {
    saveUserData("fixedExpenses", { fixedExpenses: fixedExpenses })
      .then(() => { console.log("ê³ ì • ì§€ì¶œ ì €ì¥ ì™„ë£Œ"); })
      .catch(err => console.error(err));
  }
  
  // --- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ í•¨ìˆ˜ ì˜¤ë²„ë¼ì´ë“œ ---
  auth.onAuthStateChanged(function(user) {
    if (user) {
      // ê° ê¸°ëŠ¥ì„ Firestore ê¸°ë°˜ í•¨ìˆ˜ë¡œ ë®ì–´ì”ë‹ˆë‹¤.
      window.loadAssetPortfolio = loadAssetPortfolioFirestore;
      window.saveAssetPortfolio = updateAssetPortfolioFirestore;
      
      window.loadStockPortfolio = loadStockPortfolioFirestore;
      window.saveStockPortfolio = updateStockPortfolioFirestore;
      
      window.loadAssetGoal = loadAssetGoalFirestore;
      window.saveAssetGoal = function() {
        const input = document.getElementById("assetGoalInput");
        const goal = input.value.replace(/,/g, "").trim();
        if (goal === "" || isNaN(goal)) {
          alert("ìœ íš¨í•œ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”.");
          return;
        }
        saveAssetGoalFirestore(goal);
        loadAssetGoalFirestore();
        alert("ìì‚° ëª©í‘œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.");
      };
      
      window.loadDiaryEntries = loadDiaryEntriesFirestore;
      // íˆ¬ì ì¼ì§€ ì €ì¥ì€ saveDiaryEntriesFirestoreë¥¼ í˜¸ì¶œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½
      
      window.loadCalendarMemos = loadCalendarMemosFirestore;
      window.saveCalendarMemo = function() {
        if (!selectedCalendarDate) return;
        const memoText = document.getElementById("modalTextarea").value;
        saveCalendarMemoFirestore(selectedCalendarDate, memoText);
        closeMemoModal();
        loadCalendarMemosFirestore();
      };
      
      window.loadAccountBookEntries = loadAccountBookEntriesFirestore;
      window.saveAccountBookEntries = function() {
        // ê¸°ì¡´ ë¡œì§ìœ¼ë¡œ entries ë°°ì—´ì„ ëª¨ì•„ì„œ ì €ì¥ í›„ Firestoreì— ì—…ë°ì´íŠ¸
        let entries = []; // entries ìˆ˜ì§‘
        // ì˜ˆ: ê¸°ì¡´ í•¨ìˆ˜ì—ì„œ ìˆ˜ì§‘í•œ entriesë¥¼ ì‚¬ìš©
        saveAccountBookEntriesFirestore(entries);
      };
      
      window.loadFixedExpenses = loadFixedExpensesFirestore;
      window.saveFixedExpenses = function() {
        let fixedExpenses = []; // UIì—ì„œ ê³ ì • ì§€ì¶œ í•­ëª©ë“¤ì„ ìˆ˜ì§‘
        saveFixedExpensesFirestore(fixedExpenses);
      };
      
      // ì´ˆê¸° ë¡œë“œ
      loadAssetPortfolioFirestore();
      loadStockPortfolioFirestore();
      loadAssetGoalFirestore();
      loadDiaryEntriesFirestore();
      loadCalendarMemosFirestore();
      loadAccountBookEntriesFirestore();
      loadFixedExpensesFirestore();
    }
  });


</script>

</body>
</html>