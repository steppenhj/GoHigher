<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>2024 미국 배당주 추천 & 배당금 계산기 | ETF·블루칩·아리스토크라츠 · GoHigher</title>
<meta name="description" content="2024년 최신 미국 배당주 추천! ETF, 블루칩, 배당 챔피언·귀족·킹 종목과 카테고리별 수익률·배당금 정보, 누구나 쉽게 쓰는 실시간 배당금 계산기까지 제공합니다. 미국 배당주 투자, GoHigher와 함께 시작하세요.">
<meta name="keywords" content="미국 배당주, 배당주 추천, 미국 ETF, 배당 블루칩, 배당 귀족, 배당 챔피언, 배당 킹, 배당주 계산기, 연간 배당금, 미국주식 배당, 배당 투자, 월배당, VIG, SCHD, KO, JNJ, PG, MMM, APD, SWK, TROW, EMR, 고배당주, 배당 성장주, 2024, 미국 주식, 투자, GoHigher">

<!-- Open Graph (카카오/네이버/페북 등 대표 공유) -->
<meta property="og:title" content="2024 미국 배당주 추천 & 실시간 배당금 계산기 | GoHigher" />
<meta property="og:description" content="ETF·블루칩·배당 귀족·킹 등 미국 배당주를 카테고리별로 추천! 실제 배당금/수익률까지 실시간으로 계산해주는 똑똑한 투자 도구." />
<meta property="og:image" content="https://gohigher.kr/logo.jpg" />
<meta property="og:url" content="https://gohigher.kr/시리즈/배당주.html" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="GoHigher" />
<meta property="og:locale" content="ko_KR" />

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="2024 미국 배당주 추천 & 실시간 배당금 계산기 | GoHigher" />
<meta name="twitter:description" content="ETF·블루칩·배당 귀족·킹 등 미국 배당주를 카테고리별로 추천! 배당금·수익률을 쉽게 계산해보세요." />
<meta name="twitter:image" content="https://gohigher.kr/logo.jpg" />

<!-- Naver, Google 사이트 인증 (기존 유지) -->
<meta name="naver-site-verification" content="daa71973aba155bc2d96dfde44d8fb34b6a74ba7" />
<meta name="google-site-verification" content="GGuWsc5cbeYC9W0nQsN7550kWcUzArKuo3zfhjN5LXE" />

<!-- canonical 주소 -->
<link rel="canonical" href="https://gohigher.kr/시리즈/배당주.html" />

<!-- favicon (기존 유지) -->
<link rel="icon" href="/logo.jpg" type="image/jpeg" />
    
  <link rel="stylesheet" href="../navigation.css">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
    }

    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .page-header {
      margin-top: 5rem;
      text-align: center;
      margin-bottom: 3rem;
      color: #e9f1ff;
    }

    .page-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      text-shadow: 0 1.5px 8px #fff7, 0 0.5px 1.2px #b8e3ff33;
    }

    .page-header p {
      font-size: 1.1rem;
      opacity: 0.9;
      font-weight: 300;
      color: #c7dbff;
    }

    .content-grid {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    /* 카테고리 섹션 스타일 */
    .categories-section {
      background: rgba(28, 36, 52, 0.75);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 4px 32px 0 rgba(12,18,40,0.26), 0 1.5px 7px 0 rgba(50,55,82,0.12);
      backdrop-filter: blur(18px);
      border: 1.7px solid rgba(76,90,110,0.52);
    }

    .categories-section h2 {
      color: #e9f1ff;
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      text-align: center;
      font-weight: 600;
    }

    .category-card {
      background: rgba(32,38,60,0.97);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      border: 1.7px solid #233154;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .category-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #ffe066, #98bfff);
    }

    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 40px 0 rgba(30,38,85,0.19), 0 3px 12px 0 rgba(27,32,58,0.21);
    }

    .category-header {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
    }

    .category-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      font-size: 1.2rem;
    }

    .category-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: #e9f1ff;
      margin: 0;
    }

    .category-description {
      color: #c7dbff;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .stock-table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(28, 36, 52, 0.75);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .stock-table th {
      background: linear-gradient(90deg, #2c3855 50%, #3a4d77 110%);
      color: #e9f1ff;
      padding: 0.8rem;
      font-weight: 500;
      text-align: center;
      font-size: 0.9rem;
    }

    .stock-table td {
      padding: 0.8rem;
      text-align: center;
      border-bottom: 1px solid #233154;
      font-size: 0.9rem;
      color: #c7dbff;
    }

    .stock-table tr:hover {
      background: rgba(45,62,91,0.26);
    }

    .stock-table tr:last-child td {
      border-bottom: none;
    }

    .ticker {
      font-weight: 600;
      color: #98bfff;
    }

    .yield {
      font-weight: 600;
      color: #ffe066;
    }

    .dividend {
      font-weight: 600;
      color: #ffe066;
    }

    /* 계산기 섹션 스타일 */
    .calculator-section {
      background: rgba(28, 36, 52, 0.75);
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 4px 32px 0 rgba(12,18,40,0.26), 0 1.5px 7px 0 rgba(50,55,82,0.12);
      backdrop-filter: blur(18px);
      border: 1.7px solid rgba(76,90,110,0.52);
      height: fit-content;
      top: 2rem;
    }

    .calculator-section h2 {
      color: #e9f1ff;
      font-size: 1.8rem;
      margin-bottom: 1.5rem;
      text-align: center;
      font-weight: 600;
    }

    .calculator-form {
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }

    .form-group {
      display: flex;
      flex-direction: column;
    }

    .form-group label {
      font-weight: 500;
      color: #c7dbff;
      margin-bottom: 0.5rem;
      font-size: 0.95rem;
    }

    .form-group input,
    .form-group select {
      padding: 0.8rem;
      border: 1.2px solid #32436770;
      border-radius: 10px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: rgba(32,38,60,0.97);
      color: #c7dbff;
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: #ffe066;
      box-shadow: 0 0 0 3px rgba(255, 224, 102, 0.1);
    }

    .calculate-btn {
      background: linear-gradient(90deg, #2c3855 50%, #3a4d77 110%);
      color: #ffe066;
      border: 1.2px solid #ffe06690;
      padding: 1rem;
      border-radius: 10px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 0.5rem;
    }

    .calculate-btn:hover {
      transform: translateY(-2px);
      background: #ffe066;
      color: #222c42;
      box-shadow: 0 2px 12px 0 #98bfff40;
    }

    .calculate-btn:active {
      transform: translateY(0);
    }

    .result {
      margin-top: 1.5rem;
      padding: 1rem;
      background: rgba(32,38,60,0.97);
      border-radius: 10px;
      border-left: 4px solid #ffe066;
      font-weight: 500;
      color: #c7dbff;
      text-align: center;
      display: none;
    }

    .result.show {
      display: block;
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .price-growth-group {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 1rem;
}
.growth-inline-wrap {
  display: flex;
  align-items: center;
  gap: 0.4rem;
}
.growth-btn {
  background: linear-gradient(90deg, #2c3855 50%, #3a4d77 110%);
  color: #ffe066;
  border: 1.2px solid #ffe06690;
  border-radius: 8px;
  font-size: 1.15em;
  font-weight: bold;
  width: 34px;
  height: 34px;
  cursor: pointer;
  transition: all 0.18s;
  margin: 0 1px;
}
.growth-btn:hover {
  background: #ffe066;
  color: #222c42;
  box-shadow: 0 2px 10px 0 #98bfff22;
}
.growth-percent {
  min-width: 36px;
  display: inline-block;
  color: #ffe066 !important;
  font-size: 1.18em;
  font-weight: 600;
  letter-spacing: 0.02em;
  text-align: center;
}
.checkbox-row {
  display: flex;
  flex-direction: row;
  gap: 1.5rem;
  align-items: center;
  margin-top: 8px;
}
.checkbox-row label {
  margin-bottom: 0 !important;
  font-weight: 500;
  color: #c7dbff;
  font-size: 1em;
  display: flex;
  align-items: center;
}
.checkbox-row input[type="checkbox"] {
  accent-color: #ffe066;
  margin-right: 0.4em;
}

    /* 반응형 디자인 */
    @media (max-width: 1024px) {
      .content-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
      }
      
      .calculator-section {
        position: static;
      }
    }

    @media (max-width: 768px) {
      .main-container {
        padding: 1rem;
      }
      
      .page-header h1 {
        font-size: 2rem;
      }
      
      .categories-section,
      .calculator-section {
        padding: 1.5rem;
      }
      
      .stock-table {
        font-size: 0.8rem;
      }
      
      .stock-table th,
      .stock-table td {
        padding: 0.6rem 0.4rem;
      }
    }

    /* 카테고리별 아이콘 색상 */
    .icon-etf { background: linear-gradient(135deg, #98bfff, #667eea); }
    .icon-bluechip { background: linear-gradient(135deg, #ffe066, #f6ad55); }
    .icon-achievers { background: linear-gradient(135deg, #f6ad55, #ed8936); }
    .icon-aristocrats { background: linear-gradient(135deg, #c6f6d5, #9ae6b4); }
    .icon-kings { background: linear-gradient(135deg, #fed7d7, #feb2b2); }
  </style>
</head>
<body>
  <!-- 네비게이션 -->
<nav class="nav">
  <div class="nav-left">
    <button class="hamburger-btn" id="openSidebarBtn" aria-label="메뉴 열기">
      <svg viewBox="0 0 22 22">
        <rect y="4" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
        <rect y="10" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
        <rect y="16" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
      </svg>
    </button>
    <span class="brand">Go Higher</span>
    <div class="nav-menu">
      <a href="/" class="nav-link">홈</a>
      <a href="/뉴스.html" class="nav-link">뉴스</a>
      <a href="/다이어리.html" class="nav-link">다이어리</a>
      <a href="/시리즈.html" class="nav-link active">시리즈</a>
      <!-- <a href="/멤버십.html" class="nav-link">멤버십</a> -->
    </div>
  </div>
  <div class="nav-right" id="navRight">
    <div class="stock-search">
  <input
    id="stockSearchInput"
    type="text"
    placeholder="티커/심볼 (예: AAPL, MSFT)"
    autocomplete="off"
    style="width:180px;max-width:220px;"
  />
  <button
    class="btn stock-btn"
    id="stockSearchBtn"
    aria-label="주식 검색"
    title="주식 검색"
    style="margin-left:-2px;"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="icon-search" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
      <path fill-rule="evenodd" d="M11 4a7 7 0 014.899 11.899l4.6 4.6a1 1 0 01-1.414 1.414l-4.6-4.6A7 7 0 1111 4zm0 2a5 5 0 100 10 5 5 0 000-10z" clip-rule="evenodd"/>
    </svg>
  </button>
</div>

<button class="btn" id="shareBtn">
  <span style="font-size:1.12em; margin-right:5px; vertical-align:-2px;">🔗</span>
  공유
</button>
    <a href="/login.html" class="btn login" id="loginBtn">로그인</a>
    <img id="profilePhoto" class="profile-photo" src="/logo.jpg" alt="프로필" style="display:none;" />
  </div>
</nav>

  <div class="overlay" id="sidebarOverlay"></div>
  <aside class="sidebar" id="sidebar">
    <button class="sidebar-close" id="closeSidebarBtn" aria-label="닫기">&times;</button>
    <h2>Go Higher 메뉴</h2>
    <div class="user-info">
      <span class="user-icon" style="background:#f0e85a;border-radius:50%;width:36px;height:36px;display:inline-block;vertical-align:middle;overflow:hidden;">
        <img src="" alt="프로필" class="user-photo" style="width:100%;height:100%;object-fit:cover;display:none;">
      </span>
      <div>
        <div class="user-name">비로그인</div>
        <div class="user-email" style="font-size:0.98em; color:#b7caf8; margin-top:2px;"></div>
        <div class="user-status">로그인 필요</div>
      </div>
    </div>
    <hr>
    <div>
      <a href="/마이페이지.html" class="side-link">마이페이지</a>
      <a href="/설정.html" class="side-link">설정</a>
    </div>
    <hr>
        <div>
      <a href="/" class="side-link">홈</a>
      <a href="/뉴스.html" class="side-link">뉴스</a>
      <a href="/다이어리.html" class="side-link">다이어리</a>
      <a href="/시리즈.html" class="side-link">시리즈</a>
      <!-- <a href="/멤버십.html" class="side-link">멤버십</a> -->
    </div>

    <a href="/login.html" class="side-link">로그아웃</a>
    <!-- <hr>
    <div class="biz-info-title">사업자 등록</div>
    <div class="biz-info">GoHigher | 대표 박해진</div>
    <div class="biz-info">대구광역시 북구 동천로 155, 네스빌101동 12층</div>
    <div class="biz-info">사업자번호 407-09-54622</div>
    <div class="biz-info">연락처 070-8080-1675</div>
    <hr> -->

  <!-- 정책/소개/약관 버튼 -->
  <div class="policy-links" style="margin-top:16px; padding:10px 0 2px 0; display:flex; flex-wrap:wrap; gap:12px; font-size:0.87em; color:#a2b6d8;">
    <a href="푸터/이용약관.html" class="policy-link" style="color:inherit; text-decoration:none;">이용약관</a>
    <a href="푸터/privacy-policy.html" class="policy-link" style="color:inherit; text-decoration:none;">개인정보처리방침</a>
    <a href="푸터/환불정책.html" class="policy-link" style="color:inherit; text-decoration:none;">환불정책</a>
  </div>
  <!-- 저작권 문구 -->
   <div class="copyright" style="margin-top:14px; font-size:11.8px; color:#8e9bb3; text-align:center; letter-spacing:0.01em;">
    © 2025 GoHigher. All rights reserved

</aside>

<!-- 검색 모달 -->
<div id="searchModal" class="search-modal" style="display:none; min-width:370px; max-width:99vw;">
  <button id="closeSearchModal" class="modal-close" aria-label="닫기">&times;</button>
  <h2 class="modal-title" style="margin-bottom:2px;">검색 결과</h2>
  <div id="stockModalTabs"
       style="display:flex; gap:8px; margin:10px 0 20px 0; flex-wrap:wrap;"></div>
  <div id="modalResult" class="stock-result"></div>
</div>
<div id="searchModalOverlay" class="modal-overlay" style="display:none;"></div>


  <!-- 메인 컨테이너 -->
  <div class="main-container">
    <!-- 페이지 헤더 -->
    <div class="page-header">
      <h1>🇺🇸 미국 배당주 투자 가이드</h1>
      <p>카테고리별 추천 종목과 배당금 계산기로 스마트한 투자를 시작하세요</p>
    </div>

    <!-- 콘텐츠 그리드 -->
    <div class="content-grid">
      <!-- 카테고리 섹션 -->
      <section class="categories-section">
        <h2>카테고리별 추천 종목</h2>
        <div id="category-list"></div>
      </section>

      <!-- 계산기 섹션 -->
       <section class="calculator-section">
      <form class="calculator-form">
  <div class="form-group">
    <label for="selectedTicker">종목 선택</label>
    <select id="selectedTicker"></select>
  </div>
  <div class="form-group">
    <label for="shareCount">매수 주식수</label>
    <input type="number" id="shareCount" value="0">
  </div>
  <div class="form-group">
    <label for="pricePerShare">매수가격 (USD)</label>
    <input type="number" id="pricePerShare" value="0" step="0.01">
  </div>
  <!-- 추가 -->
  <div class="form-group">
    <label for="years">보유기간 (년)</label>
    <input type="number" id="years" value="5" min="1" max="100">
  </div>
  <div class="form-group">
    <label for="exchangeRate">환율</label>
    <input type="number" id="exchangeRate" value="1400">
  </div>
  <div class="form-group price-growth-group">
  <label>주가상승률</label>
  <div class="growth-inline-wrap">
    <button type="button" class="growth-btn" onclick="decrementGrowthRate()">-</button>
    <span id="priceGrowthRateDisplay" class="growth-percent">0%</span>
    <button type="button" class="growth-btn" onclick="incrementGrowthRate()">+</button>
  </div>
</div>
<div class="form-group checkbox-row">
  <label><input type="checkbox" id="reinvest"> 배당금 재투자</label>
  <label><input type="checkbox" id="applyTax"> 세금 적용</label>
</div>
  <button type="button" class="calculate-btn" id="calculateBtn">💰 배당금 계산하기</button>
</form>
<div class="result" id="result"></div>
      </section>
    </div>
  </div>

<!-- <footer class="main-footer">
  <div class="footer-wrap">
    <div class="footer-brand">
      <img src="/logo.jpg" alt="Go Higher 로고" class="footer-logo" />
      <div class="footer-title">
        <span>Go Higher</span>
        <span class="footer-sub">미국주식 데이터 허브</span>
      </div>
    </div>
    <div class="footer-links">
      <a href="/푸터/이용약관.html">이용약관</a>
      <a href="/푸터/privacy-policy.html">개인정보처리방침</a>
      <a href="/푸터/환불정책.html">환불정책</a>
      <a href="/멤버십.html">멤버십 안내</a>
    </div>
    <div class="footer-info">
      <span><b>대표</b> 박해진</span>
      <span><b>사업자</b> 407-09-54622</span>
      <span><b>주소</b> 대구광역시 북구 동천로 155, 네스빌101동 12층</span>
      <span><b>문의</b> 070-8080-1675</span>
    </div>
  </div>
  <div class="footer-bottom">
    <span>© 2025 Go Higher. All rights reserved.</span>
    <span>GoHigher의 모든 콘텐츠는 오직 정보 제공을 목적으로 하며, 특정 주식이나 금융상품의 판매 또는 추천을 위한 것이 아닙니다. 본 콘텐츠는 공식적인 연구 보고서가 아니며, 투자 결정의 유일한 근거로 삼아서는 안 됩니다.

투자에는 항상 위험이 따르며, 과거의 성과가 미래의 결과나 수익을 보장하지 않습니다. 금융상품 투자 시에는 재정적 손실 가능성을 충분히 인지하고, 본인의 투자 목표와 위험 수준을 신중하게 고려한 후 투자하시기 바랍니다.</span>
  </div>
</footer> -->

  <script>
    // 카테고리별 데이터
    const categories = [
  {
    name: 'ETF',
    description: '다양한 배당주, 월배당 및 배당 성장 테마 ETF로 분산 및 현금흐름 투자를 추구합니다.',
    icon: '📈',
    iconClass: 'icon-etf',
    stocks: [
      { name: 'Schwab U.S. Dividend Equity ETF', ticker: 'SCHD', yield: 3.76, dividend: 0.26 }, // 분기
      { name: 'JPMorgan Equity Premium Income ETF', ticker: 'JEPI', yield: 7.45, dividend: 0.38 }, // 월
      { name: 'JPMorgan Nasdaq Equity Premium Income ETF', ticker: 'JEPQ', yield: 11.04, dividend: 0.42 }, // 월
      { name: 'Vanguard Dividend Appreciation ETF', ticker: 'VIG', yield: 1.71, dividend: 0.88 }, // 분기
      { name: 'iShares Select Dividend ETF', ticker: 'DVY', yield: 3.42, dividend: 0.87 }, // 분기
      { name: 'SPDR Portfolio S&P 500 High Dividend ETF', ticker: 'SPYD', yield: 5.03, dividend: 0.39 }, // 분기
      { name: 'iShares Core High Dividend ETF', ticker: 'HDV', yield: 4.11, dividend: 1.08 }, // 분기
      { name: 'Vanguard High Dividend Yield ETF', ticker: 'VYM', yield: 3.11, dividend: 0.88 }, // 분기
      { name: 'iShares Core Dividend Growth ETF', ticker: 'DGRO', yield: 2.31, dividend: 0.31 }, // 분기
    ]
  },
  {
    name: '배당 블루칩 (Blue Chip)',
    description: '시가총액이 크고 안정적인 배당을 제공하는 대형 우량 기업들입니다.',
    icon: '🏢',
    iconClass: 'icon-bluechip',
    stocks: [
      { name: '존슨앤존슨', ticker: 'JNJ', yield: 3.27, dividend: 1.24 },
      { name: '코카콜라', ticker: 'KO', yield: 3.11, dividend: 0.485 },
      { name: '펩시코', ticker: 'PEP', yield: 3.08, dividend: 1.355 },
      { name: '월마트', ticker: 'WMT', yield: 1.36, dividend: 0.2075 },
      { name: '에이버리데니슨', ticker: 'AVY', yield: 1.53, dividend: 0.84 },
      { name: '엑손모빌', ticker: 'XOM', yield: 3.38, dividend: 0.95 },
      { name: '비자', ticker: 'V', yield: 0.75, dividend: 0.52 },
      { name: '유나이티드헬스', ticker: 'UNH', yield: 1.37, dividend: 2.10 },
      { name: '머크', ticker: 'MRK', yield: 2.51, dividend: 0.77 },
      { name: '홈디포', ticker: 'HD', yield: 2.38, dividend: 2.25 },
      { name: '아메리칸 익스프레스', ticker: 'AXP', yield: 1.19, dividend: 0.70 },
      { name: '시스코 시스템즈', ticker: 'CSCO', yield: 3.44, dividend: 0.40 },
      { name: '애플', ticker: 'AAPL', yield: 0.46, dividend: 0.25 },
      { name: '인텔', ticker: 'INTC', yield: 1.57, dividend: 0.125 },
    ]
  },
  {
    name: '배당 챔피언 (Achievers)',
    description: '10년 이상 연속으로 배당이 증가한 기업들로 지속적인 성장을 보여줍니다.',
    icon: '🏆',
    iconClass: 'icon-achievers',
    stocks: [
      { name: 'T. Rowe Price Group', ticker: 'TROW', yield: 4.25, dividend: 1.24 },
      { name: '에이블리티원 파이낸셜', ticker: 'ABT', yield: 1.95, dividend: 0.55 },
      { name: '텍사스 인스트루먼트', ticker: 'TXN', yield: 2.90, dividend: 1.30 },
      { name: '켐벨스프', ticker: 'CPB', yield: 3.56, dividend: 0.37 },
      { name: '도미니언 에너지', ticker: 'D', yield: 5.21, dividend: 0.6675 },
      { name: '페덱스', ticker: 'FDX', yield: 2.09, dividend: 1.38 },
      { name: '월그린스 부츠 얼라이언스', ticker: 'WBA', yield: 8.95, dividend: 0.25 },
      { name: '피앤씨 파이낸셜 서비스', ticker: 'PNC', yield: 4.08, dividend: 1.55 },
      { name: '슈왑', ticker: 'SCHW', yield: 1.61, dividend: 0.25 },
      { name: 'Aflac Incorporated', ticker: 'AFL', yield: 2.35, dividend: 0.50 },
      { name: 'Archer-Daniels-Midland', ticker: 'ADM', yield: 2.77, dividend: 0.50 },
      { name: 'Automatic Data Processing', ticker: 'ADP', yield: 2.24, dividend: 1.40 },
      { name: 'Cintas Corporation', ticker: 'CTAS', yield: 0.75, dividend: 1.35 },
    ]
  },
  {
    name: '배당 귀족 (Aristocrats)',
    description: '25년 이상 배당을 늘려온 S&P 500 기업들로 최고의 안정성을 자랑합니다.',
    icon: '👑',
    iconClass: 'icon-aristocrats',
    stocks: [
      { name: '에이티앤티', ticker: 'T', yield: 6.09, dividend: 0.28 },
      { name: '에이브비', ticker: 'ABBV', yield: 3.37, dividend: 1.55 },
      { name: '쉐브론', ticker: 'CVX', yield: 4.14, dividend: 1.63 },
      { name: '피플스 유나이티드 파이낸셜', ticker: 'PBCT', yield: 4.15, dividend: 0.18 },
      { name: '일리노이 툴 웍스', ticker: 'ITW', yield: 2.16, dividend: 1.40 },
      { name: '로우스', ticker: 'LOW', yield: 1.66, dividend: 1.10 },
      { name: 'Sysco Corporation', ticker: 'SYY', yield: 2.46, dividend: 0.50 },
      { name: 'Dover Corporation', ticker: 'DOV', yield: 1.38, dividend: 0.51 },
      { name: 'Clorox Company', ticker: 'CLX', yield: 2.77, dividend: 1.20 },
      { name: 'Ecolab Inc.', ticker: 'ECL', yield: 1.15, dividend: 0.57 },
      { name: 'Brown-Forman', ticker: 'BF.B', yield: 1.18, dividend: 0.21 },
      { name: 'Stanley Black & Decker', ticker: 'SWK', yield: 3.15, dividend: 0.81 },
    ]
  },
  {
    name: '배당 왕 (Kings)',
    description: '50년 이상 배당을 늘려온 기업들로 투자계의 전설적인 존재들입니다.',
    icon: '👑',
    iconClass: 'icon-kings',
    stocks: [
      { name: '노스웨스트 내추럴', ticker: 'NWN', yield: 4.55, dividend: 0.49 },
      { name: '콜게이트-팔모라이브', ticker: 'CL', yield: 2.27, dividend: 0.50 },
      { name: '파커하니핀', ticker: 'PH', yield: 1.23, dividend: 1.48 },
      { name: '3M', ticker: 'MMM', yield: 6.23, dividend: 1.51 },
      { name: '제너럴 다이나믹스', ticker: 'GD', yield: 1.89, dividend: 1.42 },
      { name: 'Hormel Foods', ticker: 'HRL', yield: 3.23, dividend: 0.28 },
      { name: 'Cincinnati Financial', ticker: 'CINF', yield: 2.90, dividend: 0.75 },
      { name: 'Lancaster Colony', ticker: 'LANC', yield: 1.62, dividend: 0.85 },
      { name: 'Federal Realty Investment Trust', ticker: 'FRT', yield: 4.17, dividend: 1.08 },
      { name: 'Commerce Bancshares', ticker: 'CBSH', yield: 1.59, dividend: 0.27 },
      { name: 'California Water Service', ticker: 'CWT', yield: 1.88, dividend: 0.26 },
      { name: 'ABM Industries', ticker: 'ABM', yield: 1.75, dividend: 0.22 },
      { name: 'Farmers & Merchants Bancorp', ticker: 'FMCB', yield: 1.55, dividend: 9.10 },
    ]
  },
  {
    name: '배당성장주 (Dividend Growth Stocks)',
    description: '최근 5~10년간 배당 증가율이 높고, 성장성이 뛰어난 배당주입니다.',
    icon: '📈',
    iconClass: 'icon-growth',
    stocks: [
      { name: '마이크로소프트', ticker: 'MSFT', yield: 0.66, dividend: 0.75 },
      { name: '브로드컴', ticker: 'AVGO', yield: 1.45, dividend: 5.25 },
      { name: '로퍼 테크놀로지스', ticker: 'ROP', yield: 0.54, dividend: 0.75 },
      { name: '써머피셔 사이언티픽', ticker: 'TMO', yield: 0.24, dividend: 0.35 },
      { name: 'S&P 글로벌', ticker: 'SPGI', yield: 0.83, dividend: 0.91 },
      { name: '마스터카드', ticker: 'MA', yield: 0.56, dividend: 0.66 },
      { name: '유나이티드헬스그룹', ticker: 'UNH', yield: 1.37, dividend: 2.10 },
      { name: '코스트코', ticker: 'COST', yield: 0.54, dividend: 1.16 },
      { name: 'T. Rowe Price Group', ticker: 'TROW', yield: 4.25, dividend: 1.24 },
      { name: 'NextEra Energy', ticker: 'NEE', yield: 2.47, dividend: 0.47 },
      { name: '에이블리티원 파이낸셜', ticker: 'ABT', yield: 1.95, dividend: 0.55 },
    ]
  }
];

    const categoryList = document.getElementById('category-list');
    const select = document.getElementById('selectedTicker');

    // 카테고리별 렌더링
    categories.forEach(cat => {
      const card = document.createElement('div');
      card.className = 'category-card';
      
      card.innerHTML = `
        <div class="category-header">
          <div class="category-icon ${cat.iconClass}">${cat.icon}</div>
          <h3 class="category-title">${cat.name}</h3>
        </div>
        <p class="category-description">${cat.description}</p>
        <table class="stock-table">
          <thead>
            <tr>
              <th>종목명</th>
              <th>티커</th>
              <th>배당 수익률</th>
              <th>최근 배당금</th>
            </tr>
          </thead>
          <tbody>
            ${cat.stocks.map(stock => `
              <tr>
                <td>${stock.name}</td>
                <td class="ticker">${stock.ticker}</td>
                <td class="yield">${stock.yield.toFixed(2)}%</td>
                <td class="dividend">$${stock.dividend.toFixed(2)}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
      
      categoryList.appendChild(card);

      // 셀렉트 옵션 추가
      const optgroup = document.createElement('optgroup');
      optgroup.label = cat.name;
      cat.stocks.forEach(stock => {
        const option = document.createElement('option');
        option.value = stock.ticker;
        option.textContent = `${stock.name} (${stock.ticker})`;
        optgroup.appendChild(option);
      });
      select.appendChild(optgroup);
    });

    // 계산기 로직
    // 주가상승률 UI 및 로컬스토리지
  function incrementGrowthRate() {
    let display = document.getElementById('priceGrowthRateDisplay');
    let value = parseInt(display.innerText.replace('%', '')) || 0;
    value = Math.min(value + 1, 30); // 최대 30% 제한
    display.innerText = value + '%';
    localStorage.setItem('priceGrowthRate', value);
  }
  function decrementGrowthRate() {
    let display = document.getElementById('priceGrowthRateDisplay');
    let value = parseInt(display.innerText.replace('%', '')) || 0;
    value = Math.max(0, value - 1);
    display.innerText = value + '%';
    localStorage.setItem('priceGrowthRate', value);
  }
  // 최초 접속 시 로컬스토리지에서 값 불러오기
  window.addEventListener('DOMContentLoaded', () => {
    let display = document.getElementById('priceGrowthRateDisplay');
    let val = localStorage.getItem('priceGrowthRate');
    if (display && val !== null) display.innerText = val + '%';
  });

  // 한국 종합소득세 누진세율 계산
  function calculateKRTax(grossIncome) {
    const brackets = [
      { limit: 12000000, rate: 0.06, deduction: 0 },
      { limit: 46000000, rate: 0.15, deduction: 1080000 },
      { limit: 88000000, rate: 0.24, deduction: 5220000 },
      { limit: 150000000, rate: 0.35, deduction: 14900000 },
      { limit: 300000000, rate: 0.38, deduction: 19400000 },
      { limit: 500000000, rate: 0.40, deduction: 25400000 },
      { limit: 1000000000, rate: 0.42, deduction: 35400000 },
      { limit: Infinity, rate: 0.45, deduction: 66900000 }
    ];
    for (let i = 0; i < brackets.length; i++) {
      if (grossIncome <= brackets[i].limit) {
        const tax = grossIncome * brackets[i].rate - brackets[i].deduction;
        return Math.max(tax, 0);
      }
    }
    return 0;
  }

  // 종목별 연간배당(dps), 배당성장률 (샘플 데이터, 확장 가능)
const dividendData = {
  // ETF
  "SCHD":  { dps: 1.03 / 4, growth: 0.122 },       // 연간 $1.03, 분기별 평균 $0.2575, 1년 성장률 12.2% :contentReference[oaicite:1]{index=1}

  "JEPI":  { dps: 2.68, growth: 0.01 },
  "JEPQ":  { dps: 3.12, growth: 0.01 },
  "VIG":   { dps: 2.1,  growth: 0.07 },
  "DVY":   { dps: 3.67, growth: 0.03 },
  "SPYD":  { dps: 1.58, growth: 0.02 },
  "HDV":   { dps: 3.23, growth: 0.02 },
  "VYM":   { dps: 3.3,  growth: 0.07 },
  "DGRO":  { dps: 1.18, growth: 0.09 },

  // 배당 블루칩
  "JNJ":   { dps: 5.20, growth: 0.048 },           // 분기 $1.30 → 연간 $5.20, 증가율 4.8% :contentReference[oaicite:2]{index=2}
  "KO":    { dps: 1.92, growth: 0.05 },
  "PEP":   { dps: 5.42, growth: 0.045 },
  "WMT":   { dps: 2.48, growth: 0.015 },
  "AVY":   { dps: 3.34, growth: 0.08 },
  "XOM":   { dps: 3.80, growth: 0.035 },
  "V":     { dps: 2.00, growth: 0.17 },
  "UNH":   { dps: 8.42, growth: 0.13 },
  "MRK":   { dps: 2.96, growth: 0.05 },
  "HD":    { dps: 8.36, growth: 0.11 },
  "AXP":   { dps: 2.40, growth: 0.08 },
  "CSCO":  { dps: 1.60, growth: 0.06 },
  "AAPL":  { dps: 0.96, growth: 0.06 },
  "INTC":  { dps: 0.52, growth: 0.01 },

  // 배당 챔피언 (Achievers)
  "TROW":  { dps: 4.96, growth: 0.07 },
  "ABT":   { dps: 2.20, growth: 0.09 },
  "TXN":   { dps: 5.20, growth: 0.08 },
  "CPB":   { dps: 1.48, growth: 0.015 },
  "D":     { dps: 2.67, growth: 0.02 },
  "FDX":   { dps: 5.04, growth: 0.15 },
  "WBA":   { dps: 1.00, growth: 0.02 },
  "PNC":   { dps: 6.20, growth: 0.045 },
  "SCHW":  { dps: 1.00, growth: 0.09 },
  "AFL":   { dps: 2.00, growth: 0.075 },
  "ADM":   { dps: 2.00, growth: 0.065 },
  "ADP":   { dps: 6.00, growth: 0.13 },
  "CTAS":  { dps: 5.40, growth: 0.16 },

  // 배당 귀족 (Aristocrats)
  "T":     { dps: 1.11, growth: 0.01 },
  "ABBV":  { dps: 6.20, growth: 0.10 },
  "CVX":   { dps: 6.52, growth: 0.065 },
  "PBCT":  { dps: 0.72, growth: 0.02 },
  "ITW":   { dps: 5.68, growth: 0.08 },
  "LOW":   { dps: 4.40, growth: 0.15 },
  "SYY":   { dps: 2.00, growth: 0.07 },
  "DOV":   { dps: 2.04, growth: 0.10 },
  "CLX":   { dps: 4.80, growth: 0.05 },
  "ECL":   { dps: 2.28, growth: 0.06 },
  "BF.B":  { dps: 0.86, growth: 0.09 },
  "SWK":   { dps: 3.24, growth: 0.07 },

  // 배당 왕 (Kings)
  "NWN":   { dps: 1.96, growth: 0.015 },
  "CL":    { dps: 1.92, growth: 0.045 },
  "PH":    { dps: 5.92, growth: 0.085 },
  "MMM":   { dps: 6.04, growth: 0.035 },
  "GD":    { dps: 5.68, growth: 0.075 },
  "HRL":   { dps: 1.12, growth: 0.09 },
  "CINF":  { dps: 3.00, growth: 0.07 },
  "LANC":  { dps: 3.40, growth: 0.055 },
  "FRT":   { dps: 4.32, growth: 0.016 },
  "CBSH":  { dps: 1.08, growth: 0.05 },
  "CWT":   { dps: 1.04, growth: 0.045 },
  "ABM":   { dps: 0.88, growth: 0.07 },
  "FMCB":  { dps: 36.40, growth: 0.03 },

  // 배당성장주 (Dividend Growth)
  "MSFT":  { dps: 3.32, growth: 0.1058 },        // 연간 $3.32, 성장률 약 10.6% :contentReference[oaicite:3]{index=3}
  "AVGO":  { dps: 21.00, growth: 0.16 },
  "ROP":   { dps: 3.00, growth: 0.13 },
  "TMO":   { dps: 1.40, growth: 0.11 },
  "SPGI":  { dps: 3.64, growth: 0.14 },
  "MA":    { dps: 2.64, growth: 0.18 },
  "COST":  { dps: 4.64, growth: 0.13 },
  "NEE":   { dps: 1.88, growth: 0.10 }
};

  // 배당금 계산 및 복리 시뮬레이션
  function calculateDividends() {
    const ticker = document.getElementById('selectedTicker').value;
    const shares = parseFloat(document.getElementById('shareCount').value) || 0;
    const price = parseFloat(document.getElementById('pricePerShare').value) || 0;
    const years = parseInt(document.getElementById('years').value) || 1;
    const exchangeRate = parseFloat(document.getElementById('exchangeRate').value) || 1400;
    const reinvest = document.getElementById('reinvest').checked;
    const applyTax = document.getElementById('applyTax').checked;
    const priceGrowthRate = parseFloat(document.getElementById('priceGrowthRateDisplay').innerText.replace('%','')) / 100;

    if (!ticker || shares <= 0 || price <= 0 || years <= 0) {
      alert('모든 필드를 올바르게 입력해주세요.');
      return;
    }

    // 연간 배당, 성장률 데이터 가져오기
    let dps = (dividendData[ticker]?.dps || 0);        // 1주당 연간 배당금(USD)
    let growthRate = (dividendData[ticker]?.growth || 0); // 배당 성장률
    if (!dps) {
      alert('해당 종목의 배당 정보가 아직 등록되지 않았어요! (업데이트 요청 환영)');
      return;
    }

    let currentShares = shares;
    let currentPrice = price;
    let totalGrossDividends = 0;
    let totalAfterTaxDividends = 0;
    let firstYearDividendWon = 0;

    // 시뮬 결과 (차트용)
    let yearlyData = [];

    for (let i = 0; i < years; i++) {
      const yearlyDividendUSD = currentShares * dps; // 해당연도 배당금(USD)
      const yearlyDividendWon = yearlyDividendUSD * exchangeRate;

      let afterTaxDividendWon = yearlyDividendWon;
      if (applyTax) {
        const usTax = yearlyDividendWon * 0.15; // 미국 세금 15%
        const krTax = calculateKRTax(yearlyDividendWon * 0.85);
        afterTaxDividendWon = yearlyDividendWon - usTax - krTax;
      }

      if (i === 0) firstYearDividendWon = yearlyDividendWon;

      totalGrossDividends += yearlyDividendWon;
      totalAfterTaxDividends += afterTaxDividendWon;

      // 배당금 재투자
      if (reinvest) {
        const additionalShares = afterTaxDividendWon / (currentPrice * exchangeRate);
        currentShares += additionalShares;
      }

      dps *= (1 + growthRate);               // 배당 증가율 반영
      currentPrice *= (1 + priceGrowthRate); // 주가상승률 반영
      yearlyData.push(Math.round(applyTax ? afterTaxDividendWon : yearlyDividendWon));
    }

    // 결과 표시
    let resultDiv = document.getElementById('result');
    resultDiv.innerHTML = `
      <div style="font-size:1.1rem; margin-bottom:0.5rem; font-weight:600;">📊 계산 결과</div>
      <div style="margin-bottom:0.3rem;">💰 누적 배당금${applyTax ? '(세후)' : '(세전)'}: <strong>${Math.round(applyTax ? totalAfterTaxDividends : totalGrossDividends).toLocaleString()}원</strong></div>
      <div style="margin-bottom:0.3rem;">📅 연간 배당금(첫 해): <strong>${Math.round(firstYearDividendWon).toLocaleString()}원</strong></div>
      <div style="margin-bottom:0.3rem;">💵 누적 투자금(재투자 포함): <strong>${Math.round(currentShares * currentPrice * exchangeRate).toLocaleString()}원</strong></div>
      <div style="color: #ffe066; font-weight: 600;">📈 복리 효과, 차트로 확인!</div>
    `;
    resultDiv.classList.add('show');
    // (추가) 차트 표시 기능 필요 시 여기에 Chart.js 등 추가 가능!
  }

  // 버튼에 계산기 연결
  document.getElementById('calculateBtn').addEventListener('click', calculateDividends);

  // 숫자 음수 방지
  document.getElementById('shareCount').addEventListener('input', function() { if (this.value < 0) this.value = 0; });
  document.getElementById('pricePerShare').addEventListener('input', function() { if (this.value < 0) this.value = 0; });
  document.getElementById('years').addEventListener('input', function() {
    if (this.value < 1) this.value = 1;
    if (this.value > 100) this.value = 100;
  });
  document.getElementById('exchangeRate').addEventListener('input', function() { if (this.value < 0) this.value = 0; });

    // 입력 필드 실시간 유효성 검사
    document.getElementById('shareCount').addEventListener('input', function() {
      if (this.value < 0) this.value = 0;
    });

    document.getElementById('pricePerShare').addEventListener('input', function() {
      if (this.value < 0) this.value = 0;
    });

    // Polygon API 검색 결과 모달 함수 (투자대가 페이지와 동일하게 복붙)
async function fetchAllPolygonInfo(ticker) {
  const POLYGON_API_BASE = "https://us-central1-gohigher-55e51.cloudfunctions.net/polygonApi";
  try {
    const today = new Date();
    const from = new Date(today);
    from.setDate(from.getDate() - 30);
    const fromStr = from.toISOString().slice(0, 10);
    const toStr = today.toISOString().slice(0, 10);

    const [
      price, prevClose, info, detail, snapshot, dividends, chart, weeklyChart
    ] = await Promise.all([
      fetch(`${POLYGON_API_BASE}/stockPrice?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/previousClose?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/stockInfo?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/stockDetail?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/snapshot?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/dividends?ticker=${ticker}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/dailyChart?ticker=${ticker}&from=${fromStr}&to=${toStr}`).then(r=>r.json()),
      fetch(`${POLYGON_API_BASE}/weeklyChart?ticker=${ticker}&from=${fromStr}&to=${toStr}`).then(r=>r.json()),
    ]);

    const curr = price.price ?? "-";
    const prev = prevClose.previousClose ?? "-";
    const change = (curr !== "-" && prev !== "-") ? (curr - prev).toFixed(2) : "-";
    const rate = (curr !== "-" && prev !== "-") ? (((curr - prev) / prev) * 100).toFixed(2) : "-";
    const chartData = chart.chartData || [];
    const weeklyData = weeklyChart.chartData || [];
    const chartLabels = chartData.map(c => c.date.slice(5));
    const weeklyLabels = weeklyData.map(c => c.date.slice(5));
    const chartCanvasId = "stockChartCanvas";
    const d = detail || {};

    const sectionInfo = `
      <div class="stock-summary-card">
        <div class="stock-section-title" style="font-size:1.18em; margin-bottom:15px;">
          🏢 <b>${d.name || info.name || ticker}</b>
          <span style="color:#90c2ff;font-size:0.98em;margin-left:5px;">(${ticker})</span>
        </div>
        <table>
          <tr><th>현재가</th><td><b style="font-size:1.07em;color:${change>0 ? '#52e3a0' : change<0 ? '#fa5662':'#e9f1ff'}">${curr}</b>
              ${change !== "-" ? `<span style="margin-left:7px;font-size:0.96em;color:${change>0 ? '#52e3a0' : '#fa5662'}">(${change > 0 ? '+' : ''}${change} / ${rate}%)</span>` : ""}</td></tr>
          <tr><th>전일 종가</th><td>${prev}</td></tr>
          <tr><th>시장</th><td>${d.market || info.sector || '-'}</td></tr>
          <tr><th>거래소</th><td>${d.primary_exchange || '-'}</td></tr>
          <tr><th>직원 수</th><td>${d.total_employees || '-'}</td></tr>
          <tr><th>홈페이지</th><td>${d.homepage_url ? `<a href="${d.homepage_url}" target="_blank" style="color:#ffe066;font-weight:600;text-decoration:underline dotted 1.5px;">${d.homepage_url}</a>` : '-'}</td></tr>
          <tr><th>전화번호</th><td>${d.phone_number || '-'}</td></tr>
          <tr><th>주소</th><td>${d.address || '-'}</td></tr>
          <tr><th>SIC 코드</th><td>${d.sic_code || '-'}</td></tr>
          <tr><th>산업분류</th><td>${d.sic_description || '-'}</td></tr>
          <tr><th>설명</th><td style="max-width:330px;white-space:pre-line;">${d.description || info.description || '-'}</td></tr>
        </table>
      </div>
    `;

    const sectionChart = `
      <div class="stock-section-card">
        <div class="stock-section-title" style="display:flex;justify-content:space-between;align-items:center;">
          <span style="font-weight:900;font-size:1.11em;">📈 차트</span>
          <div class="chart-toggle-wrap">
            <button class="chart-toggle-btn active" data-type="daily">일봉</button>
            <button class="chart-toggle-btn" data-type="weekly">주봉</button>
          </div>
        </div>
        <div class="stock-chart-wrap">
          <canvas id="${chartCanvasId}" ></canvas>
        </div>
        <div id="chartTableWrap" style="margin-top:10px;"></div>
      </div>
    `;

    const sectionDividends = `
      <div class="stock-section-card">
        <div class="stock-section-title">💰 <span>배당 이력</span></div>
        <div style="overflow-x:auto;">
        <table>
          <tr><th>Ex-Date</th><th>금액</th></tr>
          ${(dividends.dividends && dividends.dividends.length)
            ? dividends.dividends.slice(0,7).map(d=>`<tr><td>${d.date}</td><td>${d.amount}</td></tr>`).join('')
            : `<tr><td colspan=2>배당 데이터 없음</td></tr>`
          }
        </table>
        </div>
      </div>
    `;

    const s = snapshot || {};
    const sectionSnapshot = `
      <div class="stock-section-card">
        <div class="stock-section-title">📈 <span>스냅샷</span></div>
        <table>
          <tr><th>시가</th><td>${s.open || '-'}</td></tr>
          <tr><th>고가</th><td>${s.high || '-'}</td></tr>
          <tr><th>저가</th><td>${s.low || '-'}</td></tr>
          <tr><th>체결량</th><td>${s.volume || '-'}</td></tr>
          <tr><th>52주 고가</th><td>${s.year_high || '-'}</td></tr>
          <tr><th>52주 저가</th><td>${s.year_low || '-'}</td></tr>
          <tr><th>시가총액</th><td>${s.market_cap || '-'}</td></tr>
        </table>
      </div>
    `;

    // 탭 버튼
    const tabHtml = `
      <button class="stock-tab-btn" data-tab="info">기본정보</button>
      <button class="stock-tab-btn" data-tab="chart">차트</button>
      <button class="stock-tab-btn" data-tab="dividends">배당</button>
      <button class="stock-tab-btn" data-tab="snapshot">스냅샷</button>
    `;
    document.getElementById('stockModalTabs').innerHTML = tabHtml;

    // 탭 렌더 함수
    function showTab(tab) {
      if (tab === "info") {
        document.getElementById('modalResult').innerHTML = sectionInfo;
      } else if (tab === "chart") {
        document.getElementById('modalResult').innerHTML = sectionChart;
        setTimeout(() => {
          let currentType = "daily";
          function renderChart(type = "daily") {
            const data = type === "weekly" ? weeklyData : chartData;
            const labels = type === "weekly" ? weeklyLabels : chartLabels;
            if (window.stockChartInstance) window.stockChartInstance.destroy();
            window.stockChartInstance = new Chart(document.getElementById(chartCanvasId).getContext('2d'), {
              type: 'line',
              data: {
                labels: labels,
                datasets: [{
                  label: '종가',
                  data: data.map(c=>c.close),
                  fill: true,
                  tension: 0.4,
                  pointRadius: 2,
                  tension: 0.42,
                  borderColor: "#2563eb",
                  borderWidth: 2.2,
                  backgroundColor: "rgba(37,99,235,0.11)",
                  pointRadius: 2.8,
                  pointHoverRadius: 5,
                  pointBackgroundColor: "#fff",
                  pointBorderWidth: 1.4,
                }]
              },
              options: {
                layout: {
                  padding: 20
                },
                plugins: {
                  legend: { display: false },
                  tooltip: { enabled: true }
                },
                scales: {
                  x: {
                    grid: { display: false },
                    ticks: {
                      color: "#98bfff",
                      font: { size: 11 }
                    }
                  },
                  y: {
                    grid: { color: "#24334a44" },
                    ticks: {
                      color: "#c7dbff",
                      font: { size: 11 }
                    }
                  }
                }
              }
            });
            document.getElementById("chartTableWrap").innerHTML = `
              <div style="overflow-x:auto;">
                <table style="margin-top:8px;"><tr><th>날짜</th><th>종가</th></tr>
                  ${data.slice(-7).map(d=>`<tr><td>${d.date}</td><td>${d.close}</td></tr>`).join('')}
                </table>
              </div>
            `;
          }
          // 버튼 바인딩
          const btnDaily = document.querySelector('.chart-toggle-btn[data-type="daily"]');
          const btnWeekly = document.querySelector('.chart-toggle-btn[data-type="weekly"]');
          btnDaily.onclick = function() {
            renderChart("daily");
            btnDaily.classList.add('active');
            btnWeekly.classList.remove('active');
          };
          btnWeekly.onclick = function() {
            renderChart("weekly");
            btnWeekly.classList.add('active');
            btnDaily.classList.remove('active');
          };
          renderChart("daily");
        }, 120);
      } else if (tab === "dividends") {
        document.getElementById('modalResult').innerHTML = sectionDividends;
      } else if (tab === "snapshot") {
        document.getElementById('modalResult').innerHTML = sectionSnapshot;
      }
      document.querySelectorAll('.stock-tab-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.tab === tab) btn.classList.add('active');
      });
    }

    document.querySelectorAll('.stock-tab-btn').forEach(btn => {
      btn.onclick = () => showTab(btn.dataset.tab);
    });
    showTab("info");
  } catch (e) {
    document.getElementById('modalResult').innerHTML = `<span style="color:#fa5662;">데이터를 가져오지 못했습니다.<br>${e.message}</span>`;
    document.getElementById('stockModalTabs').innerHTML = "";
  }
}

// 1) 티커 셀 클릭 시 모달 열고 정보 fetch
document.addEventListener('click', function(e) {
  if (e.target.classList.contains('ticker')) {
    const ticker = e.target.textContent.trim();
    document.getElementById('searchModal').style.display = '';
    document.getElementById('searchModalOverlay').style.display = '';
    document.getElementById('modalResult').innerHTML = '<div style="padding:38px;text-align:center;color:#ffe066;font-weight:700;">로딩 중...</div>';
    fetchAllPolygonInfo(ticker);
  }
});

// 2) 모달 닫기 버튼 & 오버레이 클릭 시 닫기
document.getElementById('closeSearchModal').onclick = function() {
  document.getElementById('searchModal').style.display = 'none';
  document.getElementById('searchModalOverlay').style.display = 'none';
};
document.getElementById('searchModalOverlay').onclick = function() {
  document.getElementById('searchModal').style.display = 'none';
  document.getElementById('searchModalOverlay').style.display = 'none';
};
  </script>
  <script src="../navigation.js"></script>
</body>
</html>