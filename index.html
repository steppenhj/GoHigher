<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LEADUS - 리더와 멤버가 연결되고 성장하는 플랫폼</title>
    <!-- Firebase App (core) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;900&display=swap');
        :root {
            --primary-color: #3B82F6;
            --dark-color: #1F2937;
            --dark-gradient-start: #1F2937;
            --dark-gradient-end: #111827;
            --light-color: #F9FAFB;
            --text-color: #374151;
            --white-color: #FFFFFF;
        }
        * {margin: 0; padding: 0; box-sizing: border-box; scroll-behavior: smooth;}
        body {font-family: 'Noto Sans KR', sans-serif; color: var(--text-color); line-height: 1.7; background-color: var(--white-color);}
        .container {max-width: 1100px; margin: 0 auto; padding: 0 30px;}
        h2 {font-size: 2.5rem; color: var(--dark-color); text-align: center; margin-bottom: 40px;}
        h3 {font-size: 1.8rem; margin-bottom: 15px; color: var(--primary-color);}
        section {padding: 80px 0;}
        .section-light {background-color: var(--light-color);}
        .header {background-color: var(--white-color); padding: 1rem 0; position: sticky; top: 0; width: 100%; z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.05);}
        .header .container {display: flex; justify-content: space-between; align-items: center;}
        .logo {font-size: 1.5rem; font-weight: 900; color: var(--primary-color); text-decoration: none;}
        .nav-links {list-style: none; display: flex; gap: 25px;}
        .nav-links a {text-decoration: none; color: var(--text-color); font-weight: 700; transition: color 0.3s;}
        .nav-links a:hover {color: var(--primary-color);}
        .header-buttons {display: flex; align-items: center; gap: 10px;}
        #user-info {display: none; align-items: center; gap: 10px;}
        #user-name {font-weight: 700; margin-right: 2px; font-size: 1rem; color: var(--primary-color);}
        .header-cta {background-color: transparent; color: var(--text-color); padding: 8px 16px; border-radius: 50px; text-decoration: none; font-size: 0.9rem; font-weight: 700; transition: background-color 0.3s, color 0.3s, border-color 0.3s; display: inline-block; border: 2px solid #E5E7EB; cursor: pointer;}
        .header-cta.primary {background-color: var(--primary-color); color: var(--white-color); border-color: var(--primary-color);}
        .header-cta:hover {background-color: var(--dark-color); color: var(--white-color); border-color: var(--dark-color);}
        .header-cta.primary:hover {background-color: #2563EB; border-color: #2563EB;}
        .hero {background: linear-gradient(135deg, var(--dark-gradient-start), var(--dark-gradient-end)); color: var(--white-color); height: 85vh; min-height: 600px; display: flex; justify-content: center; align-items: center; text-align: center; padding: 0 20px; position: relative; overflow: hidden;}
        .hero-glow {position: absolute; top: 50%; left: 50%; width: 700px; height: 700px; background: radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, rgba(59, 130, 246, 0) 70%); transform: translate(-50%, -50%); border-radius: 50%; z-index: 1; animation: pulse 8s infinite ease-in-out;}
        @keyframes pulse {0% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.7; } 50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; } 100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.7; }}
        .hero-content {position: relative; z-index: 2;}
        .hero-content h1 {font-size: 3.8rem; font-weight: 900; margin-bottom: 1rem; text-shadow: 0 4px 15px rgba(0,0,0,0.2);}
        .hero-content .slogan {font-size: 1.3rem; max-width: 600px; margin: 0 auto 2rem; opacity: 0.9;}
        .hero-social-proof {margin: 30px 0; display: flex; align-items: center; justify-content: center; gap: 15px;}
        .hero-social-proof .avatars {display: flex;}
        .hero-social-proof .avatars img {width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--white-color); margin-left: -15px; object-fit: cover;}
        .hero-social-proof .avatars img:first-child {margin-left: 0;}
        .hero-social-proof p {font-size: 1rem; font-weight: 700;}
        .hero-cta-group {display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap;}
        .cta-button {padding: 15px 35px; border-radius: 50px; text-decoration: none; font-size: 1.1rem; font-weight: 700; transition: all 0.3s; display: inline-block; border: none; cursor: pointer; width: auto;}
        .cta-button.primary {background-color: var(--primary-color); color: var(--white-color);}
        .cta-button.primary:hover {transform: translateY(-3px); background-color: #2563EB; box-shadow: 0 10px 20px rgba(59, 130, 246, 0.3);}
        .cta-button.secondary {background-color: transparent; border: 2px solid var(--white-color); color: var(--white-color);}
        .cta-button.secondary:hover {background-color: var(--white-color); color: var(--dark-color); transform: translateY(-3px);}
        .audience-grid {display: grid; grid-template-columns: 1fr 1fr; gap: 30px;}
        .audience-card {background-color: var(--white-color); padding: 35px; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.06); border-top: 4px solid var(--primary-color); text-align: center;}
        .audience-card h3 {color: var(--dark-color); font-size: 1.5rem; margin-bottom: 15px;}
        .audience-icon {font-size: 3rem; margin-bottom: 15px;}
        .problem-solution .content-box {max-width: 700px; margin: 0 auto; text-align: center; background: var(--white-color); padding: 40px; border-radius: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.08);}
        .problem-solution p {font-size: 1.1rem;}
        .features-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; text-align: center;}
        .feature-card {background: var(--white-color); padding: 30px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);}
        .feature-card .icon {font-size: 3rem; margin-bottom: 15px; color: var(--primary-color);}
        .feature-card h4 {font-size: 1.3rem; color: var(--dark-color); margin-bottom: 10px;}
        .leader-filter {text-align: center; margin-bottom: 40px;}
        .leader-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;}
        .leader-card {background: var(--white-color); border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.07); overflow: hidden; text-align: center; transition: transform 0.3s, box-shadow 0.3s; display: flex; flex-direction: column;}
        .leader-card:hover {transform: translateY(-5px); box-shadow: 0 12px 25px rgba(0,0,0,0.1);}
        .leader-card img {width: 100%; height: 220px; object-fit: cover;}
        .leader-info {padding: 20px; display: flex; flex-direction: column; flex-grow: 1;}
        .leader-info h4 {font-size: 1.4rem; color: var(--dark-color);}
        .leader-info .title {color: var(--primary-color); font-weight: 700; font-size: 0.95rem; margin-bottom: 15px;}
        .leader-tags {margin-bottom: 15px; flex-grow: 1;}
        .leader-tags .tag {display: inline-block; background-color: #E5E7EB; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 700; margin: 3px;}
        .join-button {background-color: var(--dark-color); color: var(--white-color); padding: 10px 20px; border-radius: 8px; text-decoration: none; font-size: 0.9rem; font-weight: 700; border: none; cursor: pointer; margin-top: auto; transition: background-color 0.3s;}
        .join-button:hover {background-color: #000;}
        .footer {background-color: var(--dark-color); color: var(--light-color); text-align: center; padding: 40px 0;}
        .modal-wrapper {position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 2000; display: none; justify-content: center; align-items: center; padding: 20px;}
        .modal-show {display: flex;}
        .form-container {max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto; padding: 40px; background-color: var(--white-color); border-radius: 15px; position: relative;}
        .form-container h2 {text-align: center; font-size: 2rem; margin-bottom: 10px;}
        .form-container p {text-align: center; margin-bottom: 30px;}
        .form-group {margin-bottom: 20px;}
        .form-group label {display: block; font-weight: 700; margin-bottom: 8px;}
        .form-group input, .form-group select, .form-group textarea {width: 100%; padding: 12px; border: 1px solid #D1D5DB; border-radius: 8px; font-size: 1rem; font-family: 'Noto Sans KR', sans-serif;}
        .modal-close-btn {position: absolute; top: 15px; right: 20px; font-size: 2rem; color: #9CA3AF; cursor: pointer;}
        @media(max-width: 768px) {
            h2 { font-size: 2rem; }
            .hero-content h1 { font-size: 2.8rem; }
            .header .container { flex-direction: column; gap: 15px; }
            .nav-links { justify-content: center; flex-wrap: wrap; }
            .audience-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <a href="#" class="logo">LEADUS</a>
            <nav>
                <ul class="nav-links">
                    <li><a href="#problem">문제 정의</a></li>
                    <li><a href="#features">핵심 기능</a></li>
                    <li><a href="#leaders">리더 찾기</a></li>
                    <li><a href="#special">LEADUS만의 특별함</a></li>
                </ul>
            </nav>
            <div class="header-buttons" id="header-buttons">
                <div id="auth-btns" style="display: flex; gap:10px;">
                    <button id="login-btn" class="header-cta">로그인</button>
                    <button id="signup-btn" class="header-cta primary">회원가입</button>
                </div>
                <div id="user-info" style="display:none; align-items:center; gap:10px;">
                    <span id="user-name" style="font-weight:700;"></span>
                    <button id="logout-btn" class="header-cta">로그아웃</button>
                </div>
            </div>
        </div>
    </header>

    <section class="hero">
        <div class="hero-glow"></div>
        <div class="hero-content">
            <h1>Follow는 끝났다.<br>이제 리더들이 연결될 차례다.</h1>
            <p class="slogan">모두가 이끄는 시대, 리더들이 먼저 모입니다 – LEADUS</p>
            <div class="hero-social-proof">
                <div class="avatars">
                    <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop" alt="member 1">
                    <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop" alt="member 2">
                    <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=100&h=100&fit=crop" alt="member 3">
                </div>
                <p>현재 <strong>152명</strong>의 리더와 멤버들이 함께하고 있습니다.</p>
            </div>
            <div class="hero-cta-group">
                <button id="leader-register-btn" class="cta-button primary">리더로 등록하기 →</button>
                <a href="#leaders" class="cta-button secondary">커뮤니티 둘러보기</a>
            </div>
        </div>
    </section>

    <main>
        <section id="for-whom" class="section-light">
            <div class="container">
                <div class="audience-grid">
                    <div class="audience-card">
                        <div class="audience-icon">👑</div>
                        <h3>For Leaders (리더를 위한 안내)</h3>
                        <p>
                            커뮤니티, 스타트업, 프로젝트를 이끌고 계신가요? LEADUS에서 당신의 비전을 공유하고 함께할 멤버들을 모으세요. 리더로 등록하고 당신의 커뮤니티를 효과적으로 홍보하고 운영할 수 있는 기회를 잡으세요.
                        </p>
                    </div>
                    <div class="audience-card">
                        <div class="audience-icon">🙋‍♀️</div>
                        <h3>For Members (일반 회원을 위한 안내)</h3>
                        <p>
                            성장할 수 있는 커뮤니티를 찾고 계신가요? 다양한 분야의 열정적인 리더들을 만나보세요. 리더의 프로필을 살펴보고, 어떤 모임을 이끌어 가는지 확인한 후 '함께하기' 버튼으로 간편하게 가입을 요청하세요.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="problem" class="problem-solution">
            <div class="container">
                <div class="content-box">
                    <h3>🧭 문제 정의</h3>
                    <p>수많은 커뮤니티, 동아리, 팀이 매일 만들어지지만 운영자는 늘 혼자 고민하고 외롭게 결정합니다. 기존 플랫폼은 참여자 중심이며, 리더끼리 노하우와 자원을 나눌 수 있는 공간이 없습니다.</p>
                </div>
                <br><br><br>
                <div class="content-box">
                    <h3>🎯 솔루션: LEADUS</h3>
                    <p>
                        LEADUS는 실력 있는 리더와 성장을 원하는 멤버를 연결하는 커뮤니티 플랫폼입니다. 리더는 자신의 그룹을 효과적으로 홍보하고 운영할 수 있으며, 멤버는 자신에게 맞는 리더를 찾아 의미 있는 커뮤니티에 참여할 수 있습니다.
                    </p>
                </div>
            </div>
        </section>

        <section id="features" class="section-light">
            <div class="container">
                <h2>⚙️ 핵심 기능 (MVP)</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="icon">📋</div>
                        <h4>리더 인증 가입</h4>
                        <p>간단한 소개와 리더 경험 자가진단을 통해 자격을 갖춘 리더만 가입을 신청합니다.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">🧵</div>
                        <h4>운영 노하우 게시판</h4>
                        <p>모임 모집, 정산, 갈등 관리 등 실제 운영 경험과 노하우를 공유하는 공간입니다.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">🤝</div>
                        <h4>협업 제안 게시판</h4>
                        <p>이벤트 콜라보, 게스트 초청 등 리더 간의 시너지를 만들 협업 기회를 찾습니다.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">📬</div>
                        <h4>익명 질문함</h4>
                        <p>민감하거나 어려운 고민을 익명으로 질문하고, 다른 리더들의 지혜를 구합니다.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="leaders">
            <div class="container">
                <h2>✨ 당신의 성장을 이끌 리더를 찾아보세요</h2>
                <div class="leader-filter">
                    <label for="leader-category-filter">🔎 나에게 맞는 리더 찾기:</label>
                    <select id="leader-category-filter" name="leader-category-filter" style="padding: 5px; border-radius: 5px;">
                        <option value="all">모두 보기</option>
                        <option value="community">커뮤니티</option>
                        <option value="startup">창업</option>
                        <option value="event">행사기획</option>
                        <option value="content">콘텐츠</option>
                    </select>
                </div>
                <div class="leader-grid">
                    <div class="leader-card" data-category="community">
                        <img src="https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=500&q=80" alt="김지수 리더">
                        <div class="leader-info">
                            <h4>김지수</h4>
                            <p class="title">독서모임 '책갈피' 운영자</p>
                            <div class="leader-tags">
                                <span class="tag">#커뮤니티</span>
                                <span class="tag">#독서모임</span>
                            </div>
                            <button class="join-button">이 리더와 함께하기</button>
                        </div>
                    </div>
                    <div class="leader-card" data-category="startup">
                        <img src="https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=500&q=80" alt="박서준 리더">
                        <div class="leader-info">
                            <h4>박서준</h4>
                            <p class="title">AI 스타트업 '딥브레인' 공동창업자</p>
                            <div class="leader-tags">
                                <span class="tag">#창업</span>
                                <span class="tag">#팀빌딩</span>
                                <span class="tag">#AI</span>
                            </div>
                            <button class="join-button">이 리더와 함께하기</button>
                        </div>
                    </div>
                    <div class="leader-card" data-category="event">
                        <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?w=500&q=80" alt="이하나 리더">
                        <div class="leader-info">
                            <h4>이하나</h4>
                            <p class="title">대학 축제 및 해커톤 기획자</p>
                            <div class="leader-tags">
                                <span class="tag">#행사기획</span>
                                <span class="tag">#대학생</span>
                            </div>
                            <button class="join-button">이 리더와 함께하기</button>
                        </div>
                    </div>
                    <div class="leader-card" data-category="content">
                        <img src="https://images.unsplash.com/photo-1521119989659-a83eee488004?w=500&q=80" alt="최민준 리더">
                        <div class="leader-info">
                            <h4>최민준</h4>
                            <p class="title">인스타그램 '일상여행' 크리에이터</p>
                            <div class="leader-tags">
                                <span class="tag">#콘텐츠</span>
                                <span class="tag">#소모임</span>
                            </div>
                            <button class="join-button">이 리더와 함께하기</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="special" class="section-light">
            <div class="container">
                <h2>✨ LEADUS만의 특별함</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="icon">🛡️</div>
                        <h4>검증된 리더 네트워크</h4>
                        <p>자격 인증을 거친 실제 리더들이 모여 깊이 있는 커뮤니티를 만들어갑니다.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">🚀</div>
                        <h4>실질적인 성장 기회</h4>
                        <p>리더와의 네트워킹, 멤버와의 협업을 통해 모두가 함께 성장하는 기회를 제공합니다.</p>
                    </div>
                    <div class="feature-card">
                        <div class="icon">🔒</div>
                        <h4>안전하고 신뢰하는 공간</h4>
                        <p>리더와 멤버 모두 상호 존중의 원칙 아래 안전하게 소통하고 신뢰를 쌓아갑니다.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="footer">
        <div class="container">
            <a href="#" class="logo">LEADUS</a>
            <p>&copy; 2025 LEADUS. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- 리더 등록 모달 -->
    <div id="leader-register-modal" class="modal-wrapper">
        <div class="form-container">
            <span id="leader-register-modal-close" class="modal-close-btn">&times;</span>
            <h2>👑 LEADUS 리더 등록</h2>
            <p>당신의 비전과 경험을 공유하고 커뮤니티를 이끌어보세요.</p>
            <form id="leader-register-form">
                <div class="form-group">
                    <label for="leader-name">이름</label>
                    <input type="text" id="leader-name" name="leader-name" required>
                </div>
                <div class="form-group">
                    <label for="leader-email">이메일</label>
                    <input type="email" id="leader-email" name="leader-email" required>
                </div>
                <div class="form-group" id="leader-password-group">
                    <label for="leader-password">비밀번호</label>
                    <input type="password" id="leader-password" name="leader-password" required>
                </div>
                <div class="form-group">
                    <label for="leader-title">한 줄 소개 (프로필 제목)</label>
                    <input type="text" id="leader-title" name="leader-title" placeholder="예: 5년차 IT 스터디 운영자" required>
                </div>
                <div class="form-group">
                    <label for="leader-intro">리더십 경험 및 계획 소개</label>
                    <textarea id="leader-intro" name="leader-intro" rows="4" placeholder="운영하셨거나 계획 중인 커뮤니티, 프로젝트, 관련 경험에 대해 자세히 알려주세요." required></textarea>
                </div>
                <button type="submit" class="cta-button primary">리더 등록 신청하기</button>
            </form>
        </div>
    </div>
    <!-- 회원가입 모달 -->
    <div id="member-register-modal" class="modal-wrapper">
        <div class="form-container">
            <span id="member-register-modal-close" class="modal-close-btn">&times;</span>
            <h2>🙋‍♀️ LEADUS 회원가입</h2>
            <p>간단한 가입으로 멋진 리더들을 만나고 커뮤니티에 참여하세요.</p>
            <form id="member-register-form">
                <div class="form-group">
                    <label for="member-name">이름</label>
                    <input type="text" id="member-name" name="member-name" required>
                </div>
                <div class="form-group">
                    <label for="member-email">이메일</label>
                    <input type="email" id="member-email" name="member-email" required>
                </div>
                <div class="form-group">
                    <label for="member-password">비밀번호</label>
                    <input type="password" id="member-password" name="member-password" required>
                </div>
                <button type="submit" class="cta-button primary">가입하기</button>
            </form>
        </div>
    </div>
    <!-- 로그인 모달 -->
    <div id="login-modal" class="modal-wrapper">
        <div class="form-container">
            <span id="login-modal-close" class="modal-close-btn">&times;</span>
            <h2>로그인</h2>
            <p>LEADUS에 오신 것을 환영합니다.</p>
            <form id="login-form">
                <div class="form-group">
                    <label for="login-email">이메일</label>
                    <input type="email" id="login-email" name="login-email" required>
                </div>
                <div class="form-group">
                    <label for="login-password">비밀번호</label>
                    <input type="password" id="login-password" name="login-password" required>
                </div>
                <button type="submit" class="cta-button primary">로그인하기</button>
            </form>
        </div>
    </div>
    <script>
        // Firebase 연결
        const firebaseConfig = {
            apiKey: "AIzaSyDfSk53FIW4lKnOJgJiIevEfbFC8BOPGoY",
            authDomain: "leader-cf930.firebaseapp.com",
            projectId: "leader-cf930",
            storageBucket: "leader-cf930.firebasestorage.app",
            messagingSenderId: "949837770378",
            appId: "1:949837770378:web:3d73fd648cef913e264773",
            measurementId: "G-5ED1CK2TBK"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // 네비게이션 스크롤
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                if (this.getAttribute('href') === '#') {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                    return;
                }
                e.preventDefault();
                const targetElement = document.querySelector(this.getAttribute('href'));
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        // 리더 필터
        const filter = document.getElementById('leader-category-filter');
        const leaderCards = document.querySelectorAll('.leader-card');
        if (filter) {
            filter.addEventListener('change', () => {
                const selectedCategory = filter.value;
                leaderCards.forEach(card => {
                    const cardCategory = card.getAttribute('data-category');
                    card.style.display = (selectedCategory === 'all' || selectedCategory === cardCategory) ? 'flex' : 'none';
                });
            });
        }

        // 모달
        const leaderRegisterModal = document.getElementById('leader-register-modal');
        const memberRegisterModal = document.getElementById('member-register-modal');
        const loginModal = document.getElementById('login-modal');
        const openLeaderRegisterBtn = document.getElementById('leader-register-btn');
        const openMemberRegisterBtn = document.getElementById('signup-btn');
        const openLoginBtn = document.getElementById('login-btn');
        const closeLeaderRegisterBtn = document.getElementById('leader-register-modal-close');
        const closeMemberRegisterBtn = document.getElementById('member-register-modal-close');
        const closeLoginBtn = document.getElementById('login-modal-close');
        const leaderRegisterForm = document.getElementById('leader-register-form');
        const memberRegisterForm = document.getElementById('member-register-form');
        const loginForm = document.getElementById('login-form');

        // 리더 등록 모달 동작
        if(openLeaderRegisterBtn) openLeaderRegisterBtn.addEventListener('click', async () => {
            const user = auth.currentUser;
            if(!user || !user.emailVerified) {
                alert("리더 등록은 로그인(및 이메일 인증) 후 이용 가능합니다!");
                return;
            }
            if(!user.displayName || user.displayName.trim().length === 0){
                const inputName = prompt("프로필 이름(닉네임)을 입력하세요. 이 이름이 리더로 노출됩니다.", "");
                if(inputName && inputName.trim().length > 0) {
                    await user.updateProfile({ displayName: inputName.trim() });
                } else {
                    alert("이름이 입력되어야 리더 등록이 가능합니다!");
                    return;
                }
            }
            document.getElementById('leader-name').value = auth.currentUser.displayName;
            document.getElementById('leader-name').readOnly = true;
            document.getElementById('leader-email').value = auth.currentUser.email;
            document.getElementById('leader-email').readOnly = true;
            document.getElementById('leader-password-group').style.display = 'none';
            document.getElementById('leader-password').required = false;
            leaderRegisterModal.classList.add('modal-show');
        });
        if(closeLeaderRegisterBtn) closeLeaderRegisterBtn.addEventListener('click', () => leaderRegisterModal.classList.remove('modal-show'));
        window.addEventListener('click', (e) => {
            if (e.target === leaderRegisterModal) leaderRegisterModal.classList.remove('modal-show');
            if (e.target === memberRegisterModal) memberRegisterModal.classList.remove('modal-show');
            if (e.target === loginModal) loginModal.classList.remove('modal-show');
        });

        // 회원가입 & 로그인/로그아웃
        if(openMemberRegisterBtn) openMemberRegisterBtn.addEventListener('click', () => memberRegisterModal.classList.add('modal-show'));
        if(openLoginBtn) openLoginBtn.addEventListener('click', () => loginModal.classList.add('modal-show'));
        if(closeMemberRegisterBtn) closeMemberRegisterBtn.addEventListener('click', () => memberRegisterModal.classList.remove('modal-show'));
        if(closeLoginBtn) closeLoginBtn.addEventListener('click', () => loginModal.classList.remove('modal-show'));

        if (memberRegisterForm) {
            memberRegisterForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = document.getElementById('member-email').value;
                const password = document.getElementById('member-password').value;
                const name = document.getElementById('member-name').value;
                try {
                    const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                    await userCredential.user.updateProfile({ displayName: name });
                    await userCredential.user.sendEmailVerification();
                    alert("인증 메일이 발송되었습니다! 메일을 확인하고 인증을 완료하세요.\n(이메일 인증 후 로그인하세요.)");
                    memberRegisterModal.classList.remove('modal-show');
                    memberRegisterForm.reset();
                } catch (err) {
                    if (err.code === 'auth/email-already-in-use') {
                        alert('이미 가입된 이메일입니다!');
                    } else if (err.code === 'auth/invalid-email') {
                        alert('이메일 형식이 올바르지 않습니다.');
                    } else if (err.code === 'auth/weak-password') {
                        alert('비밀번호는 6자 이상이어야 합니다.');
                    } else {
                        alert('회원가입 오류: ' + err.message);
                    }
                }
            });
        }
        if (loginForm) {
            loginForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;
                try {
                    const userCredential = await auth.signInWithEmailAndPassword(email, password);
                    if (!userCredential.user.emailVerified) {
                        alert('이메일 인증 후 로그인할 수 있습니다!\n인증 메일을 확인해주세요.');
                        await auth.signOut();
                        return;
                    }
                    alert('로그인 되었습니다! LEADUS에 오신 것을 환영합니다.');
                    loginModal.classList.remove('modal-show');
                    loginForm.reset();
                } catch (err) {
                    if (err.code === 'auth/user-not-found') {
                        alert('가입된 이메일이 아닙니다.');
                    } else if (err.code === 'auth/wrong-password') {
                        alert('비밀번호가 일치하지 않습니다.');
                    } else {
                        alert('로그인 오류: ' + err.message);
                    }
                }
            });
        }
        const userInfoDiv = document.getElementById('user-info');
        const userNameSpan = document.getElementById('user-name');
        const logoutBtn = document.getElementById('logout-btn');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        auth.onAuthStateChanged((user) => {
            if (user && user.emailVerified) {
                userNameSpan.textContent = user.displayName || user.email;
                userInfoDiv.style.display = "flex";
                if(loginBtn) loginBtn.style.display = "none";
                if(signupBtn) signupBtn.style.display = "none";
            } else {
                userInfoDiv.style.display = "none";
                if(loginBtn) loginBtn.style.display = "";
                if(signupBtn) signupBtn.style.display = "";
            }
        });
        if (logoutBtn) {
            logoutBtn.addEventListener('click', async () => {
                await auth.signOut();
                alert("로그아웃되었습니다.");
                location.reload();
            });
        }

        // 리더 등록 - Firestore 저장(로그인 상태에서만 동작)
        if(leaderRegisterForm) {
  leaderRegisterForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    const user = auth.currentUser;
    if(!user || !user.emailVerified){
      alert("로그인이 필요합니다!");
      leaderRegisterModal.classList.remove('modal-show');
      return;
    }
    const name = user.displayName || '';
    const email = user.email;
    const title = document.getElementById('leader-title').value;
    const intro = document.getElementById('leader-intro').value;
    try {
      const groupDoc = await db.collection('groups').add({
        name: name + "의 커뮤니티",
        leaderUid: user.uid,
        leaderName: name,
        leaderEmail: email,
        title: title,
        intro: intro,
        created: firebase.firestore.FieldValue.serverTimestamp(),
      });
      alert("리더 등록 완료! 커뮤니티 관리 페이지로 이동합니다.");
      // 🔥 실제로 이동하는 코드
      window.location.href = "/group.html?groupId=" + groupDoc.id;
      // 또는 location.assign("/group.html?groupId=" + groupDoc.id);
      leaderRegisterModal.classList.remove('modal-show');
      leaderRegisterForm.reset();
    } catch (err) {
      alert('리더 등록 오류: ' + err.message);
      
    }
  });
}
        // '이 리더와 함께하기' 버튼 클릭
        leaderCards.forEach(card => {
            const joinBtn = card.querySelector('.join-button');
            if (joinBtn) {
                joinBtn.addEventListener('click', () => {
                    const leaderName = card.querySelector('.leader-info h4').textContent;
                    if (confirm(`[${leaderName}] 리더의 그룹에 가입하시겠습니까?`)) {
                        alert(`가입 신청이 완료되었습니다! ${leaderName} 리더가 곧 연락드릴 예정입니다.`);
                    }
                });
            }
        });
    </script>
</body>
</html>
