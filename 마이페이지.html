<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë§ˆì´í˜ì´ì§€ | Go Higher â€“ ë‚˜ì˜ íˆ¬ì ê´€ë¦¬, ìì‚°ëŒ€ì‹œë³´ë“œ, ë‹¤ì´ì–´ë¦¬, ë¬¸ì˜ë‚´ì—­ í•œëˆˆì—</title>
<meta name="description" content="Go Higher ë§ˆì´í˜ì´ì§€ì—ì„œ ë‚˜ë§Œì˜ íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤, ì¦ê²¨ì°¾ê¸° ì¢…ëª©, íˆ¬ì ë‹¤ì´ì–´ë¦¬, ìì‚° ì¶”ì´, ê³ ê° ë¬¸ì˜ ë‚´ì—­ ë“± ë§ì¶¤í˜• íˆ¬ì ê´€ë¦¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë‚´ ë¯¸êµ­ì£¼ì‹ íˆ¬ì í˜„í™©ì„ í•œëˆˆì— í™•ì¸í•˜ê³  ì„±ì¥ ê¸°ë¡ì„ ê´€ë¦¬í•´ë³´ì„¸ìš”.">
<meta name="keywords" content="ë§ˆì´í˜ì´ì§€, íˆ¬ì ê´€ë¦¬, í¬íŠ¸í´ë¦¬ì˜¤, ë¯¸êµ­ì£¼ì‹ ëŒ€ì‹œë³´ë“œ, íˆ¬ì ë‹¤ì´ì–´ë¦¬, ì¦ê²¨ì°¾ê¸° ì¢…ëª©, ìì‚° ì¶”ì´, íˆ¬ì ê¸°ë¡, íˆ¬ì ë¬¸ì˜, Go Higher, ë§ì¶¤ íˆ¬ì ì„œë¹„ìŠ¤, íšŒì› íˆ¬ì ë¶„ì„, ì£¼ì‹ ìì‚°ê´€ë¦¬">

<!-- canonical: ì‹¤ì œ ë§ˆì´í˜ì´ì§€ ê²½ë¡œì— ë§ê²Œ! ì˜ˆ: /ë§ˆì´í˜ì´ì§€.html -->
<link rel="canonical" href="https://gohigher.kr/ë§ˆì´í˜ì´ì§€.html" />

<!-- ì‚¬ì´íŠ¸ ê²€ì¦ -->
<meta name="naver-site-verification" content="daa71973aba155bc2d96dfde44d8fb34b6a74ba7" />
<meta name="google-site-verification" content="GGuWsc5cbeYC9W0nQsN7550kWcUzArKuo3zfhjN5LXE" />

<!-- Open Graph (SNS, ì¹´ì¹´ì˜¤/í˜ë¶ ê³µìœ  ìµœì í™”) -->
<meta property="og:type" content="website" />
<meta property="og:title" content="ë§ˆì´í˜ì´ì§€ | Go Higher â€“ ë‚˜ë§Œì˜ íˆ¬ì ëŒ€ì‹œë³´ë“œì™€ ì„±ì¥ ê¸°ë¡" />
<meta property="og:description" content="íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤, ì¦ê²¨ì°¾ê¸° ì¢…ëª©, íˆ¬ì ë‹¤ì´ì–´ë¦¬, ìì‚° ì¶”ì´, ë¬¸ì˜ë‚´ì—­ê¹Œì§€ ë‚´ íˆ¬ìì •ë³´ë¥¼ í•œëˆˆì— ê´€ë¦¬! Go Higher ë§ˆì´í˜ì´ì§€ì—ì„œ ì„±ì¥ì˜ ë³€í™”ë¥¼ ê²½í—˜í•˜ì„¸ìš”." />
<meta property="og:image" content="https://gohigher.kr/logo.jpg" />
<meta property="og:url" content="https://gohigher.kr/ë§ˆì´í˜ì´ì§€.html" />
<meta property="og:site_name" content="Go Higher" />
<meta property="og:locale" content="ko_KR" />

<!-- Twitter Card (íŠ¸ìœ„í„°/X ê³µìœ ) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ë§ˆì´í˜ì´ì§€ | Go Higher â€“ ë‚˜ë§Œì˜ íˆ¬ì ëŒ€ì‹œë³´ë“œì™€ ì„±ì¥ ê¸°ë¡" />
<meta name="twitter:description" content="ë‚˜ì˜ íˆ¬ì í˜„í™©ê³¼ ìì‚°, ë‹¤ì´ì–´ë¦¬, ë¬¸ì˜ë‚´ì—­ì„ í•œê³³ì—ì„œ! Go Higher ë§ˆì´í˜ì´ì§€ì—ì„œ ì‰½ê³  í¸ë¦¬í•˜ê²Œ ê´€ë¦¬í•˜ì„¸ìš”." />
<meta name="twitter:image" content="https://gohigher.kr/logo.jpg" />

<!-- ì¶”ê°€ ê¶Œì¥ -->
<meta name="author" content="Go Higher" />
<meta name="robots" content="index,follow" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" href="/logo.jpg" type="image/jpeg" />
    
   <link rel="stylesheet" href="navigation.css">

  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700;400&display=swap" rel="stylesheet">

</head>
<body>
<nav class="nav">
  <div class="nav-left">
    <button class="hamburger-btn" id="openSidebarBtn" aria-label="ë©”ë‰´ ì—´ê¸°">
      <svg viewBox="0 0 22 22">
        <rect y="4" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
        <rect y="10" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
        <rect y="16" width="22" height="1.3" rx="0.6" fill="#e9f1ff"/>
      </svg>
    </button>
    <span class="brand">Go Higher</span>
    <div class="nav-menu">
      <a href="/" class="nav-link">í™ˆ</a>
      <a href="/ë‰´ìŠ¤.html" class="nav-link">ë‰´ìŠ¤</a>
      <a href="/ë‹¤ì´ì–´ë¦¬.html" class="nav-link">ë‹¤ì´ì–´ë¦¬</a>
      <a href="/ì‹œë¦¬ì¦ˆ.html" class="nav-link">ì‹œë¦¬ì¦ˆ</a>
      <a href="/ë©¤ë²„ì‹­.html" class="nav-link">ë©¤ë²„ì‹­</a>
    </div>
  </div>
  <div class="nav-right" id="navRight">
    <div class="stock-search">
      <input id="stockSearchInput" type="text" placeholder="ì‹¬ë³¼ (AAPL)" />
      <button
  class="btn stock-btn"
  id="stockSearchBtn"
  aria-label="ì£¼ì‹ ê²€ìƒ‰"
  title="ì£¼ì‹ ê²€ìƒ‰"
>
  <!-- Heroiconsâ€™s magnifying-glass -->
  <svg xmlns="http://www.w3.org/2000/svg" class="icon-search" viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
    <path fill-rule="evenodd" d="M11 4a7 7 0 014.899 11.899l4.6 4.6a1 1 0 01-1.414 1.414l-4.6-4.6A7 7 0 1111 4zm0 2a5 5 0 100 10 5 5 0 000-10z" clip-rule="evenodd"/>
  </svg>
</button>
    </div>
<button class="btn" id="shareBtn">
  <span style="font-size:1.12em; margin-right:5px; vertical-align:-2px;">ğŸ”—</span>
  ê³µìœ 
</button>
    <a href="/login.html" class="btn login" id="loginBtn">ë¡œê·¸ì¸</a>
    <img id="profilePhoto" class="profile-photo" src="/logo.jpg" alt="í”„ë¡œí•„" style="display:none;" />
  </div>
</nav>

  <div class="overlay" id="sidebarOverlay"></div>
  <aside class="sidebar" id="sidebar">
    <button class="sidebar-close" id="closeSidebarBtn" aria-label="ë‹«ê¸°">&times;</button>
    <h2>Go Higher ë©”ë‰´</h2>
    <div class="user-info">
      <span class="user-icon" style="background:#f0e85a;border-radius:50%;width:36px;height:36px;display:inline-block;vertical-align:middle;overflow:hidden;">
        <img src="" alt="í”„ë¡œí•„" class="user-photo" style="width:100%;height:100%;object-fit:cover;display:none;">
      </span>
      <div>
        <div class="user-name">ë¹„ë¡œê·¸ì¸</div>
        <div class="user-email" style="font-size:0.98em; color:#b7caf8; margin-top:2px;"></div>
        <div class="user-status">ë¡œê·¸ì¸ í•„ìš”</div>
      </div>
    </div>
    <hr>
    <div>
      <a href="/ë§ˆì´í˜ì´ì§€.html" class="side-link">ë§ˆì´í˜ì´ì§€</a>
      <a href="/ì„¤ì •.html" class="side-link">ì„¤ì •</a>
    </div>
    <hr>
        <div>
      <a href="/" class="side-link">í™ˆ</a>
      <a href="/ë‰´ìŠ¤.html" class="side-link">ë‰´ìŠ¤</a>
      <a href="/ë‹¤ì´ì–´ë¦¬.html" class="side-link">ë‹¤ì´ì–´ë¦¬</a>
      <a href="/ì‹œë¦¬ì¦ˆ.html" class="side-link">ì‹œë¦¬ì¦ˆ</a>
      <a href="/ë©¤ë²„ì‹­.html" class="side-link">ë©¤ë²„ì‹­</a>
    </div>

    <a href="/login.html" class="side-link">ë¡œê·¸ì•„ì›ƒ</a>
    <hr>
    <div class="biz-info-title">ì‚¬ì—…ì ë“±ë¡</div>
    <div class="biz-info">GoHigher | ëŒ€í‘œ ë°•í•´ì§„</div>
    <div class="biz-info">ëŒ€êµ¬ê´‘ì—­ì‹œ ë¶êµ¬ ë™ì²œë¡œ 155, ë„¤ìŠ¤ë¹Œ101ë™ 12ì¸µ</div>
    <div class="biz-info">ì‚¬ì—…ìë²ˆí˜¸ 407-09-54622</div>
    <div class="biz-info">ì—°ë½ì²˜ 070-8080-1675</div>
    <hr>

  <!-- ì •ì±…/ì†Œê°œ/ì•½ê´€ ë²„íŠ¼ -->
  <div class="policy-links" style="margin-top:16px; padding:10px 0 2px 0; display:flex; flex-wrap:wrap; gap:12px; font-size:0.87em; color:#a2b6d8;">
    <a href="í‘¸í„°/ì´ìš©ì•½ê´€.html" class="policy-link" style="color:inherit; text-decoration:none;">ì´ìš©ì•½ê´€</a>
    <a href="í‘¸í„°/privacy-policy.html" class="policy-link" style="color:inherit; text-decoration:none;">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
    <a href="í‘¸í„°/í™˜ë¶ˆì •ì±….html" class="policy-link" style="color:inherit; text-decoration:none;">í™˜ë¶ˆì •ì±…</a>
  </div>
  <!-- ì €ì‘ê¶Œ ë¬¸êµ¬ -->
   <div class="copyright" style="margin-top:14px; font-size:11.8px; color:#8e9bb3; text-align:center; letter-spacing:0.01em;">
    Â© 2025 GoHigher. All rights reserved
    </div>
</aside>

<div id="searchModalOverlay" class="modal-overlay" style="display:none;"></div>

<!-- ê²€ìƒ‰ ëª¨ë‹¬ -->
<div id="searchModal" class="search-modal" style="display:none;">
  <button id="closeSearchModal" class="modal-close" aria-label="ë‹«ê¸°">&times;</button>
  <h2 class="modal-title">ê²€ìƒ‰ ê²°ê³¼</h2>
  <div id="modalResult" class="stock-result"></div>
</div>

  <div style="height: 66px;"></div>

  <main class="mypage-main-container" style="max-width:1200px;margin:0 auto;padding:40px 20px 80px 20px;">
    
    <!-- íšŒì› ì •ë³´ - í—¬ë¡œì¹´ë“œ ìŠ¤íƒ€ì¼ -->
    <section class="mypage-section user-profile-card" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);border-radius:30px;padding:0;margin-bottom:40px;position:relative;overflow:hidden;box-shadow:0 20px 60px rgba(102,126,234,0.3);">
      <div
  style="position:absolute;top:0;left:0;right:0;bottom:0;
    background-image: url('data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 100 100%27%3E%3Cdefs%3E%3Cpattern id=%27grain%27 width=%27100%27 height=%27100%27 patternUnits=%27userSpaceOnUse%27%3E%3Ccircle cx=%2725%27 cy=%2725%27 r=%271%27 fill=%27white%27 opacity=%270.1%27/%3E%3Ccircle cx=%2775%27 cy=%2775%27 r=%271%27 fill=%27white%27 opacity=%270.1%27/%3E%3Ccircle cx=%2750%27 cy=%2710%27 r=%270.5%27 fill=%27white%27 opacity=%270.1%27/%3E%3C/pattern%3E%3C/defs%3E%3Crect width=%27100%27 height=%27100%27 fill=%27url(%23grain)%27/%3E%3C/svg%3E');
    background-size: cover;">
</div>
      <div style="position:relative;z-index:1;padding:40px;display:grid;grid-template-columns:auto 1fr auto;gap:30px;align-items:center;">
        <div style="position:relative;">
          <img id="mypageProfilePhoto" src="/logo.jpg" alt="í”„ë¡œí•„" style="width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid rgba(255,255,255,0.3);box-shadow:0 10px 30px rgba(0,0,0,0.3);">
          <div style="position:absolute;bottom:5px;right:5px;width:25px;height:25px;background:#4ade80;border-radius:50%;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.2);"></div>
        </div>
        <div>
          <div id="mypageUserName" style="font-size:2rem;font-weight:800;color:white;margin-bottom:8px;text-shadow:0 2px 10px rgba(0,0,0,0.3);">ì´ë¦„</div>
          <div id="mypageUserEmail" style="font-size:1.1rem;color:rgba(255,255,255,0.9);margin-bottom:12px;">ì´ë©”ì¼</div>
          <div id="mypageMembership" style="display:inline-flex;align-items:center;gap:10px;background:rgba(255,255,255,0.2);padding:10px 20px;border-radius:20px;backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,0.3);">
            <span style="font-size:1.2em;">ğŸ‘‘</span>
            <span style="color:white;font-weight:600;">ë©¤ë²„ì‹­: -</span>
          </div>
        </div>
        <div style="text-align:right;color:white;">
          <div style="font-size:0.9rem;opacity:0.8;margin-bottom:4px;">ë§ˆì§€ë§‰ ë¡œê·¸ì¸</div>
          <div style="font-size:1rem;font-weight:600;">ë°©ê¸ˆ ì „</div>
          <div style="margin-top:15px;padding:8px 16px;background:rgba(255,255,255,0.15);border-radius:12px;font-size:0.9rem;">
            <div style="margin-bottom:4px;">í™œë™ ì ìˆ˜</div>
            <div style="font-weight:700;font-size:1.1rem;">ğŸ”¥ 2,847</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ì¦ê²¨ì°¾ê¸° ì¢…ëª© - ì¹´ë“œ ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ -->
    <section class="mypage-section favorites-card" style="margin-bottom:40px;">
      <div style="display:flex;align-items:center;gap:15px;margin-bottom:30px;">
        <div style="width:50px;height:50px;background:linear-gradient(135deg, #ff6b6b, #ee5a24);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 8px 25px rgba(255,107,107,0.3);">â­</div>
        <div>
          <h2 style="font-size:1.8rem;color:#e9f1ff;font-weight:800;margin:0;">ì¦ê²¨ì°¾ê¸° ì¢…ëª©</h2>
          <p style="color:#b7caf8;margin:5px 0 0 0;font-size:1rem;">ê´€ì‹¬ ìˆëŠ” ì¢…ëª©ë“¤ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”</p>
        </div>
        <div style="margin-left:auto;display:flex;gap:10px;">
          <button class="view-toggle-btn active" data-view="grid" style="background:rgba(255,224,102,0.2);color:#ffe066;border:1px solid rgba(255,224,102,0.3);padding:8px 12px;border-radius:8px;font-size:0.9rem;cursor:pointer;transition:all 0.2s;">ê·¸ë¦¬ë“œ</button>
          <button class="view-toggle-btn" data-view="table" style="background:rgba(152,191,255,0.1);color:#98bfff;border:1px solid rgba(152,191,255,0.2);padding:8px 12px;border-radius:8px;font-size:0.9rem;cursor:pointer;transition:all 0.2s;">í…Œì´ë¸”</button>
        </div>
      </div>
      
      <div id="favoritesEmpty" style="color:#b7caf8;font-size:1.1rem;text-align:center;padding:60px 20px;display:none;background:linear-gradient(135deg, rgba(45,62,91,0.3) 0%, rgba(28,36,52,0.4) 100%);border-radius:20px;border:2px dashed rgba(152,191,255,0.3);">
        <div style="font-size:4rem;margin-bottom:20px;animation:float 3s ease-in-out infinite;">ğŸ“Š</div>
        <div style="font-size:1.3rem;font-weight:600;margin-bottom:10px;">ì¦ê²¨ì°¾ê¸°í•œ ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤</div>
        <div style="font-size:1rem;color:#8e9bb3;margin-bottom:20px;">ê´€ì‹¬ ìˆëŠ” ì¢…ëª©ì„ ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€í•´ë³´ì„¸ìš”!</div>
        <button style="background:linear-gradient(135deg, #98bfff, #667eea);color:white;border:none;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s;">ì¢…ëª© ë‘˜ëŸ¬ë³´ê¸°</button>
      </div>
      
      <div id="favoritesGrid" style="display:grid;grid-template-columns:repeat(auto-fill, minmax(280px, 1fr));gap:20px;display:none;"></div>
      
      <div id="favoritesTableContainer" style="display:none;">
        <div style="background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:20px;padding:25px;box-shadow:0 10px 40px rgba(0,0,0,0.2);border:1px solid rgba(76,90,110,0.3);">
          <table class="stock-table" id="favoritesTable" style="width:100%;border-collapse:collapse;">
            <thead>
              <tr style="background:linear-gradient(90deg, #2c3855 50%, #3a4d77 110%);">
                <th style="color:#e9f1ff;padding:18px 15px;font-weight:600;text-align:center;font-size:1rem;border-bottom:2px solid rgba(76,90,110,0.4);">ì‹¬ë³¼</th>
                <th style="color:#e9f1ff;padding:18px 15px;font-weight:600;text-align:left;font-size:1rem;border-bottom:2px solid rgba(76,90,110,0.4);">ì¢…ëª©ëª…</th>
                <th style="color:#e9f1ff;padding:18px 15px;font-weight:600;text-align:center;font-size:1rem;border-bottom:2px solid rgba(76,90,110,0.4);">í˜„ì¬ê°€</th>
                <th style="color:#e9f1ff;padding:18px 15px;font-weight:600;text-align:center;font-size:1rem;border-bottom:2px solid rgba(76,90,110,0.4);">ë“±ë½ë¥ </th>
                <th style="color:#e9f1ff;padding:18px 15px;font-weight:600;text-align:center;font-size:1rem;border-bottom:2px solid rgba(76,90,110,0.4);">ê´€ë¦¬</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- ìµœê·¼ ë‹¤ì´ì–´ë¦¬ - íƒ€ì„ë¼ì¸ ìŠ¤íƒ€ì¼ -->
    <section class="mypage-section diary-card" style="margin-bottom:40px;">
      <div style="display:flex;align-items:center;gap:15px;margin-bottom:30px;">
        <div style="width:50px;height:50px;background:linear-gradient(135deg, #4ecdc4, #44a08d);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 8px 25px rgba(78,205,196,0.3);">ğŸ“”</div>
        <div>
          <h2 style="font-size:1.8rem;color:#e9f1ff;font-weight:800;margin:0;">íˆ¬ì ë‹¤ì´ì–´ë¦¬</h2>
          <p style="color:#b7caf8;margin:5px 0 0 0;font-size:1rem;">ë‚˜ë§Œì˜ íˆ¬ì ì„±ì¥ ê¸°ë¡</p>
        </div>
        <a href="/ë‹¤ì´ì–´ë¦¬.html" style="margin-left:auto;background:linear-gradient(135deg, #4ecdc4, #44a08d);color:white;padding:12px 20px;border-radius:12px;font-weight:600;text-decoration:none;transition:all 0.2s;box-shadow:0 4px 15px rgba(78,205,196,0.3);">ìƒˆ ê¸€ ì‘ì„±</a>
      </div>
      
      <div id="diaryEmpty" style="color:#b7caf8;font-size:1.1rem;text-align:center;padding:60px 20px;background:linear-gradient(135deg, rgba(45,62,91,0.3) 0%, rgba(28,36,52,0.4) 100%);border-radius:20px;border:2px dashed rgba(78,205,196,0.3);">
        <div style="font-size:4rem;margin-bottom:20px;animation:float 3s ease-in-out infinite;">âœï¸</div>
        <div style="font-size:1.3rem;font-weight:600;margin-bottom:10px;">ì‘ì„±í•œ ë‹¤ì´ì–´ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤</div>
        <div style="font-size:1rem;color:#8e9bb3;margin-bottom:20px;">ì˜¤ëŠ˜ì˜ íˆ¬ì ê²½í—˜ì„ ê¸°ë¡í•´ë³´ì„¸ìš”!</div>
        <button style="background:linear-gradient(135deg, #4ecdc4, #44a08d);color:white;border:none;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s;">ì²« ê¸€ ì‘ì„±í•˜ê¸°</button>
      </div>
      
      <div id="diaryTimeline" style="display:none;position:relative;">
        <div style="position:absolute;left:25px;top:0;bottom:0;width:2px;background:linear-gradient(to bottom, #4ecdc4, #44a08d);"></div>
        <div id="diaryPreview" style="position:relative;background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:20px;padding:30px;margin-left:50px;box-shadow:0 10px 40px rgba(0,0,0,0.2);border:1px solid rgba(76,90,110,0.3);">
          <div style="position:absolute;left:-37px;top:30px;width:20px;height:20px;background:#4ecdc4;border-radius:50%;border:4px solid rgba(28,36,52,0.95);box-shadow:0 0 0 4px rgba(78,205,196,0.2);"></div>
          <div id="diaryDate" style="color:#4ecdc4;font-size:1.1rem;margin-bottom:15px;font-weight:600;display:flex;align-items:center;gap:10px;">
            <span style="font-size:1.3em;">ğŸ“…</span>
            <span></span>
          </div>
          <div id="diaryText" style="color:#c7dbff;font-size:1.1rem;line-height:1.7;background:rgba(28,36,52,0.4);padding:20px;border-radius:12px;border-left:4px solid #4ecdc4;min-height:80px;"></div>
        </div>
      </div>
    </section>

    <!-- ìì‚° ì¶”ì´ - ëŒ€ì‹œë³´ë“œ ìŠ¤íƒ€ì¼ -->
    <section class="mypage-section asset-card" style="margin-bottom:40px;">
      <div style="display:flex;align-items:center;gap:15px;margin-bottom:30px;">
        <div style="width:50px;height:50px;background:linear-gradient(135deg, #f093fb, #f5576c);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 8px 25px rgba(240,147,251,0.3);">ğŸ’°</div>
        <div>
          <h2 style="font-size:1.8rem;color:#e9f1ff;font-weight:800;margin:0;">ìì‚° ëŒ€ì‹œë³´ë“œ</h2>
          <p style="color:#b7caf8;margin:5px 0 0 0;font-size:1rem;">í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ë¥¼ í•œëˆˆì—</p>
        </div>
        <div style="margin-left:auto;display:flex;gap:10px;">
          <button class="period-btn active" data-period="7d" style="background:rgba(240,147,251,0.2);color:#f093fb;border:1px solid rgba(240,147,251,0.3);padding:8px 12px;border-radius:8px;font-size:0.9rem;cursor:pointer;transition:all 0.2s;">7ì¼</button>
          <button class="period-btn" data-period="30d" style="background:rgba(152,191,255,0.1);color:#98bfff;border:1px solid rgba(152,191,255,0.2);padding:8px 12px;border-radius:8px;font-size:0.9rem;cursor:pointer;transition:all 0.2s;">30ì¼</button>
          <button class="period-btn" data-period="90d" style="background:rgba(152,191,255,0.1);color:#98bfff;border:1px solid rgba(152,191,255,0.2);padding:8px 12px;border-radius:8px;font-size:0.9rem;cursor:pointer;transition:all 0.2s;">90ì¼</button>
        </div>
      </div>
      
      <div id="assetEmpty" style="color:#b7caf8;font-size:1.1rem;text-align:center;padding:60px 20px;background:linear-gradient(135deg, rgba(45,62,91,0.3) 0%, rgba(28,36,52,0.4) 100%);border-radius:20px;border:2px dashed rgba(240,147,251,0.3);">
        <div style="font-size:4rem;margin-bottom:20px;animation:float 3s ease-in-out infinite;">ğŸ“ˆ</div>
        <div style="font-size:1.3rem;font-weight:600;margin-bottom:10px;">ìì‚° ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>
        <div style="font-size:1rem;color:#8e9bb3;margin-bottom:20px;">ìì‚°ì„ ë“±ë¡í•˜ë©´ ì¶”ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!</div>
        <button style="background:linear-gradient(135deg, #f093fb, #f5576c);color:white;border:none;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s;">ìì‚° ë“±ë¡í•˜ê¸°</button>
      </div>
      
      <div id="assetDashboard" style="display:none;">
        <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px;margin-bottom:30px;">
          <div style="background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:15px;padding:20px;text-align:center;border:1px solid rgba(76,90,110,0.3);">
            <div style="font-size:2rem;margin-bottom:10px;">ğŸ“Š</div>
            <div style="color:#8e9bb3;font-size:0.9rem;margin-bottom:5px;">ì´ ìì‚°</div>
            <div style="color:#e9f1ff;font-size:1.5rem;font-weight:700;" id="totalAssets">$0</div>
          </div>
          <div style="background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:15px;padding:20px;text-align:center;border:1px solid rgba(76,90,110,0.3);">
            <div style="font-size:2rem;margin-bottom:10px;">ğŸ“ˆ</div>
            <div style="color:#8e9bb3;font-size:0.9rem;margin-bottom:5px;">ìˆ˜ìµë¥ </div>
            <div style="color:#4ade80;font-size:1.5rem;font-weight:700;" id="totalReturn">+0.00%</div>
          </div>
          <div style="background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:15px;padding:20px;text-align:center;border:1px solid rgba(76,90,110,0.3);">
            <div style="font-size:2rem;margin-bottom:10px;">ğŸ¯</div>
            <div style="color:#8e9bb3;font-size:0.9rem;margin-bottom:5px;">ëª©í‘œ ë‹¬ì„±</div>
            <div style="color:#ffe066;font-size:1.5rem;font-weight:700;" id="goalProgress">0%</div>
          </div>
        </div>
        <div style="background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:20px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,0.2);border:1px solid rgba(76,90,110,0.3);">
          <canvas id="assetChart" height="150" style="max-width:100%;"></canvas>
        </div>
      </div>
    </section>

    <!-- ì±—ë´‡ ë¬¸ì˜ - ì±„íŒ… ìŠ¤íƒ€ì¼ -->
    <section class="mypage-section chatbot-card" style="margin-bottom:40px;">
      <div style="display:flex;align-items:center;gap:15px;margin-bottom:30px;">
        <div style="width:50px;height:50px;background:linear-gradient(135deg, #a8edea, #fed6e3);border-radius:15px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;box-shadow:0 8px 25px rgba(168,237,234,0.3);">ğŸ’¬</div>
        <div>
          <h2 style="font-size:1.8rem;color:#e9f1ff;font-weight:800;margin:0;">ê³ ê° ì§€ì›</h2>
          <p style="color:#b7caf8;margin:5px 0 0 0;font-size:1rem;">ìµœê·¼ ë¬¸ì˜ ë‚´ì—­ê³¼ ë‹µë³€</p>
        </div>
        <button style="margin-left:auto;background:linear-gradient(135deg, #a8edea, #fed6e3);color:#222c42;padding:12px 20px;border-radius:12px;font-weight:600;border:none;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 15px rgba(168,237,234,0.3);">ìƒˆ ë¬¸ì˜í•˜ê¸°</button>
      </div>
      
      <div id="chatbotEmpty" style="color:#b7caf8;font-size:1.1rem;text-align:center;padding:60px 20px;background:linear-gradient(135deg, rgba(45,62,91,0.3) 0%, rgba(28,36,52,0.4) 100%);border-radius:20px;border:2px dashed rgba(168,237,234,0.3);">
        <div style="font-size:4rem;margin-bottom:20px;animation:float 3s ease-in-out infinite;">ğŸ¤–</div>
        <div style="font-size:1.3rem;font-weight:600;margin-bottom:10px;">ìµœê·¼ ë¬¸ì˜ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤</div>
        <div style="font-size:1rem;color:#8e9bb3;margin-bottom:20px;">ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´ ì–¸ì œë“  ë¬¸ì˜í•˜ì„¸ìš”!</div>
        <button style="background:linear-gradient(135deg, #a8edea, #fed6e3);color:#222c42;border:none;padding:12px 24px;border-radius:12px;font-weight:600;cursor:pointer;transition:all 0.2s;">ë¬¸ì˜í•˜ê¸°</button>
      </div>
      
      <div id="chatbotChat" style="display:none;background:linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);border-radius:20px;padding:25px;box-shadow:0 10px 40px rgba(0,0,0,0.2);border:1px solid rgba(76,90,110,0.3);max-height:400px;overflow-y:auto;">
        <ul id="chatbotList" style="list-style:none;padding:0;margin:0;"></ul>
      </div>
    </section>
  </main>

  <style>
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .mypage-section {
      animation: slideIn 0.6s ease-out;
    }
    
    .mypage-section:nth-child(2) { animation-delay: 0.1s; }
    .mypage-section:nth-child(3) { animation-delay: 0.2s; }
    .mypage-section:nth-child(4) { animation-delay: 0.3s; }
    .mypage-section:nth-child(5) { animation-delay: 0.4s; }
    
    .view-toggle-btn.active,
    .period-btn.active {
      background: rgba(255,224,102,0.2) !important;
      color: #ffe066 !important;
      border-color: rgba(255,224,102,0.3) !important;
    }
    
    .view-toggle-btn:hover,
    .period-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    /* ê·¸ë¦¬ë“œ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
    .stock-card {
      background: linear-gradient(135deg, rgba(32,38,60,0.97) 0%, rgba(28,36,52,0.95) 100%);
      border-radius: 20px;
      padding: 25px;
      border: 1px solid rgba(76,90,110,0.3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .stock-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, #ff6b6b, #ee5a24);
    }
    
    .stock-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 50px rgba(0,0,0,0.3);
      border-color: rgba(255,107,107,0.3);
    }
    
    /* í…Œì´ë¸” ìŠ¤íƒ€ì¼ ê°œì„  */
    .stock-table tr {
      transition: all 0.2s ease;
    }
    
    .stock-table tr:hover {
      background: rgba(45,62,91,0.4);
      transform: scale(1.01);
    }
    
    .stock-table td {
      padding: 16px 15px;
      text-align: center;
      border-bottom: 1px solid rgba(76,90,110,0.3);
      font-size: 0.95rem;
      color: #c7dbff;
    }
    
    .stock-table td:first-child {
      font-weight: 700;
      color: #98bfff;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    }
    
    .stock-table td:nth-child(2) {
      text-align: left;
      font-weight: 500;
    }
    
    .stock-table td:nth-child(3) {
      font-weight: 600;
      color: #ffe066;
    }
    
    .stock-table td:nth-child(4) {
      font-weight: 600;
    }
    
    /* ì±—ë´‡ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ */
    #chatbotList li {
      background: rgba(45,62,91,0.4);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 15px;
      border: 1px solid rgba(255,255,255,0.08);
      transition: all 0.3s ease;
      position: relative;
    }
    
    #chatbotList li::before {
      content: '';
      position: absolute;
      left: -8px;
      top: 20px;
      width: 0;
      height: 0;
      border-top: 8px solid transparent;
      border-bottom: 8px solid transparent;
      border-right: 8px solid rgba(45,62,91,0.4);
    }
    
    #chatbotList li:hover {
      background: rgba(55,65,95,0.6);
      border-color: rgba(168,237,234,0.3);
      transform: translateX(5px);
    }
    
@media (max-width: 768px) {
  .mypage-main-container {
    max-width: 100vw !important;
    padding: 14px 2.5vw 32px 2.5vw !important;
    border-radius: 0 !important;
  }
  .mypage-section {
    margin-bottom: 22px !important;
    padding: 0 !important;
    border-radius: 0 !important;
    min-width: 0 !important;
  }
  /* í”„ë¡œí•„ ì¹´ë“œ */
  .user-profile-card {
    border-radius: 14px !important;
    margin-bottom: 18px !important;
    box-shadow: none !important;
  }
  .user-profile-card > div[style*="padding:40px"] {
    padding: 18px 9px !important;
    gap: 11px !important;
    grid-template-columns: 1fr !important;
    text-align: center !important;
    justify-items: center !important;
  }
  .user-profile-card img {
    width: 62px !important;
    height: 62px !important;
    border-width: 2px !important;
  }
  .user-profile-card #mypageUserName {
    font-size: 1.15rem !important;
    margin-bottom: 4px !important;
  }
  .user-profile-card #mypageUserEmail {
    font-size: 0.99rem !important;
    margin-bottom: 8px !important;
  }
  .user-profile-card #mypageMembership {
    font-size: 0.96em !important;
    padding: 6px 11px !important;
    border-radius: 13px !important;
  }
  .user-profile-card > div:last-child {
    margin-top: 10px !important;
    text-align: center !important;
  }
  /* ê° ì„¹ì…˜ ê³µí†µ */
  .mypage-section > div[style*="display:flex"] {
    gap: 7px !important;
    flex-direction: column !important;
    align-items: flex-start !important;
    margin-bottom: 12px !important;
  }
  .mypage-section h2 {
    font-size: 1.09rem !important;
    margin: 0 0 0.1em 0 !important;
  }
  .mypage-section p {
    font-size: 0.89rem !important;
    margin: 2px 0 0 0 !important;
  }
  /* ì¦ê²¨ì°¾ê¸° */
  .favorites-card > div[style*="gap:15px"] > div[style*="width:50px"] {
    width: 36px !important;
    height: 36px !important;
    font-size: 1.2rem !important;
    border-radius: 9px !important;
  }
  .favorites-card .view-toggle-btn {
    font-size: 0.86rem !important;
    padding: 6px 10px !important;
    border-radius: 6px !important;
  }
  #favoritesEmpty, #diaryEmpty, #assetEmpty, #chatbotEmpty {
    padding: 36px 3vw !important;
    font-size: 0.99rem !important;
    border-radius: 13px !important;
  }
  #favoritesEmpty > div,
  #diaryEmpty > div,
  #assetEmpty > div,
  #chatbotEmpty > div {
    font-size: 2.2rem !important;
    margin-bottom: 10px !important;
  }
  #favoritesGrid {
    grid-template-columns: 1fr !important;
    gap: 11px !important;
    padding: 0 !important;
  }
  .stock-card {
    border-radius: 11px !important;
    padding: 14px 8px !important;
    font-size: 0.97rem !important;
  }
  /* í…Œì´ë¸” (ìŠ¤ì™€ì´í”„) */
  #favoritesTableContainer {
    overflow-x: auto !important;
    padding-bottom: 2px !important;
  }
  .stock-table th, .stock-table td {
    padding: 7px 7px !important;
    font-size: 0.91rem !important;
  }
  /* ë‹¤ì´ì–´ë¦¬ */
  .diary-card > div[style*="width:50px"] {
    width: 36px !important;
    height: 36px !important;
    font-size: 1.2rem !important;
    border-radius: 9px !important;
  }
  .diary-card a,
  #favoritesEmpty button,
  #diaryEmpty button,
  #assetEmpty button,
  #chatbotEmpty button {
    font-size: 0.97rem !important;
    border-radius: 9px !important;
    padding: 10px 17px !important;
    margin-top: 4px !important;
  }
  #diaryTimeline {
    margin-left: 0 !important;
    padding: 0 !important;
  }
  #diaryPreview {
    margin-left: 25px !important;
    padding: 14px 7px !important;
    border-radius: 11px !important;
  }
  #diaryPreview > div {
    font-size: 0.97rem !important;
    min-height: 40px !important;
    padding: 10px !important;
    border-radius: 7px !important;
  }
  #diaryPreview > div[style*="color:#4ecdc4;"] {
    font-size: 0.97rem !important;
    margin-bottom: 7px !important;
    gap: 5px !important;
  }
  #diaryPreview > div[style*="left:-37px"] {
    left: -22px !important;
    top: 16px !important;
    width: 13px !important;
    height: 13px !important;
    border-width: 2px !important;
    box-shadow: 0 0 0 2px rgba(78,205,196,0.15) !important;
  }
  /* ìì‚° ì¹´ë“œ */
  .asset-card > div[style*="width:50px"] {
    width: 36px !important;
    height: 36px !important;
    font-size: 1.2rem !important;
    border-radius: 9px !important;
  }
  .asset-card .period-btn {
    font-size: 0.84rem !important;
    padding: 6px 10px !important;
    border-radius: 6px !important;
  }
  #assetDashboard > div[style*="display:grid"] {
    grid-template-columns: 1fr !important;
    gap: 9px !important;
    margin-bottom: 12px !important;
  }
  #assetDashboard > div:last-child {
    border-radius: 11px !important;
    padding: 13px 7px !important;
  }
  #assetDashboard .asset-stat {
    font-size: 0.99rem !important;
    padding: 9px 0 !important;
  }
  /* ì±—ë´‡ */
  .chatbot-card > div[style*="width:50px"] {
    width: 36px !important;
    height: 36px !important;
    font-size: 1.2rem !important;
    border-radius: 9px !important;
  }
  #chatbotChat {
    border-radius: 11px !important;
    padding: 13px 7px !important;
    max-height: 180px !important;
    font-size: 0.97rem !important;
  }
  #chatbotList li {
    border-radius: 9px !important;
    padding: 11px 8px !important;
    margin-bottom: 8px !important;
    font-size: 0.97rem !important;
  }
}
  </style>

  <script src="navigation.js"></script>
  <script>
    const firebaseConfig = {
  apiKey: "AIzaSyCgFLtAo8LETpHq44hxlT7QigCbIltk-Zk",
  authDomain: "gohigher-55e51.firebaseapp.com",
  projectId: "gohigher-55e51",
  storageBucket: "gohigher-55e51.appspot.com",
  messagingSenderId: "487435343721",
  appId: "1:487435343721:web:dc5708c3a263214fba4ff8",
  measurementId: "G-KQ02L8DXG0"
};
if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

// 2. Chart.js ë¡œë“œ (CDN)
(function loadChartJs() {
  if (!window.Chart) {
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
    document.head.appendChild(script);
  }
})();

window.addEventListener('DOMContentLoaded', () => {
  // --- 1. íšŒì› ì •ë³´ ê´€ë ¨ DOM ë³€ìˆ˜ ---
  const profilePhoto = document.getElementById('mypageProfilePhoto');
  const userName     = document.getElementById('mypageUserName');
  const userEmail    = document.getElementById('mypageUserEmail');
  const membership   = document.getElementById('mypageMembership');

  // --- 2. ê¸°íƒ€ ì„¹ì…˜ DOM ë³€ìˆ˜ ---
  const favoritesTable = document.getElementById('favoritesTable');
  const favoritesTbody = favoritesTable ? favoritesTable.querySelector('tbody') : null;
  const favoritesEmpty = document.getElementById('favoritesEmpty');
  const favoritesGrid = document.getElementById('favoritesGrid');
  const favoritesTableContainer = document.getElementById('favoritesTableContainer');
  const viewToggleButtons = document.querySelectorAll('.view-toggle-btn');

  const diaryEmpty   = document.getElementById('diaryEmpty');
  const diaryTimeline = document.getElementById('diaryTimeline');
  const diaryPreview = document.getElementById('diaryPreview');
  const diaryDate    = document.getElementById('diaryDate');
  const diaryText    = document.getElementById('diaryText');

  const assetChartEl = document.getElementById('assetChart');
  const assetEmpty   = document.getElementById('assetEmpty');
  const assetDashboard = document.getElementById('assetDashboard');
  const totalAssets = document.getElementById('totalAssets');
  const totalReturn = document.getElementById('totalReturn');
  const goalProgress = document.getElementById('goalProgress');
  const periodButtons = document.querySelectorAll('.period-btn');
  let assetChart;

  const chatbotEmpty = document.getElementById('chatbotEmpty');
  const chatbotList  = document.getElementById('chatbotList');
  const chatbotChat  = document.getElementById('chatbotChat');

  // --- 3. íšŒì› ì •ë³´ ë Œë” í•¨ìˆ˜ ---
  function renderUserInfo(user) {
    if (!user) {
      if (userName)     userName.textContent = 'ë¹„ë¡œê·¸ì¸';
      if (userEmail)    userEmail.textContent = '';
      if (profilePhoto) profilePhoto.src = '/logo.jpg';
      if (membership)   membership.innerHTML = `<span style="font-size:1.2em;">ğŸ‘‘</span> <span style="color:white;font-weight:600;">ë©¤ë²„ì‹­: -</span>`;
      return;
    }
    if (userName)     userName.textContent = user.displayName || user.email.split('@')[0];
    if (userEmail)    userEmail.textContent = user.email;
    if (profilePhoto) profilePhoto.src = user.photoURL || '/logo.jpg';
    if (membership)   membership.innerHTML =
      `<span style="font-size:1.2em;">ğŸ‘‘</span> <span style="color:white;font-weight:600;">ë©¤ë²„ì‹­: ${user.email.includes("premium") ? "í”„ë¦¬ë¯¸ì—„" : "ì¼ë°˜"}</span>`;
  }

  // --- 4. ì¸ì¦ ìƒíƒœ ë³€í™” ê°ì§€ ---
  auth.onAuthStateChanged(async user => {
    renderUserInfo(user);

    if (!user) {
      // ëª¨ë“  ì„¹ì…˜ ë¹„ì›€
      if (favoritesGrid) favoritesGrid.style.display = 'none';
      if (favoritesTableContainer) favoritesTableContainer.style.display = 'none';
      if (diaryTimeline) diaryTimeline.style.display = 'none';
      if (diaryEmpty) diaryEmpty.style.display = '';
      if (assetDashboard) assetDashboard.style.display = 'none';
      if (assetEmpty) assetEmpty.style.display = '';
      if (assetChart) assetChart.destroy();
      if (chatbotList) chatbotList.style.display = 'none';
      if (chatbotEmpty) chatbotEmpty.style.display = '';
      if (chatbotChat) chatbotChat.style.display = 'none';
      return;
    }
    // ìœ ì € ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
    loadFavorites(user.uid);
    loadDiary(user.uid);
    loadAssets(user.uid);
    loadChatbot(user.uid);
  });

  // --- 5. ì¦ê²¨ì°¾ê¸° ì¢…ëª© ë¶ˆëŸ¬ì˜¤ê¸° ---
  async function loadFavorites(uid) {
    if (favoritesGrid) favoritesGrid.style.display = 'none';
    if (favoritesTableContainer) favoritesTableContainer.style.display = 'none';
    if (favoritesGrid) favoritesGrid.innerHTML = '';
    if (favoritesTbody) favoritesTbody.innerHTML = '';
    try {
      const snap = await db.collection('users').doc(uid).collection('favorites').orderBy('addedAt', 'desc').limit(10).get();
      if (snap.empty) {
        if (favoritesEmpty) favoritesEmpty.style.display = '';
        return;
      }
      if (favoritesGrid) favoritesGrid.style.display = 'grid';
      if (favoritesTableContainer) favoritesTableContainer.style.display = '';
      const promises = [];
      snap.forEach(doc => {
        const fav = doc.data();
        promises.push(fetch(`/stockInfo?ticker=${fav.symbol}`)
          .then(r=>r.json())
          .then(info=>({id:doc.id,symbol:fav.symbol,name:info.name||'-'}))
          .catch(()=>({id:doc.id,symbol:fav.symbol,name:'-'})));
      });
      const rows = await Promise.all(promises);
      // ê°€ê²©/ë“±ë½ë¥  fetch
      const pricePromises = rows.map(row =>
        fetch(`/stockPrice?ticker=${row.symbol}`)
          .then(r=>r.json())
          .then(p=>({...row, price:p.price}))
          .catch(()=>({...row, price:'-'}))
      );
      const priceRows = await Promise.all(pricePromises);
      if (favoritesGrid) favoritesGrid.innerHTML = '';
      priceRows.forEach(row => {
        // ì¹´ë“œë·°
        const card = document.createElement('div');
        card.classList.add('stock-card');
        card.innerHTML = `
          <div class="ticker">${row.symbol}</div>
          <div class="stock-name">${row.name}</div>
          <div class="stock-price">${row.price !== undefined ? '$'+row.price : '-'}</div>
          <div class="stock-change">-</div>
          <button class="btn" style="padding:2px 8px;font-size:0.97em;" onclick="removeFavorite('${row.id}')">ì‚­ì œ</button>
        `;
        if (favoritesGrid) favoritesGrid.appendChild(card);
        // í…Œì´ë¸”ë·° (í•„ìš”í•˜ë©´ ì¶”ê°€)
        if (favoritesTbody) {
          const tr = document.createElement('tr');
          tr.innerHTML = `
            <td>${row.symbol}</td>
            <td>${row.name}</td>
            <td>${row.price !== undefined ? '$'+row.price : '-'}</td>
            <td>-</td>
            <td><button class="btn" style="padding:2px 8px;font-size:0.97em;" onclick="removeFavorite('${row.id}')">ì‚­ì œ</button></td>
          `;
          favoritesTbody.appendChild(tr);
        }
      });
    } catch (e) {
      if (favoritesEmpty) {
        favoritesEmpty.textContent = 'ì¢…ëª© ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.';
        favoritesEmpty.style.display = '';
      }
    }
  }

  // ì¦ê²¨ì°¾ê¸° ì‚­ì œ
  window.removeFavorite = async function(id) {
    const user = auth.currentUser;
    if (!user) return;
    await db.collection('users').doc(user.uid).collection('favorites').doc(id).delete();
    loadFavorites(user.uid);
  };

  // --- 6. ìµœê·¼ ë‹¤ì´ì–´ë¦¬ ë¶ˆëŸ¬ì˜¤ê¸° ---
  async function loadDiary(uid) {
    if (diaryTimeline) diaryTimeline.style.display = 'none';
    if (diaryEmpty) diaryEmpty.style.display = '';
    try {
      const snap = await db.collection('users').doc(uid).collection('diary').orderBy('date','desc').limit(1).get();
      if (snap.empty) return;
      const doc = snap.docs[0].data();
      if (diaryDate) diaryDate.textContent = doc.date || '';
      if (diaryText) diaryText.textContent = doc.text ? (doc.text.length > 120 ? doc.text.slice(0,120)+'...' : doc.text) : '';
      if (diaryPreview) diaryPreview.style.display = '';
      if (diaryEmpty) diaryEmpty.style.display = 'none';
      if (diaryTimeline) diaryTimeline.style.display = '';
    } catch (e) {}
  }

  // --- 7. ìì‚° ì¶”ì´ ë¶ˆëŸ¬ì˜¤ê¸° ---
  async function loadAssets(uid) {
    if (assetDashboard) assetDashboard.style.display = 'none';
    if (assetEmpty) assetEmpty.style.display = '';
    if (assetChart) assetChart.destroy();
    try {
      const snap = await db.collection('users').doc(uid).collection('assets').orderBy('date','desc').limit(8).get();
      if (snap.empty) return;
      const data = snap.docs.map(d=>d.data()).reverse();
      const labels = data.map(d=>d.date);
      const values = data.map(d=>d.value);
      if (!window.Chart) {
        setTimeout(()=>loadAssets(uid), 300);
        return;
      }
      assetChart = new Chart(assetChartEl.getContext('2d'), {
        type: 'line',
        data: {
          labels,
          datasets: [{
            label: 'ìì‚°',
            data: values,
            borderColor: '#ffe066',
            backgroundColor: 'rgba(255,224,102,0.13)',
            pointRadius: 3,
            tension: 0.3
          }]
        },
        options: {
          plugins: { legend: { display: false } },
          scales: {
            x: { ticks: { color: '#b7caf8' }, grid: { color: '#233154' } },
            y: { ticks: { color: '#ffe066' }, grid: { color: '#233154' } }
          }
        }
      });
      if (assetEmpty) assetEmpty.style.display = 'none';
      if (assetDashboard) assetDashboard.style.display = '';
    } catch (e) {}
  }

  // --- 8. ì±—ë´‡ ë¬¸ì˜ ë¶ˆëŸ¬ì˜¤ê¸° ---
  async function loadChatbot(uid) {
    if (chatbotList) chatbotList.innerHTML = '';
    if (chatbotList) chatbotList.style.display = 'none';
    if (chatbotEmpty) chatbotEmpty.style.display = '';
    if (chatbotChat) chatbotChat.style.display = 'none';
    try {
      const snap = await db.collection('user_chat').where('sender','==','user').where('uid','==',uid).orderBy('createdAt','desc').limit(3).get();
      if (snap.empty) return;
      if (chatbotList) chatbotList.style.display = '';
      if (chatbotEmpty) chatbotEmpty.style.display = 'none';
      if (chatbotChat) chatbotChat.style.display = '';
      snap.forEach(doc => {
        const d = doc.data();
        const li = document.createElement('li');
        li.style.marginBottom = '7px';
        li.innerHTML = `<span style="color:#ffe066;font-size:0.98em;">${d.createdAt && d.createdAt.toDate ? d.createdAt.toDate().toLocaleString() : ''}</span><br><span style="color:#c7dbff;">${d.message ? (d.message.length>60?d.message.slice(0,60)+'...':d.message) : ''}</span>`;
        if (chatbotList) chatbotList.appendChild(li);
      });
    } catch (e) {}
  }

  // --- 9. ë·° í† ê¸€ ë²„íŠ¼ (ê·¸ë¦¬ë“œ/í…Œì´ë¸”) ---
  if (viewToggleButtons && viewToggleButtons.length > 0) {
    viewToggleButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        viewToggleButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        if (this.dataset.view === 'grid') {
          if (favoritesGrid) favoritesGrid.style.display = 'grid';
          if (favoritesTableContainer) favoritesTableContainer.style.display = 'none';
        } else {
          if (favoritesGrid) favoritesGrid.style.display = 'none';
          if (favoritesTableContainer) favoritesTableContainer.style.display = '';
        }
      });
    });
  }

  // --- 10. ìì‚° ëŒ€ì‹œë³´ë“œ ê¸°ê°„ ë²„íŠ¼ ---
  if (periodButtons && periodButtons.length > 0) {
    periodButtons.forEach(btn => {
      btn.addEventListener('click', function() {
        periodButtons.forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        // ì‹¤ì œ ë°ì´í„° í•„í„°ë§ í•„ìš”ì‹œ ì—¬ê¸°ì— ì¶”ê°€ êµ¬í˜„
      });
    });
  }
});

  </script>
</body>
</html>